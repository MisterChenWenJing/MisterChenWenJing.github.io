<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
  <id>https://github.com/MisterChen9527/</id>
  <title>Mr.Chen</title>
  <subtitle>Where there is light, there is hope.</subtitle>
  <updated>2022-08-21T06:11:20.656Z</updated>
  <generator>vuepress-plugin-feed2</generator>
  <link rel="self" href="https://github.com/MisterChen9527/atom.xml"/>
  <link rel="alternate" href="https://github.com/MisterChen9527/"/>
  <category term="Vite"/>
  <category term="WebPack"/>
  <category term="设计"/>
  <category term="硬件"/>
  <category term="Linux"/>
  <category term="基础"/>
  <category term="随笔"/>
  <category term="服务器"/>
  <category term="软件"/>
  <category term="Android"/>
  <category term="前端"/>
  <category term="后端"/>
  <category term="GitHub"/>
  <category term="教程"/>
  <category term="小程序"/>
  <category term="Node.js"/>
  <category term="Vue"/>
  <category term="JavaScript"/>
  <contributor>
    <name>小灰</name>
  </contributor>
  <contributor>
    <name>印迹</name>
  </contributor>
  <entry>
    <title type="html">Vite</title>
    <id>https://github.com/MisterChen9527/note/vite/</id>
    <link href="https://github.com/MisterChen9527/note/vite/"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<div><p>提示</p>
<p>记录 Vite 打包工具的一些随笔。</p>
</div>
]]></content>
    <category term="Vite" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">WebPack</title>
    <id>https://github.com/MisterChen9527/note/webpack/</id>
    <link href="https://github.com/MisterChen9527/note/webpack/"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="目录" tabindex="-1"> 目录</h2>
<ul>
<li><a href="/note/webpack/base/">基础</a></li>
<li><a href="/note/webpack/senior/">高级</a></li>
<li><a href="/note/webpack/project/">项目</a></li>
<li><a href="/note/webpack/origin/">原理</a></li>
</ul>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">前言</title>
    <id>https://github.com/MisterChen9527/note/vite/base/</id>
    <link href="https://github.com/MisterChen9527/note/vite/base/"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="为什么需要打包工具" tabindex="-1"> 为什么需要打包工具？</h2>
<p>开发时，我们会使用框架（React、Vue），ES6 模块化语法，Less/Sass 等 css 预处理器等语法进行开发。</p>
<p>这样的代码要想在浏览器运行必须经过编译成浏览器能识别的 JS、Css 等语法，才能运行。</p>
<p>所以我们需要打包工具帮我们做完这些事。</p>
<p>除此之外，打包工具还能压缩代码、做兼容性处理、提升代码性能等。</p>
<h2 id="有哪些打包工具" tabindex="-1"> 有哪些打包工具？</h2>
<ul>
<li>Grunt</li>
<li>Gulp</li>
<li>Parcel</li>
<li>Webpack</li>
<li>Rollup</li>
<li>Vite</li>
<li>...</li>
</ul>
<p>目前市面上最新也是最快速的打包工具是 Vite，所以我们主要以 Vite 来介绍使用打包工具</p>
]]></content>
    <category term="Vite" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">基础配置</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="前言" tabindex="-1"> 前言</h2>
<div><p>提示</p>
<p>目前市面上最流行的是 Webpack，所以我们主要以 Webpack 来介绍使用打包工具。</p>
</div>
<h3 id="为什么需要打包工具" tabindex="-1"> 为什么需要打包工具？</h3>
<p>开发时，我们会使用框架（React、Vue），ES6 模块化语法，Less/Sass 等 css 预处理器等语法进行开发。</p>
<p>这样的代码要想在浏览器运行必须经过编译成浏览器能识别的 JS、Css 等语法，才能运行。</p>
<p>所以我们需要打包工具帮我们做完这些事。</p>
<p>除此之外，打包工具还能压缩代码、做兼容性处理、提升代码性能等。</p>
<h3 id="有哪些打包工具" tabindex="-1"> 有哪些打包工具？</h3>
<ul>
<li>Grunt</li>
<li>Gulp</li>
<li>Parcel</li>
<li>Webpack</li>
<li>Rollup</li>
<li>Vite</li>
<li>...</li>
</ul>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">基本使用</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/base.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/base.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p><strong><code>Webpack</code> 是一个静态资源打包工具。</strong></p>
<p>它会以一个或多个文件作为打包的入口，将我们整个项目所有文件编译组合成一个或多个文件输出出去。</p>
<p>输出的文件就是编译好的文件，就可以在浏览器段运行了。</p>
<p>我们将 <code>Webpack</code> 输出的文件叫做 <code>bundle</code>。</p>
<h2 id="功能介绍" tabindex="-1"> 功能介绍</h2>
<p>Webpack 本身功能是有限的:</p>
<ul>
<li>开发模式：仅能编译 JS 中的 <code>ES Module</code> 语法</li>
<li>生产模式：能编译 JS 中的 <code>ES Module</code> 语法，还能压缩 JS 代码</li>
</ul>
<h2 id="开始使用" tabindex="-1"> 开始使用</h2>
<h3 id="_1-资源目录" tabindex="-1"> 1. 资源目录</h3>
<div><pre><code>webpack_code # 项目根目录（所有指令必须在这个目录运行）
    └── src # 项目源码目录
        ├── js # js文件目录
        │   ├── count.js
        │   └── sum.js
        └── main.js # 项目主文件
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_2-创建文件" tabindex="-1"> 2. 创建文件</h3>
<ul>
<li>count.js</li>
</ul>
<div><pre><code><span>export</span> <span>default</span> <span>function</span> <span>count</span><span>(</span><span>x<span>,</span> y</span><span>)</span> <span>{</span>
  <span>return</span> x <span>-</span> y<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><ul>
<li>sum.js</li>
</ul>
<div><pre><code><span>export</span> <span>default</span> <span>function</span> <span>sum</span><span>(</span><span><span>...</span>args</span><span>)</span> <span>{</span>
  <span>return</span> args<span>.</span><span>reduce</span><span>(</span><span>(</span><span>p<span>,</span> c</span><span>)</span> <span>=></span> p <span>+</span> c<span>,</span> <span>0</span><span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><ul>
<li>main.js</li>
</ul>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_3-下载依赖" tabindex="-1"> 3. 下载依赖</h3>
<p>打开终端，来到项目根目录。运行以下指令：</p>
<ul>
<li>初始化<code>package.json</code></li>
</ul>
<div><pre><code>npm init -y
</code></pre><div aria-hidden="true"><div></div></div></div><p>此时会生成一个基础的 <code>package.json</code> 文件。</p>
<p><strong>需要注意的是 <code>package.json</code> 中 <code>name</code> 字段不能叫做 <code>webpack</code>, 否则下一步会报错</strong></p>
<ul>
<li>下载依赖</li>
</ul>
<div><pre><code>npm i webpack webpack-cli -D
</code></pre><div aria-hidden="true"><div></div></div></div><h3 id="_4-启用-webpack" tabindex="-1"> 4. 启用 Webpack</h3>
<ul>
<li>开发模式</li>
</ul>
<div><pre><code>npx webpack ./src/main.js --mode=development
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>生产模式</li>
</ul>
<div><pre><code>npx webpack ./src/main.js --mode=production
</code></pre><div aria-hidden="true"><div></div></div></div><p><code>npx webpack</code>: 是用来运行本地安装 <code>Webpack</code> 包的。</p>
<p><code>./src/main.js</code>: 指定 <code>Webpack</code> 从 <code>main.js</code> 文件开始打包，不但会打包 <code>main.js</code>，还会将其依赖也一起打包进来。</p>
<p><code>--mode=xxx</code>：指定模式（环境）。</p>
<h3 id="_5-观察输出文件" tabindex="-1"> 5. 观察输出文件</h3>
<p>默认 <code>Webpack</code> 会将文件打包输出到 <code>dist</code> 目录下，我们查看 <code>dist</code> 目录下文件情况就好了</p>
<h2 id="小结" tabindex="-1"> 小结</h2>
<p><code>Webpack</code> 本身功能比较少，只能处理 <code>js</code> 资源，一旦遇到 <code>css</code> 等其他资源就会报错。</p>
<p>所以我们学习 <code>Webpack</code>，就是主要学习如何处理其他资源。</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">自动清空上次打包资源</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/clean.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/clean.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-配置" tabindex="-1"> 1. 配置</h2>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span> <span>// 自动将上次打包目录资源清空</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>40</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于40kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_2-运行指令" tabindex="-1"> 2. 运行指令</h2>
<div><pre><code>npx webpack
</code></pre></div><p>观察 dist 目录资源情况</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">基本配置</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/config.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/config.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>在开始使用 <code>Webpack</code> 之前，我们需要对 <code>Webpack</code> 的配置有一定的认识。</p>
<h2 id="_5-大核心概念" tabindex="-1"> 5 大核心概念</h2>
<ol>
<li>entry（入口）</li>
</ol>
<p>指示 Webpack 从哪个文件开始打包</p>
<ol start="2">
<li>output（输出）</li>
</ol>
<p>指示 Webpack 打包完的文件输出到哪里去，如何命名等</p>
<ol start="3">
<li>loader（加载器）</li>
</ol>
<p>webpack 本身只能处理 js、json 等资源，其他资源需要借助 loader，Webpack 才能解析</p>
<ol start="4">
<li>plugins（插件）</li>
</ol>
<p>扩展 Webpack 的功能</p>
<ol start="5">
<li>mode（模式）</li>
</ol>
<p>主要由两种模式：</p>
<ul>
<li>开发模式：development</li>
<li>生产模式：production</li>
</ul>
<h2 id="准备-webpack-配置文件" tabindex="-1"> 准备 Webpack 配置文件</h2>
<p>在项目根目录下新建文件：<code>webpack.config.js</code></p>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 入口</span>
  <span>entry</span><span>:</span> <span>""</span><span>,</span>
  <span>// 输出</span>
  <span>output</span><span>:</span> <span>{</span><span>}</span><span>,</span>
  <span>// 加载器</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// 插件</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>// 模式</span>
  <span>mode</span><span>:</span> <span>""</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>Webpack 是基于 Node.js 运行的，所以采用 Common.js 模块化规范</p>
<h2 id="修改配置文件" tabindex="-1"> 修改配置文件</h2>
<ol>
<li>配置文件</li>
</ol>
<div><pre><code><span>// Node.js的核心模块，专门用来处理文件路径</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 入口</span>
  <span>// 相对路径和绝对路径都行</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>// 输出</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>// path: 文件输出目录，必须是绝对路径</span>
    <span>// path.resolve()方法返回一个绝对路径</span>
    <span>// __dirname 当前文件的文件夹绝对路径</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>// filename: 输出文件名</span>
    <span>filename</span><span>:</span> <span>"main.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// 加载器</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// 插件</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>// 模式</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span> <span>// 开发模式</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="2">
<li>运行指令</li>
</ol>
<div><pre><code>npx webpack
</code></pre></div><p>此时功能和之前一样，也不能处理样式资源</p>
<h2 id="小结" tabindex="-1"> 小结</h2>
<p>Webpack 将来都通过 <code>webpack.config.js</code> 文件进行配置，来增强 Webpack 的功能</p>
<p>我们后面会以两个模式来分别搭建 Webpack 的配置，先进行开发模式，再完成生产模式</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">处理样式资源</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/css.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/css.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>本章节我们学习使用 Webpack 如何处理 Css、Less、Sass、Scss、Styl 样式资源</p>
<h2 id="介绍" tabindex="-1"> 介绍</h2>
<p>Webpack 本身是不能识别样式资源的，所以我们需要借助 Loader 来帮助 Webpack 解析样式资源</p>
<p>我们找 Loader 都应该去官方文档中找到对应的 Loader，然后使用</p>
<p>官方文档找不到的话，可以从社区 Github 中搜索查询</p>
<p><a href="https://webpack.docschina.org/loaders/" target="_blank" rel="noopener noreferrer">Webpack 官方 Loader 文档</a></p>
<h2 id="处理-css-资源" tabindex="-1"> 处理 Css 资源</h2>
<h3 id="_1-下载包" tabindex="-1"> 1. 下载包</h3>
<div><pre><code>npm i css-loader style-loader -D
</code></pre></div><p>注意：需要下载两个 loader</p>
<h3 id="_2-功能介绍" tabindex="-1"> 2. 功能介绍</h3>
<ul>
<li><code>css-loader</code>：负责将 Css 文件编译成 Webpack 能识别的模块</li>
<li><code>style-loader</code>：会动态创建一个 Style 标签，里面放置 Webpack 中 Css 模块内容</li>
</ul>
<p>此时样式就会以 Style 标签的形式在页面上生效</p>
<h3 id="_3-配置" tabindex="-1"> 3. 配置</h3>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"main.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_4-添加-css-资源" tabindex="-1"> 4. 添加 Css 资源</h3>
<ul>
<li>src/css/index.css</li>
</ul>
<div><pre><code><span>.box1</span> <span>{</span>
  <span>width</span><span>:</span> 100px<span>;</span>
  <span>height</span><span>:</span> 100px<span>;</span>
  <span>background-color</span><span>:</span> pink<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>src/main.js</li>
</ul>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入 Css 资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>)</span><span>;</span>
</code></pre><div><br><br><div>&nbsp;</div><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>public/index.html</li>
</ul>
<div><pre><code><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>html</span> <span>lang</span><span><span>=</span><span>"</span>en<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>head</span><span>></span></span>
    <span><span><span>&lt;</span>meta</span> <span>charset</span><span><span>=</span><span>"</span>UTF-8<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>http-equiv</span><span><span>=</span><span>"</span>X-UA-Compatible<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>IE=edge<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>"</span>viewport<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>width=device-width, initial-scale=1.0<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>title</span><span>></span></span>webpack5<span><span><span>&lt;/</span>title</span><span>></span></span>
  <span><span><span>&lt;/</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>body</span><span>></span></span>
    <span><span><span>&lt;</span>h1</span><span>></span></span>Hello Webpack5<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span>&lt;!-- 准备一个使用样式的 DOM 容器 --></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box1<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span>&lt;!-- 引入打包后的js文件，才能看到效果 --></span>
    <span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>../dist/main.js<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
  <span><span><span>&lt;/</span>body</span><span>></span></span>
<span><span><span>&lt;/</span>html</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_5-运行指令" tabindex="-1"> 5. 运行指令</h3>
<div><pre><code>npx webpack
</code></pre></div><p>打开 index.html 页面查看效果</p>
<h2 id="处理-less-资源" tabindex="-1"> 处理 Less 资源</h2>
<h3 id="_1-下载包-1" tabindex="-1"> 1. 下载包</h3>
<div><pre><code>npm i less-loader -D
</code></pre></div><h3 id="_2-功能介绍-1" tabindex="-1"> 2. 功能介绍</h3>
<ul>
<li><code>less-loader</code>：负责将 Less 文件编译成 Css 文件</li>
</ul>
<h3 id="_3-配置-1" tabindex="-1"> 3. 配置</h3>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"main.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_4-添加-less-资源" tabindex="-1"> 4. 添加 Less 资源</h3>
<ul>
<li>src/less/index.less</li>
</ul>
<div><pre><code><span>.box2</span> <span>{</span>
  <span>width</span><span>:</span> 100px<span>;</span>
  <span>height</span><span>:</span> 100px<span>;</span>
  <span>background-color</span><span>:</span> deeppink<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>src/main.js</li>
</ul>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>)</span><span>;</span>
</code></pre><div><br><br><br><br><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>public/index.html</li>
</ul>
<div><pre><code><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>html</span> <span>lang</span><span><span>=</span><span>"</span>en<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>head</span><span>></span></span>
    <span><span><span>&lt;</span>meta</span> <span>charset</span><span><span>=</span><span>"</span>UTF-8<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>http-equiv</span><span><span>=</span><span>"</span>X-UA-Compatible<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>IE=edge<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>"</span>viewport<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>width=device-width, initial-scale=1.0<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>title</span><span>></span></span>webpack5<span><span><span>&lt;/</span>title</span><span>></span></span>
  <span><span><span>&lt;/</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>body</span><span>></span></span>
    <span><span><span>&lt;</span>h1</span><span>></span></span>Hello Webpack5<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box1<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box2<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>../dist/main.js<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
  <span><span><span>&lt;/</span>body</span><span>></span></span>
<span><span><span>&lt;/</span>html</span><span>></span></span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_5-运行指令-1" tabindex="-1"> 5. 运行指令</h3>
<div><pre><code>npx webpack
</code></pre></div><p>打开 index.html 页面查看效果</p>
<h2 id="处理-sass-和-scss-资源" tabindex="-1"> 处理 Sass 和 Scss 资源</h2>
<h3 id="_1-下载包-2" tabindex="-1"> 1. 下载包</h3>
<div><pre><code>npm i sass-loader sass -D
</code></pre></div><p>注意：需要下载两个</p>
<h3 id="_2-功能介绍-2" tabindex="-1"> 2. 功能介绍</h3>
<ul>
<li><code>sass-loader</code>：负责将 Sass 文件编译成 css 文件</li>
<li><code>sass</code>：<code>sass-loader</code> 依赖 <code>sass</code> 进行编译</li>
</ul>
<h3 id="_3-配置-2" tabindex="-1"> 3. 配置</h3>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"main.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_4-添加-sass-资源" tabindex="-1"> 4. 添加 Sass 资源</h3>
<ul>
<li>src/sass/index.sass</li>
</ul>
<div><pre><code><span>/* 可以省略大括号和分号 */</span>
.box3
  <span>width</span><span>:</span> 100px
  <span>height</span><span>:</span> 100px
  <span>background-color</span><span>:</span> hotpink
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>src/sass/index.scss</li>
</ul>
<div><pre><code><span>.box4</span> <span>{</span>
  <span>width</span><span>:</span> 100px<span>;</span>
  <span>height</span><span>:</span> 100px<span>;</span>
  <span>background-color</span><span>:</span> lightpink<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>src/main.js</li>
</ul>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>)</span><span>;</span>
</code></pre><div><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>public/index.html</li>
</ul>
<div><pre><code><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>html</span> <span>lang</span><span><span>=</span><span>"</span>en<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>head</span><span>></span></span>
    <span><span><span>&lt;</span>meta</span> <span>charset</span><span><span>=</span><span>"</span>UTF-8<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>http-equiv</span><span><span>=</span><span>"</span>X-UA-Compatible<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>IE=edge<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>"</span>viewport<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>width=device-width, initial-scale=1.0<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>title</span><span>></span></span>webpack5<span><span><span>&lt;/</span>title</span><span>></span></span>
  <span><span><span>&lt;/</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>body</span><span>></span></span>
    <span><span><span>&lt;</span>h1</span><span>></span></span>Hello Webpack5<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box1<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box2<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box3<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box4<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>../dist/main.js<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
  <span><span><span>&lt;/</span>body</span><span>></span></span>
<span><span><span>&lt;/</span>html</span><span>></span></span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_5-运行指令-2" tabindex="-1"> 5. 运行指令</h3>
<div><pre><code>npx webpack
</code></pre></div><p>打开 index.html 页面查看效果</p>
<h2 id="处理-styl-资源" tabindex="-1"> 处理 Styl 资源</h2>
<h3 id="_1-下载包-3" tabindex="-1"> 1. 下载包</h3>
<div><pre><code>npm i stylus-loader -D
</code></pre></div><h3 id="_2-功能介绍-3" tabindex="-1"> 2. 功能介绍</h3>
<ul>
<li><code>stylus-loader</code>：负责将 Styl 文件编译成 Css 文件</li>
</ul>
<h3 id="_3-配置-3" tabindex="-1"> 3. 配置</h3>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"main.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_4-添加-styl-资源" tabindex="-1"> 4. 添加 Styl 资源</h3>
<ul>
<li>src/styl/index.styl</li>
</ul>
<div><pre><code><span>/* 可以省略大括号、分号、冒号 */</span>
.box 
  width 100px 
  height 100px 
  background-color pink
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>src/main.js</li>
</ul>
<div><pre><code><span>import</span> <span>{</span> add <span>}</span> <span>from</span> <span>"./math"</span><span>;</span>
<span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>)</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>public/index.html</li>
</ul>
<div><pre><code><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>html</span> <span>lang</span><span><span>=</span><span>"</span>en<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>head</span><span>></span></span>
    <span><span><span>&lt;</span>meta</span> <span>charset</span><span><span>=</span><span>"</span>UTF-8<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>http-equiv</span><span><span>=</span><span>"</span>X-UA-Compatible<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>IE=edge<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>"</span>viewport<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>width=device-width, initial-scale=1.0<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>title</span><span>></span></span>webpack5<span><span><span>&lt;/</span>title</span><span>></span></span>
  <span><span><span>&lt;/</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>body</span><span>></span></span>
    <span><span><span>&lt;</span>h1</span><span>></span></span>Hello Webpack5<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span>&lt;!-- 准备一个使用样式的 DOM 容器 --></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box1<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box2<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box3<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box4<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box5<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>../dist/main.js<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
  <span><span><span>&lt;/</span>body</span><span>></span></span>
<span><span><span>&lt;/</span>html</span><span>></span></span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_5-运行指令-3" tabindex="-1"> 5. 运行指令</h3>
<div><pre><code>npx webpack
</code></pre></div><p>打开 index.html 页面查看效果</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">开发模式介绍</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/development.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/development.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>开发模式顾名思义就是我们开发代码时使用的模式。</p>
<p>这个模式下我们主要做两件事：</p>
<ol>
<li>编译代码，使浏览器能识别运行</li>
</ol>
<p>开发时我们有样式资源、字体图标、图片资源、html 资源等，webpack 默认都不能处理这些资源，所以我们要加载配置来编译这些资源</p>
<ol start="2">
<li>代码质量检查，树立代码规范</li>
</ol>
<p>提前检查代码的一些隐患，让代码运行时能更加健壮。</p>
<p>提前检查代码规范和格式，统一团队编码风格，让代码更优雅美观。</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">处理字体图标资源</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/font.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/font.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-下载字体图标文件" tabindex="-1"> 1. 下载字体图标文件</h2>
<ol>
<li>
<p>打开<a href="https://www.iconfont.cn/" target="_blank" rel="noopener noreferrer">阿里巴巴矢量图标库</a></p>
</li>
<li>
<p>选择想要的图标添加到购物车，统一下载到本地</p>
</li>
</ol>
<h2 id="_2-添加字体图标资源" tabindex="-1"> 2. 添加字体图标资源</h2>
<ul>
<li>
<p>src/fonts/iconfont.ttf</p>
</li>
<li>
<p>src/fonts/iconfont.woff</p>
</li>
<li>
<p>src/fonts/iconfont.woff2</p>
</li>
<li>
<p>src/css/iconfont.css</p>
<ul>
<li>注意字体文件路径需要修改</li>
</ul>
</li>
<li>
<p>src/main.js</p>
</li>
</ul>
<div><pre><code><span>import</span> <span>{</span> add <span>}</span> <span>from</span> <span>"./math"</span><span>;</span>
<span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>)</span><span>;</span>
</code></pre><div><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>public/index.html</li>
</ul>
<div><pre><code><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>html</span> <span>lang</span><span><span>=</span><span>"</span>en<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>head</span><span>></span></span>
    <span><span><span>&lt;</span>meta</span> <span>charset</span><span><span>=</span><span>"</span>UTF-8<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>http-equiv</span><span><span>=</span><span>"</span>X-UA-Compatible<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>IE=edge<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>"</span>viewport<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>width=device-width, initial-scale=1.0<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>title</span><span>></span></span>webpack5<span><span><span>&lt;/</span>title</span><span>></span></span>
  <span><span><span>&lt;/</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>body</span><span>></span></span>
    <span><span><span>&lt;</span>h1</span><span>></span></span>Hello Webpack5<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box1<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box2<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box3<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box4<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box5<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span>&lt;!-- 使用字体图标 --></span>
    <span><span><span>&lt;</span>i</span> <span>class</span><span><span>=</span><span>"</span>iconfont icon-arrow-down<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>i</span><span>></span></span>
    <span><span><span>&lt;</span>i</span> <span>class</span><span><span>=</span><span>"</span>iconfont icon-ashbin<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>i</span><span>></span></span>
    <span><span><span>&lt;</span>i</span> <span>class</span><span><span>=</span><span>"</span>iconfont icon-browse<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>i</span><span>></span></span>
    <span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>../dist/static/js/main.js<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
  <span><span><span>&lt;/</span>body</span><span>></span></span>
<span><span><span>&lt;/</span>html</span><span>></span></span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_3-配置" tabindex="-1"> 3. 配置</h2>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span> <span>// 自动将上次打包目录资源清空</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p><code>type: &quot;asset/resource&quot;</code>和<code>type: &quot;asset&quot;</code>的区别：</p>
<ol>
<li><code>type: &quot;asset/resource&quot;</code> 相当于<code>file-loader</code>, 将文件转化成 Webpack 能识别的资源，其他不做处理</li>
<li><code>type: &quot;asset&quot;</code> 相当于<code>url-loader</code>, 将文件转化成 Webpack 能识别的资源，同时小于某个大小的资源会处理成 data URI 形式</li>
</ol>
<h2 id="_4-运行指令" tabindex="-1"> 4. 运行指令</h2>
<div><pre><code>npx webpack
</code></pre></div><p>打开 index.html 页面查看效果</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">处理Html资源</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/html.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/html.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-下载包" tabindex="-1"> 1. 下载包</h2>
<div><pre><code>npm i html-webpack-plugin -D
</code></pre></div><h2 id="_2-配置" tabindex="-1"> 2. 配置</h2>
<ul>
<li>webpack.config.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span> <span>// 自动将上次打包目录资源清空</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_3-修改-index-html" tabindex="-1"> 3. 修改 index.html</h2>
<p>去掉引入的 js 文件，因为 HtmlWebpackPlugin 会自动引入</p>
<div><pre><code><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>html</span> <span>lang</span><span><span>=</span><span>"</span>en<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>head</span><span>></span></span>
    <span><span><span>&lt;</span>meta</span> <span>charset</span><span><span>=</span><span>"</span>UTF-8<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>http-equiv</span><span><span>=</span><span>"</span>X-UA-Compatible<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>IE=edge<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>"</span>viewport<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>width=device-width, initial-scale=1.0<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>title</span><span>></span></span>webpack5<span><span><span>&lt;/</span>title</span><span>></span></span>
  <span><span><span>&lt;/</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>body</span><span>></span></span>
    <span><span><span>&lt;</span>h1</span><span>></span></span>Hello Webpack5<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box1<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box2<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box3<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box4<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box5<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>i</span> <span>class</span><span><span>=</span><span>"</span>iconfont icon-arrow-down<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>i</span><span>></span></span>
    <span><span><span>&lt;</span>i</span> <span>class</span><span><span>=</span><span>"</span>iconfont icon-ashbin<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>i</span><span>></span></span>
    <span><span><span>&lt;</span>i</span> <span>class</span><span><span>=</span><span>"</span>iconfont icon-browse<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>i</span><span>></span></span>
  <span><span><span>&lt;/</span>body</span><span>></span></span>
<span><span><span>&lt;/</span>html</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_4-运行指令" tabindex="-1"> 4. 运行指令</h2>
<div><pre><code>npx webpack
</code></pre></div><p>此时 dist 目录就会输出一个 index.html 文件</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">处理图片资源</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/image.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/image.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>过去在 Webpack4 时，我们处理图片资源通过 <code>file-loader</code> 和 <code>url-loader</code> 进行处理</p>
<p>现在 Webpack5 已经将两个 Loader 功能内置到 Webpack 里了，我们只需要简单配置即可处理图片资源</p>
<h2 id="_1-配置" tabindex="-1"> 1. 配置</h2>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"main.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_2-添加图片资源" tabindex="-1"> 2. 添加图片资源</h2>
<ul>
<li>src/images/1.jpeg</li>
<li>src/images/2.png</li>
<li>src/images/3.gif</li>
</ul>
<h2 id="_3-使用图片资源" tabindex="-1"> 3. 使用图片资源</h2>
<ul>
<li>src/less/index.less</li>
</ul>
<div><pre><code><span>.box2</span> <span>{</span>
  <span>width</span><span>:</span> 100px<span>;</span>
  <span>height</span><span>:</span> 100px<span>;</span>
  <span>background-image</span><span>:</span> <span><span>url</span><span>(</span><span>"../images/1.jpeg"</span><span>)</span></span><span>;</span>
  <span>background-size</span><span>:</span> cover<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>src/sass/index.sass</li>
</ul>
<div><pre><code>.box3
  <span>width</span><span>:</span> 100px
  <span>height</span><span>:</span> 100px
  <span>background-image</span><span>:</span> <span><span>url</span><span>(</span><span>"../images/2.png"</span><span>)</span></span>
  <span>background-size</span><span>:</span> cover
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>src/styl/index.styl</li>
</ul>
<div><pre><code>.box5
  width 100px
  height 100px
  background-image <span><span>url</span><span>(</span><span>"../images/3.gif"</span><span>)</span></span>
  background-size cover
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_4-运行指令" tabindex="-1"> 4. 运行指令</h2>
<div><pre><code>npx webpack
</code></pre></div><p>打开 index.html 页面查看效果</p>
<h2 id="_5-输出资源情况" tabindex="-1"> 5. 输出资源情况</h2>
<p>此时如果查看 dist 目录的话，会发现多了三张图片资源</p>
<p>因为 Webpack 会将所有打包好的资源输出到 dist 目录下</p>
<ul>
<li>为什么样式资源没有呢？</li>
</ul>
<p>因为经过 <code>style-loader</code> 的处理，样式资源打包到 main.js 里面去了，所以没有额外输出出来</p>
<h2 id="_6-对图片资源进行优化" tabindex="-1"> 6. 对图片资源进行优化</h2>
<p>将小于某个大小的图片转化成 data URI 形式（Base64 格式）</p>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"main.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span>
        <span>}</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>优点：减少请求数量</li>
<li>缺点：体积变得更大</li>
</ul>
<p>此时输出的图片文件就只有两张，有一张图片以 data URI 形式内置到 js 中了
（注意：需要将上次打包生成的文件清空，再重新打包才有效果）</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">处理JS资源</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/javascript.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/javascript.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>有人可能会问，js 资源 Webpack 不是已经处理了吗，为什么我们还要处理呢？</p>
<p>原因是 Webpack 对 js 处理是有限的，只能编译 js 中 ES 模块化语法，不能编译其他语法，导致 js 不能在 IE 等浏览器运行，所以我们希望做一些兼容性处理。</p>
<p>其次开发中，团队对代码格式是有严格要求的，我们不能由肉眼去检测代码格式，需要使用专业的工具来检测。</p>
<ul>
<li>针对 js 兼容性处理，我们使用 Babel 来完成</li>
<li>针对代码格式，我们使用 Eslint 来完成</li>
</ul>
<p>我们先完成 Eslint，检测代码格式无误后，在由 Babel 做代码兼容性处理</p>
<h2 id="eslint" tabindex="-1"> Eslint</h2>
<p>可组装的 JavaScript 和 JSX 检查工具。</p>
<p>这句话意思就是：它是用来检测 js 和 jsx 语法的工具，可以配置各项功能</p>
<p>我们使用 Eslint，关键是写 Eslint 配置文件，里面写上各种 rules 规则，将来运行 Eslint 时就会以写的规则对代码进行检查</p>
<h3 id="_1-配置文件" tabindex="-1"> 1. 配置文件</h3>
<p>配置文件由很多种写法：</p>
<ul>
<li><code>.eslintrc.*</code>：新建文件，位于项目根目录
<ul>
<li><code>.eslintrc</code></li>
<li><code>.eslintrc.js</code></li>
<li><code>.eslintrc.json</code></li>
<li>区别在于配置格式不一样</li>
</ul>
</li>
<li><code>package.json</code> 中 <code>eslintConfig</code>：不需要创建文件，在原有文件基础上写</li>
</ul>
<p>ESLint 会查找和自动读取它们，所以以上配置文件只需要存在一个即可</p>
<h3 id="_2-具体配置" tabindex="-1"> 2. 具体配置</h3>
<p>我们以 <code>.eslintrc.js</code> 配置文件为例：</p>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 解析选项</span>
  <span>parserOptions</span><span>:</span> <span>{</span><span>}</span><span>,</span>
  <span>// 具体检查规则</span>
  <span>rules</span><span>:</span> <span>{</span><span>}</span><span>,</span>
  <span>// 继承其他规则</span>
  <span>extends</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>// ...</span>
  <span>// 其他规则详见：https://eslint.bootcss.com/docs/user-guide/configuring</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol>
<li>parserOptions 解析选项</li>
</ol>
<div><pre><code><span>parserOptions</span><span>:</span> <span>{</span>
  <span>ecmaVersion</span><span>:</span> <span>6</span><span>,</span> <span>// ES 语法版本</span>
  <span>sourceType</span><span>:</span> <span>"module"</span><span>,</span> <span>// ES 模块化</span>
  <span>ecmaFeatures</span><span>:</span> <span>{</span> <span>// ES 其他特性</span>
    <span>jsx</span><span>:</span> <span>true</span> <span>// 如果是 React 项目，就需要开启 jsx 语法</span>
  <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="2">
<li>rules 具体规则</li>
</ol>
<ul>
<li><code>&quot;off&quot;</code> 或 <code>0</code> - 关闭规则</li>
<li><code>&quot;warn&quot;</code> 或 <code>1</code> - 开启规则，使用警告级别的错误：<code>warn</code> (不会导致程序退出)</li>
<li><code>&quot;error&quot;</code> 或 <code>2</code> - 开启规则，使用错误级别的错误：<code>error</code> (当被触发的时候，程序会退出)</li>
</ul>
<div><pre><code><span>rules</span><span>:</span> <span>{</span>
  <span>semi</span><span>:</span> <span>"error"</span><span>,</span> <span>// 禁止使用分号</span>
  <span>'array-callback-return'</span><span>:</span> <span>'warn'</span><span>,</span> <span>// 强制数组方法的回调函数中有 return 语句，否则警告</span>
  <span>'default-case'</span><span>:</span> <span>[</span>
    <span>'warn'</span><span>,</span> <span>// 要求 switch 语句中有 default 分支，否则警告</span>
    <span>{</span> <span>commentPattern</span><span>:</span> <span>'^no default$'</span> <span>}</span> <span>// 允许在最后注释 no default, 就不会有警告了</span>
  <span>]</span><span>,</span>
  <span>eqeqeq</span><span>:</span> <span>[</span>
    <span>'warn'</span><span>,</span> <span>// 强制使用 === 和 !==，否则警告</span>
    <span>'smart'</span> <span>// https://eslint.bootcss.com/docs/rules/eqeqeq#smart 除了少数情况下不会有警告</span>
  <span>]</span><span>,</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>更多规则详见：<a href="https://eslint.bootcss.com/docs/rules/" target="_blank" rel="noopener noreferrer">规则文档</a></p>
<ol start="3">
<li>extends 继承</li>
</ol>
<p>开发中一点点写 rules 规则太费劲了，所以有更好的办法，继承现有的规则。</p>
<p>现有以下较为有名的规则：</p>
<ul>
<li><a href="https://eslint.bootcss.com/docs/rules/" target="_blank" rel="noopener noreferrer">Eslint 官方的规则</a>：<code>eslint:recommended</code></li>
<li><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/@vue/cli-plugin-eslint" target="_blank" rel="noopener noreferrer">Vue Cli 官方的规则</a>：<code>plugin:vue/essential</code></li>
<li><a href="https://github.com/facebook/create-react-app/tree/main/packages/eslint-config-react-app" target="_blank" rel="noopener noreferrer">React Cli 官方的规则</a>：<code>react-app</code></li>
</ul>
<div><pre><code><span>// 例如在React项目中，我们可以这样写配置</span>
module<span>.</span>exports <span>=</span> <span>{</span>
  <span>extends</span><span>:</span> <span>[</span><span>"react-app"</span><span>]</span><span>,</span>
  <span>rules</span><span>:</span> <span>{</span>
    <span>// 我们的规则会覆盖掉react-app的规则</span>
    <span>// 所以想要修改规则直接改就是了</span>
    <span>eqeqeq</span><span>:</span> <span>[</span><span>"warn"</span><span>,</span> <span>"smart"</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_3-在-webpack-中使用" tabindex="-1"> 3. 在 Webpack 中使用</h3>
<ol>
<li>下载包</li>
</ol>
<div><pre><code>npm i eslint-webpack-plugin eslint -D
</code></pre></div><ol start="2">
<li>定义 Eslint 配置文件</li>
</ol>
<ul>
<li>.eslintrc.js</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 继承 Eslint 规则</span>
  <span>extends</span><span>:</span> <span>[</span><span>"eslint:recommended"</span><span>]</span><span>,</span>
  <span>env</span><span>:</span> <span>{</span>
    <span>node</span><span>:</span> <span>true</span><span>,</span> <span>// 启用node中全局变量</span>
    <span>browser</span><span>:</span> <span>true</span><span>,</span> <span>// 启用浏览器中全局变量</span>
  <span>}</span><span>,</span>
  <span>parserOptions</span><span>:</span> <span>{</span>
    <span>ecmaVersion</span><span>:</span> <span>6</span><span>,</span>
    <span>sourceType</span><span>:</span> <span>"module"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>rules</span><span>:</span> <span>{</span>
    <span>"no-var"</span><span>:</span> <span>2</span><span>,</span> <span>// 不能使用 var 定义变量</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="3">
<li>修改 js 文件代码</li>
</ol>
<ul>
<li>main.js</li>
</ul>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>var</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
<span>var</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol>
<li>配置</li>
</ol>
<ul>
<li>webpack.config.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span> <span>// 自动将上次打包目录资源清空</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="5">
<li>运行指令</li>
</ol>
<div><pre><code>npx webpack
</code></pre></div><p>在控制台查看 Eslint 检查效果</p>
<h3 id="_4-vscode-eslint-插件" tabindex="-1"> 4. VSCode Eslint 插件</h3>
<p>打开 VSCode，下载 Eslint 插件，即可不用编译就能看到错误，可以提前解决</p>
<p>但是此时就会对项目所有文件默认进行 Eslint 检查了，我们 dist 目录下的打包后文件就会报错。但是我们只需要检查 src 下面的文件，不需要检查 dist 下面的文件。</p>
<p>所以可以使用 Eslint 忽略文件解决。在项目根目录新建下面文件:</p>
<ul>
<li><code>.eslintignore</code></li>
</ul>
<div><pre><code># 忽略dist目录下所有文件
dist
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><h2 id="babel" tabindex="-1"> Babel</h2>
<p>JavaScript 编译器。</p>
<p>主要用于将 ES6 语法编写的代码转换为向后兼容的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其他环境中</p>
<h3 id="_1-配置文件-1" tabindex="-1"> 1. 配置文件</h3>
<p>配置文件由很多种写法：</p>
<ul>
<li><code>babel.config.*</code>：新建文件，位于项目根目录
<ul>
<li><code>babel.config.js</code></li>
<li><code>babel.config.json</code></li>
</ul>
</li>
<li><code>.babelrc.*</code>：新建文件，位于项目根目录
<ul>
<li><code>.babelrc</code></li>
<li><code>.babelrc.js</code></li>
<li><code>.babelrc.json</code></li>
</ul>
</li>
<li><code>package.json</code> 中 <code>babel</code>：不需要创建文件，在原有文件基础上写</li>
</ul>
<p>Babel 会查找和自动读取它们，所以以上配置文件只需要存在一个即可</p>
<h3 id="_2-具体配置-1" tabindex="-1"> 2. 具体配置</h3>
<p>我们以 <code>babel.config.js</code> 配置文件为例：</p>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 预设</span>
  <span>presets</span><span>:</span> <span>[</span><span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><ol>
<li>presets 预设</li>
</ol>
<p>简单理解：就是一组 Babel 插件, 扩展 Babel 功能</p>
<ul>
<li><code>@babel/preset-env</code>: 一个智能预设，允许您使用最新的 JavaScript。</li>
<li><code>@babel/preset-react</code>：一个用来编译 React jsx 语法的预设</li>
<li><code>@babel/preset-typescript</code>：一个用来编译 TypeScript 语法的预设</li>
</ul>
<h3 id="_3-在-webpack-中使用-1" tabindex="-1"> 3. 在 Webpack 中使用</h3>
<ol>
<li>下载包</li>
</ol>
<div><pre><code>npm i babel-loader @babel/core @babel/preset-env -D
</code></pre></div><ol start="2">
<li>定义 Babel 配置文件</li>
</ol>
<ul>
<li>babel.config.js</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>presets</span><span>:</span> <span>[</span><span>"@babel/preset-env"</span><span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><ol start="3">
<li>修改 js 文件代码</li>
</ol>
<ul>
<li>main.js</li>
</ul>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>const</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
<span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="4">
<li>配置</li>
</ol>
<ul>
<li>webpack.config.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span> <span>// 自动将上次打包目录资源清空</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="5">
<li>运行指令</li>
</ol>
<div><pre><code>npx webpack
</code></pre></div><p>打开打包后的 <code>dist/static/js/main.js</code> 文件查看，会发现箭头函数等 ES6 语法已经转换了</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">HTML压缩</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/minifyHtml.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/minifyHtml.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>默认生产模式已经开启了：html 压缩和 js 压缩</p>
<p>不需要额外进行配置</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">Css处理</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/optimizeCss.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/optimizeCss.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="提取-css-成单独文件" tabindex="-1"> 提取 Css 成单独文件</h2>
<p>Css 文件目前被打包到 js 文件中，当 js 文件加载时，会创建一个 style 标签来生成样式</p>
<p>这样对于网站来说，会出现闪屏现象，用户体验不好</p>
<p>我们应该是单独的 Css 文件，通过 link 标签加载性能才好</p>
<h3 id="_1-下载包" tabindex="-1"> 1. 下载包</h3>
<div><pre><code>npm i mini-css-extract-plugin -D
</code></pre></div><h3 id="_2-配置" tabindex="-1"> 2. 配置</h3>
<ul>
<li>webpack.prod.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span>MiniCssExtractPlugin<span>.</span>loader<span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span>MiniCssExtractPlugin<span>.</span>loader<span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span>MiniCssExtractPlugin<span>.</span>loader<span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span>MiniCssExtractPlugin<span>.</span>loader<span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/main.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><div>&nbsp;</div><br><br><br><div>&nbsp;</div><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_3-运行指令" tabindex="-1"> 3. 运行指令</h3>
<div><pre><code>npm run build
</code></pre></div><h2 id="css-兼容性处理" tabindex="-1"> Css 兼容性处理</h2>
<h3 id="_1-下载包-1" tabindex="-1"> 1. 下载包</h3>
<div><pre><code>npm i postcss-loader postcss postcss-preset-env -D
</code></pre></div><h3 id="_2-配置-1" tabindex="-1"> 2. 配置</h3>
<ul>
<li>webpack.prod.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span>
          MiniCssExtractPlugin<span>.</span>loader<span>,</span>
          <span>"css-loader"</span><span>,</span>
          <span>{</span>
            <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>postcssOptions</span><span>:</span> <span>{</span>
                <span>plugins</span><span>:</span> <span>[</span>
                  <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
                <span>]</span><span>,</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span>
          MiniCssExtractPlugin<span>.</span>loader<span>,</span>
          <span>"css-loader"</span><span>,</span>
          <span>{</span>
            <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>postcssOptions</span><span>:</span> <span>{</span>
                <span>plugins</span><span>:</span> <span>[</span>
                  <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
                <span>]</span><span>,</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>"less-loader"</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span>
          MiniCssExtractPlugin<span>.</span>loader<span>,</span>
          <span>"css-loader"</span><span>,</span>
          <span>{</span>
            <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>postcssOptions</span><span>:</span> <span>{</span>
                <span>plugins</span><span>:</span> <span>[</span>
                  <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
                <span>]</span><span>,</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>"sass-loader"</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span>
          MiniCssExtractPlugin<span>.</span>loader<span>,</span>
          <span>"css-loader"</span><span>,</span>
          <span>{</span>
            <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>postcssOptions</span><span>:</span> <span>{</span>
                <span>plugins</span><span>:</span> <span>[</span>
                  <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
                <span>]</span><span>,</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>"stylus-loader"</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/main.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_3-控制兼容性" tabindex="-1"> 3. 控制兼容性</h3>
<p>我们可以在 <code>package.json</code> 文件中添加 <code>browserslist</code> 来控制样式的兼容性做到什么程度。</p>
<div><pre><code><span>{</span>
  <span>// 其他省略</span>
  <span>"browserslist"</span><span>:</span> <span>[</span><span>"ie >= 8"</span><span>]</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><p>想要知道更多的 <code>browserslist</code> 配置，查看<a href="https://github.com/browserslist/browserslist" target="_blank" rel="noopener noreferrer">browserslist 文档</a></p>
<p>以上为了测试兼容性所以设置兼容浏览器 ie8 以上。</p>
<p>实际开发中我们一般不考虑旧版本浏览器了，所以我们可以这样设置：</p>
<div><pre><code><span>{</span>
  <span>// 其他省略</span>
  <span>"browserslist"</span><span>:</span> <span>[</span><span>"last 2 version"</span><span>,</span> <span>"> 1%"</span><span>,</span> <span>"not dead"</span><span>]</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><h3 id="_4-合并配置" tabindex="-1"> 4. 合并配置</h3>
<ul>
<li>webpack.prod.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/main.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><div>&nbsp;</div><br><br><br><div>&nbsp;</div><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_5-运行指令" tabindex="-1"> 5. 运行指令</h3>
<div><pre><code>npm run build
</code></pre></div><h2 id="css-压缩" tabindex="-1"> Css 压缩</h2>
<h3 id="_1-下载包-2" tabindex="-1"> 1. 下载包</h3>
<div><pre><code>npm i css-minimizer-webpack-plugin -D
</code></pre></div><h3 id="_2-配置-2" tabindex="-1"> 2. 配置</h3>
<ul>
<li>webpack.prod.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/main.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_3-运行指令-1" tabindex="-1"> 3. 运行指令</h3>
<div><pre><code>npm run build
</code></pre></div>]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">处理其他资源</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/other.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/other.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>开发中可能还存在一些其他资源，如音视频等，我们也一起处理了</p>
<h2 id="_1-配置" tabindex="-1"> 1. 配置</h2>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span> <span>// 自动将上次打包目录资源清空</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?|map4|map3|avi)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>就是在处理字体图标资源基础上增加其他文件类型，统一处理即可</p>
<h2 id="_2-运行指令" tabindex="-1"> 2. 运行指令</h2>
<div><pre><code>npx webpack
</code></pre></div><p>打开 index.html 页面查看效果</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">修改输出资源的名称和路径</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/output.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/output.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="_1-配置" tabindex="-1"> 1. 配置</h2>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_2-修改-index-html" tabindex="-1"> 2. 修改 index.html</h2>
<div><pre><code><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>html</span> <span>lang</span><span><span>=</span><span>"</span>en<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>head</span><span>></span></span>
    <span><span><span>&lt;</span>meta</span> <span>charset</span><span><span>=</span><span>"</span>UTF-8<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>http-equiv</span><span><span>=</span><span>"</span>X-UA-Compatible<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>IE=edge<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>"</span>viewport<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>width=device-width, initial-scale=1.0<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>title</span><span>></span></span>webpack5<span><span><span>&lt;/</span>title</span><span>></span></span>
  <span><span><span>&lt;/</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>body</span><span>></span></span>
    <span><span><span>&lt;</span>h1</span><span>></span></span>Hello Webpack5<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box1<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box2<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box3<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box4<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>box5<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>div</span><span>></span></span>
    <span>&lt;!-- 修改 js 资源路径 --></span>
    <span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>../dist/static/js/main.js<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
  <span><span><span>&lt;/</span>body</span><span>></span></span>
<span><span><span>&lt;/</span>html</span><span>></span></span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_3-运行指令" tabindex="-1"> 3. 运行指令</h2>
<div><pre><code>npx webpack
</code></pre></div><ul>
<li>此时输出文件目录：</li>
</ul>
<p>（注意：需要将上次打包生成的文件清空，再重新打包才有效果）</p>
<div><pre><code>├── dist
    └── static
         ├── imgs
         │    └── 7003350e.png
         └── js
              └── main.js
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">生产模式介绍</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/production.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/production.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>生产模式是开发完成代码后，我们需要得到代码将来部署上线。</p>
<p>这个模式下我们主要对代码进行优化，让其运行性能更好。</p>
<p>优化主要从两个角度出发:</p>
<ol>
<li>优化代码运行性能</li>
<li>优化代码打包速度</li>
</ol>
<h2 id="生产模式准备" tabindex="-1"> 生产模式准备</h2>
<p>我们分别准备两个配置文件来放不同的配置</p>
<h3 id="_1-文件目录" tabindex="-1"> 1. 文件目录</h3>
<div><pre><code>├── webpack-test (项目根目录)
    ├── config (Webpack配置文件目录)
    │    ├── webpack.dev.js(开发模式配置文件)
    │    └── webpack.prod.js(生产模式配置文件)
    ├── node_modules (下载包存放目录)
    ├── src (项目源码目录，除了html其他都在src里面)
    │    └── 略
    ├── public (项目html文件)
    │    └── index.html
    ├── .eslintrc.js(Eslint配置文件)
    ├── babel.config.js(Babel配置文件)
    └── package.json (包的依赖管理配置文件)
</code></pre></div><h3 id="_2-修改-webpack-dev-js" tabindex="-1"> 2. 修改 webpack.dev.js</h3>
<p>因为文件目录变了，所以所有绝对路径需要回退一层目录才能找到对应的文件</p>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> <span>undefined</span><span>,</span> <span>// 开发模式没有输出，不需要指定输出目录</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>// clean: true, // 开发模式没有输出，不需要清空输出结果</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// 其他省略</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span> <span>// 启动服务器域名</span>
    <span>port</span><span>:</span> <span>"3000"</span><span>,</span> <span>// 启动服务器端口号</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span> <span>// 是否自动打开浏览器</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><div>&nbsp;</div><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>运行开发模式的指令：</p>
<div><pre><code>npx webpack serve --config ./config/webpack.dev.js
</code></pre></div><h3 id="_3-修改-webpack-prod-js" tabindex="-1"> 3. 修改 webpack.prod.js</h3>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>运行生产模式的指令：</p>
<div><pre><code>npx webpack --config ./config/webpack.prod.js
</code></pre></div><h3 id="_4-配置运行指令" tabindex="-1"> 4. 配置运行指令</h3>
<p>为了方便运行不同模式的指令，我们将指令定义在 package.json 中 scripts 里面</p>
<div><pre><code><span>// package.json</span>
<span>{</span>
  <span>// 其他省略</span>
  <span>"scripts"</span><span>:</span> <span>{</span>
    <span>"start"</span><span>:</span> <span>"npm run dev"</span><span>,</span>
    <span>"dev"</span><span>:</span> <span>"npx webpack serve --config ./config/webpack.dev.js"</span><span>,</span>
    <span>"build"</span><span>:</span> <span>"npx webpack --config ./config/webpack.prod.js"</span>
  <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>以后启动指令：</p>
<ul>
<li>开发模式：<code>npm start</code> 或 <code>npm run dev</code></li>
<li>生产模式：<code>npm run build</code></li>
</ul>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">开发服务器&amp;自动化</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/server.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/server.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>每次写完代码都需要手动输入指令才能编译代码，太麻烦了，我们希望一切自动化</p>
<h2 id="_1-下载包" tabindex="-1"> 1. 下载包</h2>
<div><pre><code>npm i webpack-dev-server -D
</code></pre></div><h2 id="_2-配置" tabindex="-1"> 2. 配置</h2>
<ul>
<li>webpack.config.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span> <span>// 自动将上次打包目录资源清空</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>// 将图片文件输出到 static/imgs 目录中</span>
          <span>// 将图片文件命名 [hash:8][ext][query]</span>
          <span>// [hash:8]: hash值取8位</span>
          <span>// [ext]: 使用之前的文件扩展名</span>
          <span>// [query]: 添加之前的query参数</span>
          <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
        <span>generator</span><span>:</span> <span>{</span>
          <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
        <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// 开发服务器</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span> <span>// 启动服务器域名</span>
    <span>port</span><span>:</span> <span>"3000"</span><span>,</span> <span>// 启动服务器端口号</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span> <span>// 是否自动打开浏览器</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="_3-运行指令" tabindex="-1"> 3. 运行指令</h2>
<div><pre><code>npx webpack serve
</code></pre></div><p><strong>注意运行指令发生了变化</strong></p>
<p>并且当你使用开发服务器时，所有代码都会在内存中编译打包，并不会输出到 dist 目录下。</p>
<p>开发时我们只关心代码能运行，有效果即可，至于代码被编译成什么样子，我们并不需要知道。</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">总结</title>
    <id>https://github.com/MisterChen9527/note/webpack/base/summary.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/base/summary.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>本章节我们学会了 Webpack 基本使用，掌握了以下功能：</p>
<ol>
<li>两种开发模式</li>
</ol>
<ul>
<li>开发模式：代码能编译自动化运行</li>
<li>生产模式：代码编译优化输出</li>
</ul>
<ol start="2">
<li>Webpack 基本功能</li>
</ol>
<ul>
<li>开发模式：可以编译 ES Module 语法</li>
<li>生产模式：可以编译 ES Module 语法，压缩 js 代码</li>
</ul>
<ol start="3">
<li>Webpack 配置文件</li>
</ol>
<ul>
<li>5 个核心概念
<ul>
<li>entry</li>
<li>output</li>
<li>loader</li>
<li>plugins</li>
<li>mode</li>
</ul>
</li>
<li>devServer 配置</li>
</ul>
<ol start="4">
<li>Webpack 脚本指令用法</li>
</ol>
<ul>
<li><code>webpack</code> 直接打包输出</li>
<li><code>webpack serve</code> 启动开发服务器，内存编译打包没有输出</li>
</ul>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">原理解析</title>
    <id>https://github.com/MisterChen9527/note/webpack/origin/</id>
    <link href="https://github.com/MisterChen9527/note/webpack/origin/"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>本章节我们主要学习：</p>
<ul>
<li>loader 原理</li>
<li>自定义常用 loader</li>
<li>plugin 原理</li>
<li>自定义常用 plugin</li>
</ul>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">Loader 原理</title>
    <id>https://github.com/MisterChen9527/note/webpack/origin/loader.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/origin/loader.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="loader-概念" tabindex="-1"> loader 概念</h2>
<p>帮助 webpack 将不同类型的文件转换为 webpack 可识别的模块。</p>
<h2 id="loader-执行顺序" tabindex="-1"> loader 执行顺序</h2>
<ol>
<li>分类</li>
</ol>
<ul>
<li>pre： 前置 loader</li>
<li>normal： 普通 loader</li>
<li>inline： 内联 loader</li>
<li>post： 后置 loader</li>
</ul>
<ol start="2">
<li>执行顺序</li>
</ol>
<ul>
<li>4 类 loader 的执行优级为：<code>pre &gt; normal &gt; inline &gt; post</code> 。</li>
<li>相同优先级的 loader 执行顺序为：<code>从右到左，从下到上</code>。</li>
</ul>
<p>例如：</p>
<div><pre><code><span>// 此时loader执行顺序：loader3 - loader2 - loader1</span>
<span>module</span><span>:</span> <span>{</span>
  <span>rules</span><span>:</span> <span>[</span>
    <span>{</span>
      <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
      <span>loader</span><span>:</span> <span>"loader1"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>{</span>
      <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
      <span>loader</span><span>:</span> <span>"loader2"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>{</span>
      <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
      <span>loader</span><span>:</span> <span>"loader3"</span><span>,</span>
    <span>}</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>,</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div><pre><code><span>// 此时loader执行顺序：loader1 - loader2 - loader3</span>
<span>module</span><span>:</span> <span>{</span>
  <span>rules</span><span>:</span> <span>[</span>
    <span>{</span>
      <span>enforce</span><span>:</span> <span>"pre"</span><span>,</span>
      <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
      <span>loader</span><span>:</span> <span>"loader1"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>{</span>
      <span>// 没有enforce就是normal</span>
      <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
      <span>loader</span><span>:</span> <span>"loader2"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>{</span>
      <span>enforce</span><span>:</span> <span>"post"</span><span>,</span>
      <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
      <span>loader</span><span>:</span> <span>"loader3"</span><span>,</span>
    <span>}</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>,</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="3">
<li>使用 loader 的方式</li>
</ol>
<ul>
<li>配置方式：在 <code>webpack.config.js</code> 文件中指定 loader。（pre、normal、post loader）</li>
<li>内联方式：在每个 <code>import</code> 语句中显式指定 loader。（inline loader）</li>
</ul>
<ol start="4">
<li>inline loader</li>
</ol>
<p>用法：<code>import Styles from 'style-loader!css-loader?modules!./styles.css';</code></p>
<p>含义：</p>
<ul>
<li>使用 <code>css-loader</code> 和 <code>style-loader</code> 处理 <code>styles.css</code> 文件</li>
<li>通过 <code>!</code> 将资源中的 loader 分开</li>
</ul>
<p><code>inline loader</code> 可以通过添加不同前缀，跳过其他类型 loader。</p>
<ul>
<li><code>!</code> 跳过 normal loader。</li>
</ul>
<p><code>import Styles from '!style-loader!css-loader?modules!./styles.css';</code></p>
<ul>
<li><code>-!</code> 跳过 pre 和 normal loader。</li>
</ul>
<p><code>import Styles from '-!style-loader!css-loader?modules!./styles.css';</code></p>
<ul>
<li><code>!!</code> 跳过 pre、 normal 和 post loader。</li>
</ul>
<p><code>import Styles from '!!style-loader!css-loader?modules!./styles.css';</code></p>
<h2 id="开发一个-loader" tabindex="-1"> 开发一个 loader</h2>
<h3 id="_1-最简单的-loader" tabindex="-1"> 1. 最简单的 loader</h3>
<div><pre><code><span>// loaders/loader1.js</span>
module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>loader1</span><span>(</span><span>content</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"hello loader"</span><span>)</span><span>;</span>
  <span>return</span> content<span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p>它接受要处理的源码作为参数，输出转换后的 js 代码。</p>
<h3 id="_2-loader-接受的参数" tabindex="-1"> 2. loader 接受的参数</h3>
<ul>
<li><code>content</code> 源文件的内容</li>
<li><code>map</code> SourceMap 数据</li>
<li><code>meta</code> 数据，可以是任何内容</li>
</ul>
<h2 id="loader-分类" tabindex="-1"> loader 分类</h2>
<h3 id="_1-同步-loader" tabindex="-1"> 1. 同步 loader</h3>
<div><pre><code>module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>content<span>,</span> map<span>,</span> meta</span><span>)</span> <span>{</span>
  <span>return</span> content<span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p><code>this.callback</code> 方法则更灵活，因为它允许传递多个参数，而不仅仅是 <code>content</code>。</p>
<div><pre><code>module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>content<span>,</span> map<span>,</span> meta</span><span>)</span> <span>{</span>
  <span>// 传递map，让source-map不中断</span>
  <span>// 传递meta，让下一个loader接收到其他参数</span>
  <span>this</span><span>.</span><span>callback</span><span>(</span><span>null</span><span>,</span> content<span>,</span> map<span>,</span> meta<span>)</span><span>;</span>
  <span>return</span><span>;</span> <span>// 当调用 callback() 函数时，总是返回 undefined</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_2-异步-loader" tabindex="-1"> 2. 异步 loader</h3>
<div><pre><code>module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>content<span>,</span> map<span>,</span> meta</span><span>)</span> <span>{</span>
  <span>const</span> callback <span>=</span> <span>this</span><span>.</span><span>async</span><span>(</span><span>)</span><span>;</span>
  <span>// 进行异步操作</span>
  <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
    <span>callback</span><span>(</span><span>null</span><span>,</span> result<span>,</span> map<span>,</span> meta<span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>1000</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><blockquote>
<p>由于同步计算过于耗时，在 Node.js 这样的单线程环境下进行此操作并不是好的方案，我们建议尽可能地使你的 loader 异步化。但如果计算量很小，同步 loader 也是可以的。</p>
</blockquote>
<h3 id="_3-raw-loader" tabindex="-1"> 3. Raw Loader</h3>
<p>默认情况下，资源文件会被转化为 UTF-8 字符串，然后传给 loader。通过设置 raw 为 true，loader 可以接收原始的 Buffer。</p>
<div><pre><code>module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>content</span><span>)</span> <span>{</span>
  <span>// content是一个Buffer数据</span>
  <span>return</span> content<span>;</span>
<span>}</span><span>;</span>
module<span>.</span>exports<span>.</span>raw <span>=</span> <span>true</span><span>;</span> <span>// 开启 Raw Loader</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="_4-pitching-loader" tabindex="-1"> 4. Pitching Loader</h3>
<div><pre><code>module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>content</span><span>)</span> <span>{</span>
  <span>return</span> content<span>;</span>
<span>}</span><span>;</span>
module<span>.</span>exports<span>.</span><span>pitch</span> <span>=</span> <span>function</span> <span>(</span><span>remainingRequest<span>,</span> precedingRequest<span>,</span> data</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"do somethings"</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>webpack 会先从左到右执行 loader 链中的每个 loader 上的 pitch 方法（如果有），然后再从右到左执行 loader 链中的每个 loader 上的普通 loader 方法。</p>
<p><img src="/imgs/source/loader1.png" alt="loader执行流程"></p>
<p>在这个过程中如果任何 pitch 有返回值，则 loader 链被阻断。webpack 会跳过后面所有的的 pitch 和 loader，直接进入上一个 loader 。</p>
<p><img src="/imgs/source/loader2.png" alt="loader执行流程"></p>
<h2 id="loader-api" tabindex="-1"> loader API</h2>
<table>
<thead>
<tr>
<th>方法名</th>
<th>含义</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>this.async</td>
<td>异步回调 loader。返回 this.callback</td>
<td>const callback = this.async()</td>
</tr>
<tr>
<td>this.callback</td>
<td>可以同步或者异步调用的并返回多个结果的函数</td>
<td>this.callback(err, content, sourceMap?, meta?)</td>
</tr>
<tr>
<td>this.getOptions(schema)</td>
<td>获取 loader 的 options</td>
<td>this.getOptions(schema)</td>
</tr>
<tr>
<td>this.emitFile</td>
<td>产生一个文件</td>
<td>this.emitFile(name, content, sourceMap)</td>
</tr>
<tr>
<td>this.utils.contextify</td>
<td>返回一个相对路径</td>
<td>this.utils.contextify(context, request)</td>
</tr>
<tr>
<td>this.utils.absolutify</td>
<td>返回一个绝对路径</td>
<td>this.utils.absolutify(context, request)</td>
</tr>
</tbody>
</table>
<blockquote>
<p>更多文档，请查阅 <a href="https://webpack.docschina.org/api/loaders/#the-loader-context" target="_blank" rel="noopener noreferrer">webpack 官方 loader api 文档</a></p>
</blockquote>
<h2 id="手写-clean-log-loader" tabindex="-1"> 手写 clean-log-loader</h2>
<p>作用：用来清理 js 代码中的<code>console.log</code></p>
<div><pre><code><span>// loaders/clean-log-loader.js</span>
module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>cleanLogLoader</span><span>(</span><span>content</span><span>)</span> <span>{</span>
  <span>// 将console.log替换为空</span>
  <span>return</span> content<span>.</span><span>replace</span><span>(</span><span><span>/</span><span>console\.log\(.*\);?</span><span>/</span><span>g</span></span><span>,</span> <span>""</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="手写-banner-loader" tabindex="-1"> 手写 banner-loader</h2>
<p>作用：给 js 代码添加文本注释</p>
<ul>
<li>loaders/banner-loader/index.js</li>
</ul>
<div><pre><code><span>const</span> schema <span>=</span> <span>require</span><span>(</span><span>"./schema.json"</span><span>)</span><span>;</span>

module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>content</span><span>)</span> <span>{</span>
  <span>// 获取loader的options，同时对options内容进行校验</span>
  <span>// schema是options的校验规则（符合 JSON schema 规则）</span>
  <span>const</span> options <span>=</span> <span>this</span><span>.</span><span>getOptions</span><span>(</span>schema<span>)</span><span>;</span>

  <span>const</span> prefix <span>=</span> <span><span>`</span><span>
    /*
    * Author: </span><span><span>${</span>options<span>.</span>author<span>}</span></span><span>
    */
  </span><span>`</span></span><span>;</span>

  <span>return</span> <span><span>`</span><span><span>${</span>prefix<span>}</span></span><span> \n </span><span><span>${</span>content<span>}</span></span><span>`</span></span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>loaders/banner-loader/schema.json</li>
</ul>
<div><pre><code><span>{</span>
  <span>"type"</span><span>:</span> <span>"object"</span><span>,</span>
  <span>"properties"</span><span>:</span> <span>{</span>
    <span>"author"</span><span>:</span> <span>{</span>
      <span>"type"</span><span>:</span> <span>"string"</span>
    <span>}</span>
  <span>}</span><span>,</span>
  <span>"additionalProperties"</span><span>:</span> <span>false</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="手写-babel-loader" tabindex="-1"> 手写 babel-loader</h2>
<p>作用：编译 js 代码，将 ES6+语法编译成 ES5-语法。</p>
<ul>
<li>下载依赖</li>
</ul>
<div><pre><code>npm i @babel/core @babel/preset-env -D
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>loaders/babel-loader/index.js</li>
</ul>
<div><pre><code><span>const</span> schema <span>=</span> <span>require</span><span>(</span><span>"./schema.json"</span><span>)</span><span>;</span>
<span>const</span> babel <span>=</span> <span>require</span><span>(</span><span>"@babel/core"</span><span>)</span><span>;</span>

module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>content</span><span>)</span> <span>{</span>
  <span>const</span> options <span>=</span> <span>this</span><span>.</span><span>getOptions</span><span>(</span>schema<span>)</span><span>;</span>
  <span>// 使用异步loader</span>
  <span>const</span> callback <span>=</span> <span>this</span><span>.</span><span>async</span><span>(</span><span>)</span><span>;</span>
  <span>// 使用babel对js代码进行编译</span>
  babel<span>.</span><span>transform</span><span>(</span>content<span>,</span> options<span>,</span> <span>function</span> <span>(</span><span>err<span>,</span> result</span><span>)</span> <span>{</span>
    <span>callback</span><span>(</span>err<span>,</span> result<span>.</span>code<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>loaders/banner-loader/schema.json</li>
</ul>
<div><pre><code><span>{</span>
  <span>"type"</span><span>:</span> <span>"object"</span><span>,</span>
  <span>"properties"</span><span>:</span> <span>{</span>
    <span>"presets"</span><span>:</span> <span>{</span>
      <span>"type"</span><span>:</span> <span>"array"</span>
    <span>}</span>
  <span>}</span><span>,</span>
  <span>"additionalProperties"</span><span>:</span> <span>true</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="手写-file-loader" tabindex="-1"> 手写 file-loader</h2>
<p>作用：将文件原封不动输出出去</p>
<ul>
<li>下载包</li>
</ul>
<div><pre><code>npm i loader-utils -D
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>loaders/file-loader.js</li>
</ul>
<div><pre><code><span>const</span> loaderUtils <span>=</span> <span>require</span><span>(</span><span>"loader-utils"</span><span>)</span><span>;</span>

<span>function</span> <span>fileLoader</span><span>(</span><span>content</span><span>)</span> <span>{</span>
  <span>// 根据文件内容生产一个新的文件名称</span>
  <span>const</span> filename <span>=</span> loaderUtils<span>.</span><span>interpolateName</span><span>(</span><span>this</span><span>,</span> <span>"[hash].[ext]"</span><span>,</span> <span>{</span>
    content<span>,</span>
  <span>}</span><span>)</span><span>;</span>
  <span>// 输出文件</span>
  <span>this</span><span>.</span><span>emitFile</span><span>(</span>filename<span>,</span> content<span>)</span><span>;</span>
  <span>// 暴露出去，给js引用。</span>
  <span>// 记得加上''</span>
  <span>return</span> <span><span>`</span><span>export default '</span><span><span>${</span>filename<span>}</span></span><span>'</span><span>`</span></span><span>;</span>
<span>}</span>

<span>// loader 解决的是二进制的内容</span>
<span>// 图片是 Buffer 数据</span>
fileLoader<span>.</span>raw <span>=</span> <span>true</span><span>;</span>

module<span>.</span>exports <span>=</span> fileLoader<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>loader 配置</li>
</ul>
<div><pre><code><span>{</span>
  <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif)$</span><span>/</span></span><span>,</span>
  <span>loader</span><span>:</span> <span>"./loaders/file-loader.js"</span><span>,</span>
  <span>type</span><span>:</span> <span>"javascript/auto"</span><span>,</span> <span>// 解决图片重复打包问题</span>
<span>}</span><span>,</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="手写-style-loader" tabindex="-1"> 手写 style-loader</h2>
<p>作用：动态创建 style 标签，插入 js 中的样式代码，使样式生效。</p>
<ul>
<li>loaders/style-loader.js</li>
</ul>
<div><pre><code><span>const</span> <span>styleLoader</span> <span>=</span> <span>(</span><span>)</span> <span>=></span> <span>{</span><span>}</span><span>;</span>

styleLoader<span>.</span><span>pitch</span> <span>=</span> <span>function</span> <span>(</span><span>remainingRequest</span><span>)</span> <span>{</span>
  <span>/*
    remainingRequest: C:\Users\86176\Desktop\source\node_modules\css-loader\dist\cjs.js!C:\Users\86176\Desktop\source\src\css\index.css
      这里是inline loader用法，代表后面还有一个css-loader等待处理

    最终我们需要将remainingRequest中的路径转化成相对路径，webpack才能处理
      希望得到：../../node_modules/css-loader/dist/cjs.js!./index.css

    所以：需要将绝对路径转化成相对路径
    要求：
      1. 必须是相对路径
      2. 相对路径必须以 ./ 或 ../ 开头
      3. 相对路径的路径分隔符必须是 / ，不能是 \
  */</span>
  <span>const</span> relativeRequest <span>=</span> remainingRequest
    <span>.</span><span>split</span><span>(</span><span>"!"</span><span>)</span>
    <span>.</span><span>map</span><span>(</span><span>(</span><span>part</span><span>)</span> <span>=></span> <span>{</span>
      <span>// 将路径转化为相对路径</span>
      <span>const</span> relativePath <span>=</span> <span>this</span><span>.</span>utils<span>.</span><span>contextify</span><span>(</span><span>this</span><span>.</span>context<span>,</span> part<span>)</span><span>;</span>
      <span>return</span> relativePath<span>;</span>
    <span>}</span><span>)</span>
    <span>.</span><span>join</span><span>(</span><span>"!"</span><span>)</span><span>;</span>

  <span>/*
    !!${relativeRequest} 
      relativeRequest：../../node_modules/css-loader/dist/cjs.js!./index.css
      relativeRequest是inline loader用法，代表要处理的index.css资源, 使用css-loader处理
      !!代表禁用所有配置的loader，只使用inline loader。（也就是外面我们style-loader和css-loader）,它们被禁用了，只是用我们指定的inline loader，也就是css-loader

    import style from "!!${relativeRequest}"
      引入css-loader处理后的css文件
      为什么需要css-loader处理css文件，不是我们直接读取css文件使用呢？
      因为可能存在@import导入css语法，这些语法就要通过css-loader解析才能变成一个css文件，否则我们引入的css资源会缺少
    const styleEl = document.createElement('style')
      动态创建style标签
    styleEl.innerHTML = style
      将style标签内容设置为处理后的css代码
    document.head.appendChild(styleEl)
      添加到head中生效
  */</span>
  <span>const</span> script <span>=</span> <span><span>`</span><span>
    import style from "!!</span><span><span>${</span>relativeRequest<span>}</span></span><span>"
    const styleEl = document.createElement('style')
    styleEl.innerHTML = style
    document.head.appendChild(styleEl)
  </span><span>`</span></span><span>;</span>

  <span>// style-loader是第一个loader, 由于return导致熔断，所以其他loader不执行了（不管是normal还是pitch）</span>
  <span>return</span> script<span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> styleLoader<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">Plugin 原理</title>
    <id>https://github.com/MisterChen9527/note/webpack/origin/plugin.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/origin/plugin.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="plugin-的作用" tabindex="-1"> Plugin 的作用</h2>
<p>通过插件我们可以扩展 webpack，加入自定义的构建行为，使 webpack 可以执行更广泛的任务，拥有更强的构建能力。</p>
<h2 id="plugin-工作原理" tabindex="-1"> Plugin 工作原理</h2>
<blockquote>
<p>webpack 就像一条生产线，要经过一系列处理流程后才能将源文件转换成输出结果。 这条生产线上的每个处理流程的职责都是单一的，多个流程之间有存在依赖关系，只有完成当前处理后才能交给下一个流程去处理。
插件就像是一个插入到生产线中的一个功能，在特定的时机对生产线上的资源做处理。webpack 通过 Tapable 来组织这条复杂的生产线。 webpack 在运行过程中会广播事件，插件只需要监听它所关心的事件，就能加入到这条生产线中，去改变生产线的运作。
webpack 的事件流机制保证了插件的有序性，使得整个系统扩展性很好。
——「深入浅出 Webpack」</p>
</blockquote>
<p>站在代码逻辑的角度就是：webpack 在编译代码过程中，会触发一系列 <code>Tapable</code> 钩子事件，插件所做的，就是找到相应的钩子，往上面挂上自己的任务，也就是注册事件，这样，当 webpack 构建的时候，插件注册的事件就会随着钩子的触发而执行了。</p>
<h2 id="webpack-内部的钩子" tabindex="-1"> Webpack 内部的钩子</h2>
<h3 id="什么是钩子" tabindex="-1"> 什么是钩子</h3>
<p>钩子的本质就是：事件。为了方便我们直接介入和控制编译过程，webpack 把编译过程中触发的各类关键事件封装成事件接口暴露了出来。这些接口被很形象地称做：<code>hooks</code>（钩子）。开发插件，离不开这些钩子。</p>
<h3 id="tapable" tabindex="-1"> Tapable</h3>
<p><code>Tapable</code> 为 webpack 提供了统一的插件接口（钩子）类型定义，它是 webpack 的核心功能库。webpack 中目前有十种 <code>hooks</code>，在 <code>Tapable</code> 源码中可以看到，他们是：</p>
<div><pre><code><span>// https://github.com/webpack/tapable/blob/master/lib/index.js</span>
exports<span>.</span>SyncHook <span>=</span> <span>require</span><span>(</span><span>"./SyncHook"</span><span>)</span><span>;</span>
exports<span>.</span>SyncBailHook <span>=</span> <span>require</span><span>(</span><span>"./SyncBailHook"</span><span>)</span><span>;</span>
exports<span>.</span>SyncWaterfallHook <span>=</span> <span>require</span><span>(</span><span>"./SyncWaterfallHook"</span><span>)</span><span>;</span>
exports<span>.</span>SyncLoopHook <span>=</span> <span>require</span><span>(</span><span>"./SyncLoopHook"</span><span>)</span><span>;</span>
exports<span>.</span>AsyncParallelHook <span>=</span> <span>require</span><span>(</span><span>"./AsyncParallelHook"</span><span>)</span><span>;</span>
exports<span>.</span>AsyncParallelBailHook <span>=</span> <span>require</span><span>(</span><span>"./AsyncParallelBailHook"</span><span>)</span><span>;</span>
exports<span>.</span>AsyncSeriesHook <span>=</span> <span>require</span><span>(</span><span>"./AsyncSeriesHook"</span><span>)</span><span>;</span>
exports<span>.</span>AsyncSeriesBailHook <span>=</span> <span>require</span><span>(</span><span>"./AsyncSeriesBailHook"</span><span>)</span><span>;</span>
exports<span>.</span>AsyncSeriesLoopHook <span>=</span> <span>require</span><span>(</span><span>"./AsyncSeriesLoopHook"</span><span>)</span><span>;</span>
exports<span>.</span>AsyncSeriesWaterfallHook <span>=</span> <span>require</span><span>(</span><span>"./AsyncSeriesWaterfallHook"</span><span>)</span><span>;</span>
exports<span>.</span>HookMap <span>=</span> <span>require</span><span>(</span><span>"./HookMap"</span><span>)</span><span>;</span>
exports<span>.</span>MultiHook <span>=</span> <span>require</span><span>(</span><span>"./MultiHook"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p><code>Tapable</code> 还统一暴露了三个方法给插件，用于注入不同类型的自定义构建行为：</p>
<ul>
<li><code>tap</code>：可以注册同步钩子和异步钩子。</li>
<li><code>tapAsync</code>：回调方式注册异步钩子。</li>
<li><code>tapPromise</code>：Promise 方式注册异步钩子。</li>
</ul>
<h2 id="plugin-构建对象" tabindex="-1"> Plugin 构建对象</h2>
<h3 id="compiler" tabindex="-1"> Compiler</h3>
<p>compiler 对象中保存着完整的 Webpack 环境配置，每次启动 webpack 构建时它都是一个独一无二，仅仅会创建一次的对象。</p>
<p>这个对象会在首次启动 Webpack 时创建，我们可以通过 compiler 对象上访问到 Webapck 的主环境配置，比如 loader 、 plugin 等等配置信息。</p>
<p>它有以下主要属性：</p>
<ul>
<li><code>compiler.options</code> 可以访问本次启动 webpack 时候所有的配置文件，包括但不限于 loaders 、 entry 、 output 、 plugin 等等完整配置信息。</li>
<li><code>compiler.inputFileSystem</code> 和 <code>compiler.outputFileSystem</code> 可以进行文件操作，相当于 Nodejs 中 fs。</li>
<li><code>compiler.hooks</code> 可以注册 tapable 的不同种类 Hook，从而可以在 compiler 生命周期中植入不同的逻辑。</li>
</ul>
<blockquote>
<p><a href="https://webpack.docschina.org/api/compiler-hooks/" target="_blank" rel="noopener noreferrer">compiler hooks 文档</a></p>
</blockquote>
<h3 id="compilation" tabindex="-1"> Compilation</h3>
<p>compilation 对象代表一次资源的构建，compilation 实例能够访问所有的模块和它们的依赖。</p>
<p>一个 compilation 对象会对构建依赖图中所有模块，进行编译。 在编译阶段，模块会被加载(load)、封存(seal)、优化(optimize)、 分块(chunk)、哈希(hash)和重新创建(restore)。</p>
<p>它有以下主要属性：</p>
<ul>
<li><code>compilation.modules</code> 可以访问所有模块，打包的每一个文件都是一个模块。</li>
<li><code>compilation.chunks</code> chunk 即是多个 modules 组成而来的一个代码块。入口文件引入的资源组成一个 chunk，通过代码分割的模块又是另外的 chunk。</li>
<li><code>compilation.assets</code> 可以访问本次打包生成所有文件的结果。</li>
<li><code>compilation.hooks</code> 可以注册 tapable 的不同种类 Hook，用于在 compilation 编译模块阶段进行逻辑添加以及修改。</li>
</ul>
<blockquote>
<p><a href="https://webpack.docschina.org/api/compilation-hooks/" target="_blank" rel="noopener noreferrer">compilation hooks 文档</a></p>
</blockquote>
<h3 id="生命周期简图" tabindex="-1"> 生命周期简图</h3>
<p><img src="/imgs/source/plugin.jpg" alt="Webpack 插件生命周期"></p>
<h2 id="开发一个插件" tabindex="-1"> 开发一个插件</h2>
<h3 id="最简单的插件" tabindex="-1"> 最简单的插件</h3>
<ul>
<li>plugins/test-plugin.js</li>
</ul>
<div><pre><code><span>class</span> <span>TestPlugin</span> <span>{</span>
  <span>constructor</span><span>(</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"TestPlugin constructor()"</span><span>)</span><span>;</span>
  <span>}</span>
  <span>// 1. webpack读取配置时，new TestPlugin() ，会执行插件 constructor 方法</span>
  <span>// 2. webpack创建 compiler 对象</span>
  <span>// 3. 遍历所有插件，调用插件的 apply 方法</span>
  <span>apply</span><span>(</span><span>compiler</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"TestPlugin apply()"</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span>

module<span>.</span>exports <span>=</span> TestPlugin<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="注册-hook" tabindex="-1"> 注册 hook</h3>
<div><pre><code><span>class</span> <span>TestPlugin</span> <span>{</span>
  <span>constructor</span><span>(</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"TestPlugin constructor()"</span><span>)</span><span>;</span>
  <span>}</span>
  <span>// 1. webpack读取配置时，new TestPlugin() ，会执行插件 constructor 方法</span>
  <span>// 2. webpack创建 compiler 对象</span>
  <span>// 3. 遍历所有插件，调用插件的 apply 方法</span>
  <span>apply</span><span>(</span><span>compiler</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"TestPlugin apply()"</span><span>)</span><span>;</span>

    <span>// 从文档可知, compile hook 是 SyncHook, 也就是同步钩子, 只能用tap注册</span>
    compiler<span>.</span>hooks<span>.</span>compile<span>.</span><span>tap</span><span>(</span><span>"TestPlugin"</span><span>,</span> <span>(</span><span>compilationParams</span><span>)</span> <span>=></span> <span>{</span>
      console<span>.</span><span>log</span><span>(</span><span>"compiler.compile()"</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>

    <span>// 从文档可知, make 是 AsyncParallelHook, 也就是异步并行钩子, 特点就是异步任务同时执行</span>
    <span>// 可以使用 tap、tapAsync、tapPromise 注册。</span>
    <span>// 如果使用tap注册的话，进行异步操作是不会等待异步操作执行完成的。</span>
    compiler<span>.</span>hooks<span>.</span>make<span>.</span><span>tap</span><span>(</span><span>"TestPlugin"</span><span>,</span> <span>(</span><span>compilation</span><span>)</span> <span>=></span> <span>{</span>
      <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"compiler.make() 111"</span><span>)</span><span>;</span>
      <span>}</span><span>,</span> <span>2000</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>

    <span>// 使用tapAsync、tapPromise注册，进行异步操作会等异步操作做完再继续往下执行</span>
    compiler<span>.</span>hooks<span>.</span>make<span>.</span><span>tapAsync</span><span>(</span><span>"TestPlugin"</span><span>,</span> <span>(</span><span>compilation<span>,</span> callback</span><span>)</span> <span>=></span> <span>{</span>
      <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"compiler.make() 222"</span><span>)</span><span>;</span>
        <span>// 必须调用</span>
        <span>callback</span><span>(</span><span>)</span><span>;</span>
      <span>}</span><span>,</span> <span>1000</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>

    compiler<span>.</span>hooks<span>.</span>make<span>.</span><span>tapPromise</span><span>(</span><span>"TestPlugin"</span><span>,</span> <span>(</span><span>compilation</span><span>)</span> <span>=></span> <span>{</span>
      console<span>.</span><span>log</span><span>(</span><span>"compiler.make() 333"</span><span>)</span><span>;</span>
      <span>// 必须返回promise</span>
      <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span><span>resolve</span><span>)</span> <span>=></span> <span>{</span>
        <span>resolve</span><span>(</span><span>)</span><span>;</span>
      <span>}</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>

    <span>// 从文档可知, emit 是 AsyncSeriesHook, 也就是异步串行钩子，特点就是异步任务顺序执行</span>
    compiler<span>.</span>hooks<span>.</span>emit<span>.</span><span>tapAsync</span><span>(</span><span>"TestPlugin"</span><span>,</span> <span>(</span><span>compilation<span>,</span> callback</span><span>)</span> <span>=></span> <span>{</span>
      <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"compiler.emit() 111"</span><span>)</span><span>;</span>
        <span>callback</span><span>(</span><span>)</span><span>;</span>
      <span>}</span><span>,</span> <span>3000</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>

    compiler<span>.</span>hooks<span>.</span>emit<span>.</span><span>tapAsync</span><span>(</span><span>"TestPlugin"</span><span>,</span> <span>(</span><span>compilation<span>,</span> callback</span><span>)</span> <span>=></span> <span>{</span>
      <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"compiler.emit() 222"</span><span>)</span><span>;</span>
        <span>callback</span><span>(</span><span>)</span><span>;</span>
      <span>}</span><span>,</span> <span>2000</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>

    compiler<span>.</span>hooks<span>.</span>emit<span>.</span><span>tapAsync</span><span>(</span><span>"TestPlugin"</span><span>,</span> <span>(</span><span>compilation<span>,</span> callback</span><span>)</span> <span>=></span> <span>{</span>
      <span>setTimeout</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"compiler.emit() 333"</span><span>)</span><span>;</span>
        <span>callback</span><span>(</span><span>)</span><span>;</span>
      <span>}</span><span>,</span> <span>1000</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span>

module<span>.</span>exports <span>=</span> TestPlugin<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="启动调试" tabindex="-1"> 启动调试</h3>
<p>通过调试查看 <code>compiler</code> 和 <code>compilation</code> 对象数据情况。</p>
<ol>
<li>package.json 配置指令</li>
</ol>
<div><pre><code><span>{</span>
  <span>"name"</span><span>:</span> <span>"source"</span><span>,</span>
  <span>"version"</span><span>:</span> <span>"1.0.0"</span><span>,</span>
  <span>"scripts"</span><span>:</span> <span>{</span>
    <span>"debug"</span><span>:</span> <span>"node --inspect-brk ./node_modules/webpack-cli/bin/cli.js"</span>
  <span>}</span><span>,</span>
  <span>"keywords"</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>"author"</span><span>:</span> <span>"xiongjian"</span><span>,</span>
  <span>"license"</span><span>:</span> <span>"ISC"</span><span>,</span>
  <span>"devDependencies"</span><span>:</span> <span>{</span>
    <span>"@babel/core"</span><span>:</span> <span>"^7.17.10"</span><span>,</span>
    <span>"@babel/preset-env"</span><span>:</span> <span>"^7.17.10"</span><span>,</span>
    <span>"css-loader"</span><span>:</span> <span>"^6.7.1"</span><span>,</span>
    <span>"loader-utils"</span><span>:</span> <span>"^3.2.0"</span><span>,</span>
    <span>"webpack"</span><span>:</span> <span>"^5.72.0"</span><span>,</span>
    <span>"webpack-cli"</span><span>:</span> <span>"^4.9.2"</span>
  <span>}</span>
<span>}</span>
</code></pre><div><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="2">
<li>运行指令</li>
</ol>
<div><pre><code>npm run debug
</code></pre><div aria-hidden="true"><div></div></div></div><p>此时控制台输出以下内容：</p>
<div><pre><code>PS C:\Users\86176\Desktop\source> npm run debug

> source@1.0.0 debug
> node --inspect-brk ./node_modules/webpack-cli/bin/cli.js

Debugger listening on ws://127.0.0.1:9229/629ea097-7b52-4011-93a7-02f83c75c797
For help, see: https://nodejs.org/en/docs/inspecto
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="3">
<li>打开 Chrome 浏览器，F12 打开浏览器调试控制台。</li>
</ol>
<p>此时控制台会显示一个绿色的图标</p>
<p><img src="/imgs/source/debug.png" alt="调试控制台"></p>
<ol start="4">
<li>
<p>点击绿色的图标进入调试模式。</p>
</li>
<li>
<p>在需要调试代码处用 <code>debugger</code> 打断点，代码就会停止运行，从而调试查看数据情况。</p>
</li>
</ol>
<h2 id="bannerwebpackplugin" tabindex="-1"> BannerWebpackPlugin</h2>
<ol>
<li>
<p>作用：给打包输出文件添加注释。</p>
</li>
<li>
<p>开发思路:</p>
</li>
</ol>
<ul>
<li>需要打包输出前添加注释：需要使用 <code>compiler.hooks.emit</code> 钩子, 它是打包输出前触发。</li>
<li>如何获取打包输出的资源？<code>compilation.assets</code> 可以获取所有即将输出的资源文件。</li>
</ul>
<ol start="3">
<li>实现：</li>
</ol>
<div><pre><code><span>// plugins/banner-webpack-plugin.js</span>
<span>class</span> <span>BannerWebpackPlugin</span> <span>{</span>
  <span>constructor</span><span>(</span><span>options <span>=</span> <span>{</span><span>}</span></span><span>)</span> <span>{</span>
    <span>this</span><span>.</span>options <span>=</span> options<span>;</span>
  <span>}</span>

  <span>apply</span><span>(</span><span>compiler</span><span>)</span> <span>{</span>
    <span>// 需要处理文件</span>
    <span>const</span> extensions <span>=</span> <span>[</span><span>"js"</span><span>,</span> <span>"css"</span><span>]</span><span>;</span>

    <span>// emit是异步串行钩子</span>
    compiler<span>.</span>hooks<span>.</span>emit<span>.</span><span>tapAsync</span><span>(</span><span>"BannerWebpackPlugin"</span><span>,</span> <span>(</span><span>compilation<span>,</span> callback</span><span>)</span> <span>=></span> <span>{</span>
      <span>// compilation.assets包含所有即将输出的资源</span>
      <span>// 通过过滤只保留需要处理的文件</span>
      <span>const</span> assetPaths <span>=</span> Object<span>.</span><span>keys</span><span>(</span>compilation<span>.</span>assets<span>)</span><span>.</span><span>filter</span><span>(</span><span>(</span><span>path</span><span>)</span> <span>=></span> <span>{</span>
        <span>const</span> splitted <span>=</span> path<span>.</span><span>split</span><span>(</span><span>"."</span><span>)</span><span>;</span>
        <span>return</span> extensions<span>.</span><span>includes</span><span>(</span>splitted<span>[</span>splitted<span>.</span>length <span>-</span> <span>1</span><span>]</span><span>)</span><span>;</span>
      <span>}</span><span>)</span><span>;</span>

      assetPaths<span>.</span><span>forEach</span><span>(</span><span>(</span><span>assetPath</span><span>)</span> <span>=></span> <span>{</span>
        <span>const</span> asset <span>=</span> compilation<span>.</span>assets<span>[</span>assetPath<span>]</span><span>;</span>

        <span>const</span> source <span>=</span> <span><span>`</span><span>/*
* Author: </span><span><span>${</span><span>this</span><span>.</span>options<span>.</span>author<span>}</span></span><span>
*/\n</span><span><span>${</span>asset<span>.</span><span>source</span><span>(</span><span>)</span><span>}</span></span><span>`</span></span><span>;</span>

        <span>// 覆盖资源</span>
        compilation<span>.</span>assets<span>[</span>assetPath<span>]</span> <span>=</span> <span>{</span>
          <span>// 资源内容</span>
          <span>source</span><span>(</span><span>)</span> <span>{</span>
            <span>return</span> source<span>;</span>
          <span>}</span><span>,</span>
          <span>// 资源大小</span>
          <span>size</span><span>(</span><span>)</span> <span>{</span>
            <span>return</span> source<span>.</span>length<span>;</span>
          <span>}</span><span>,</span>
        <span>}</span><span>;</span>
      <span>}</span><span>)</span><span>;</span>

      <span>callback</span><span>(</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span>

module<span>.</span>exports <span>=</span> BannerWebpackPlugin<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="cleanwebpackplugin" tabindex="-1"> CleanWebpackPlugin</h2>
<ol>
<li>
<p>作用：在 webpack 打包输出前将上次打包内容清空。</p>
</li>
<li>
<p>开发思路：</p>
</li>
</ol>
<ul>
<li>如何在打包输出前执行？需要使用 <code>compiler.hooks.emit</code> 钩子, 它是打包输出前触发。</li>
<li>如何清空上次打包内容？
<ul>
<li>获取打包输出目录：通过 compiler 对象。</li>
<li>通过文件操作清空内容：通过 <code>compiler.outputFileSystem</code> 操作文件。</li>
</ul>
</li>
</ul>
<ol start="3">
<li>实现：</li>
</ol>
<div><pre><code><span>// plugins/clean-webpack-plugin.js</span>
<span>class</span> <span>CleanWebpackPlugin</span> <span>{</span>
  <span>apply</span><span>(</span><span>compiler</span><span>)</span> <span>{</span>
    <span>// 获取操作文件的对象</span>
    <span>const</span> fs <span>=</span> compiler<span>.</span>outputFileSystem<span>;</span>
    <span>// emit是异步串行钩子</span>
    compiler<span>.</span>hooks<span>.</span>emit<span>.</span><span>tapAsync</span><span>(</span><span>"CleanWebpackPlugin"</span><span>,</span> <span>(</span><span>compilation<span>,</span> callback</span><span>)</span> <span>=></span> <span>{</span>
      <span>// 获取输出文件目录</span>
      <span>const</span> outputPath <span>=</span> compiler<span>.</span>options<span>.</span>output<span>.</span>path<span>;</span>
      <span>// 删除目录所有文件</span>
      <span>const</span> err <span>=</span> <span>this</span><span>.</span><span>removeFiles</span><span>(</span>fs<span>,</span> outputPath<span>)</span><span>;</span>
      <span>// 执行成功err为undefined，执行失败err就是错误原因</span>
      <span>callback</span><span>(</span>err<span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span>

  <span>removeFiles</span><span>(</span><span>fs<span>,</span> path</span><span>)</span> <span>{</span>
    <span>try</span> <span>{</span>
      <span>// 读取当前目录下所有文件</span>
      <span>const</span> files <span>=</span> fs<span>.</span><span>readdirSync</span><span>(</span>path<span>)</span><span>;</span>

      <span>// 遍历文件，删除</span>
      files<span>.</span><span>forEach</span><span>(</span><span>(</span><span>file</span><span>)</span> <span>=></span> <span>{</span>
        <span>// 获取文件完整路径</span>
        <span>const</span> filePath <span>=</span> <span><span>`</span><span><span>${</span>path<span>}</span></span><span>/</span><span><span>${</span>file<span>}</span></span><span>`</span></span><span>;</span>
        <span>// 分析文件</span>
        <span>const</span> fileStat <span>=</span> fs<span>.</span><span>statSync</span><span>(</span>filePath<span>)</span><span>;</span>
        <span>// 判断是否是文件夹</span>
        <span>if</span> <span>(</span>fileStat<span>.</span><span>isDirectory</span><span>(</span><span>)</span><span>)</span> <span>{</span>
          <span>// 是文件夹需要递归遍历删除下面所有文件</span>
          <span>this</span><span>.</span><span>removeFiles</span><span>(</span>fs<span>,</span> filePath<span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>{</span>
          <span>// 不是文件夹就是文件，直接删除</span>
          fs<span>.</span><span>unlinkSync</span><span>(</span>filePath<span>)</span><span>;</span>
        <span>}</span>
      <span>}</span><span>)</span><span>;</span>

      <span>// 最后删除当前目录</span>
      fs<span>.</span><span>rmdirSync</span><span>(</span>path<span>)</span><span>;</span>
    <span>}</span> <span>catch</span> <span>(</span>e<span>)</span> <span>{</span>
      <span>// 将产生的错误返回出去</span>
      <span>return</span> e<span>;</span>
    <span>}</span>
  <span>}</span>
<span>}</span>

module<span>.</span>exports <span>=</span> CleanWebpackPlugin<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="analyzewebpackplugin" tabindex="-1"> AnalyzeWebpackPlugin</h2>
<ol>
<li>作用：分析 webpack 打包资源大小，并输出分析文件。</li>
<li>开发思路:</li>
</ol>
<ul>
<li>在哪做? <code>compiler.hooks.emit</code>, 它是在打包输出前触发，我们需要分析资源大小同时添加上分析后的 md 文件。</li>
</ul>
<ol start="3">
<li>实现：</li>
</ol>
<div><pre><code><span>// plugins/analyze-webpack-plugin.js</span>
<span>class</span> <span>AnalyzeWebpackPlugin</span> <span>{</span>
  <span>apply</span><span>(</span><span>compiler</span><span>)</span> <span>{</span>
    <span>// emit是异步串行钩子</span>
    compiler<span>.</span>hooks<span>.</span>emit<span>.</span><span>tap</span><span>(</span><span>"AnalyzeWebpackPlugin"</span><span>,</span> <span>(</span><span>compilation</span><span>)</span> <span>=></span> <span>{</span>
      <span>// Object.entries将对象变成二维数组。二维数组中第一项值是key，第二项值是value</span>
      <span>const</span> assets <span>=</span> Object<span>.</span><span>entries</span><span>(</span>compilation<span>.</span>assets<span>)</span><span>;</span>

      <span>let</span> source <span>=</span> <span>"# 分析打包资源大小 \n| 名称 | 大小 |\n| --- | --- |"</span><span>;</span>

      assets<span>.</span><span>forEach</span><span>(</span><span>(</span><span><span>[</span>filename<span>,</span> file<span>]</span></span><span>)</span> <span>=></span> <span>{</span>
        source <span>+=</span> <span><span>`</span><span>\n| </span><span><span>${</span>filename<span>}</span></span><span> | </span><span><span>${</span>file<span>.</span><span>size</span><span>(</span><span>)</span><span>}</span></span><span> |</span><span>`</span></span><span>;</span>
      <span>}</span><span>)</span><span>;</span>

      <span>// 添加资源</span>
      compilation<span>.</span>assets<span>[</span><span>"analyze.md"</span><span>]</span> <span>=</span> <span>{</span>
        <span>source</span><span>(</span><span>)</span> <span>{</span>
          <span>return</span> source<span>;</span>
        <span>}</span><span>,</span>
        <span>size</span><span>(</span><span>)</span> <span>{</span>
          <span>return</span> source<span>.</span>length<span>;</span>
        <span>}</span><span>,</span>
      <span>}</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span>

module<span>.</span>exports <span>=</span> AnalyzeWebpackPlugin<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="inlinechunkwebpackplugin" tabindex="-1"> InlineChunkWebpackPlugin</h2>
<ol>
<li>作用：webpack 打包生成的 runtime 文件太小了，额外发送请求性能不好，所以需要将其内联到 js 中，从而减少请求数量。</li>
<li>开发思路:</li>
</ol>
<ul>
<li>我们需要借助 <code>html-webpack-plugin</code> 来实现
<ul>
<li>在 <code>html-webpack-plugin</code> 输出 index.html 前将内联 runtime 注入进去</li>
<li>删除多余的 runtime 文件</li>
</ul>
</li>
<li>如何操作 <code>html-webpack-plugin</code>？<a href="https://github.com/jantimon/html-webpack-plugin/#afteremit-hook" target="_blank" rel="noopener noreferrer">官方文档</a></li>
</ul>
<ol start="3">
<li>实现：</li>
</ol>
<div><pre><code><span>// plugins/inline-chunk-webpack-plugin.js</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"safe-require"</span><span>)</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

<span>class</span> <span>InlineChunkWebpackPlugin</span> <span>{</span>
  <span>constructor</span><span>(</span><span>tests</span><span>)</span> <span>{</span>
    <span>this</span><span>.</span>tests <span>=</span> tests<span>;</span>
  <span>}</span>

  <span>apply</span><span>(</span><span>compiler</span><span>)</span> <span>{</span>
    compiler<span>.</span>hooks<span>.</span>compilation<span>.</span><span>tap</span><span>(</span><span>"InlineChunkWebpackPlugin"</span><span>,</span> <span>(</span><span>compilation</span><span>)</span> <span>=></span> <span>{</span>
      <span>const</span> hooks <span>=</span> HtmlWebpackPlugin<span>.</span><span>getHooks</span><span>(</span>compilation<span>)</span><span>;</span>

      hooks<span>.</span>alterAssetTagGroups<span>.</span><span>tap</span><span>(</span><span>"InlineChunkWebpackPlugin"</span><span>,</span> <span>(</span><span>assets</span><span>)</span> <span>=></span> <span>{</span>
        assets<span>.</span>headTags <span>=</span> <span>this</span><span>.</span><span>getInlineTag</span><span>(</span>assets<span>.</span>headTags<span>,</span> compilation<span>.</span>assets<span>)</span><span>;</span>
        assets<span>.</span>bodyTags <span>=</span> <span>this</span><span>.</span><span>getInlineTag</span><span>(</span>assets<span>.</span>bodyTags<span>,</span> compilation<span>.</span>assets<span>)</span><span>;</span>
      <span>}</span><span>)</span><span>;</span>

      hooks<span>.</span>afterEmit<span>.</span><span>tap</span><span>(</span><span>"InlineChunkHtmlPlugin"</span><span>,</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
        Object<span>.</span><span>keys</span><span>(</span>compilation<span>.</span>assets<span>)</span><span>.</span><span>forEach</span><span>(</span><span>(</span><span>assetName</span><span>)</span> <span>=></span> <span>{</span>
          <span>if</span> <span>(</span><span>this</span><span>.</span>tests<span>.</span><span>some</span><span>(</span><span>(</span><span>test</span><span>)</span> <span>=></span> assetName<span>.</span><span>match</span><span>(</span>test<span>)</span><span>)</span><span>)</span> <span>{</span>
            <span>delete</span> compilation<span>.</span>assets<span>[</span>assetName<span>]</span><span>;</span>
          <span>}</span>
        <span>}</span><span>)</span><span>;</span>
      <span>}</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span>

  <span>getInlineTag</span><span>(</span><span>tags<span>,</span> assets</span><span>)</span> <span>{</span>
    <span>return</span> tags<span>.</span><span>map</span><span>(</span><span>(</span><span>tag</span><span>)</span> <span>=></span> <span>{</span>
      <span>if</span> <span>(</span>tag<span>.</span>tagName <span>!==</span> <span>"script"</span><span>)</span> <span>return</span> tag<span>;</span>

      <span>const</span> scriptName <span>=</span> tag<span>.</span>attributes<span>.</span>src<span>;</span>

      <span>if</span> <span>(</span><span>!</span><span>this</span><span>.</span>tests<span>.</span><span>some</span><span>(</span><span>(</span><span>test</span><span>)</span> <span>=></span> scriptName<span>.</span><span>match</span><span>(</span>test<span>)</span><span>)</span><span>)</span> <span>return</span> tag<span>;</span>

      <span>return</span> <span>{</span> <span>tagName</span><span>:</span> <span>"script"</span><span>,</span> <span>innerHTML</span><span>:</span> assets<span>[</span>scriptName<span>]</span><span>.</span><span>source</span><span>(</span><span>)</span><span>,</span> <span>closeTag</span><span>:</span> <span>true</span> <span>}</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span>

module<span>.</span>exports <span>=</span> InlineChunkWebpackPlugin<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">总结</title>
    <id>https://github.com/MisterChen9527/note/webpack/origin/summary.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/origin/summary.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>本章节我们学习了 webpack 中的 loader 和 plugin 用法。包括是什么，怎么使用，如何自定义等。</p>
<p>它能够帮助大家提升对 loader 和 plugin 的认识，同时学习到了原理，将来大家也能够在社区中做出贡献。</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">项目配置</title>
    <id>https://github.com/MisterChen9527/note/webpack/project/</id>
    <link href="https://github.com/MisterChen9527/note/webpack/project/"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<div><p>提示</p>
<p>我们将使用前面所学的知识来从零开始搭建 <code>React-Cli</code> 和 <code>Vue-cli</code>。</p>
</div>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">React脚手架</title>
    <id>https://github.com/MisterChen9527/note/webpack/project/react-cli.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/project/react-cli.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="开发模式配置" tabindex="-1"> 开发模式配置</h2>
<div><pre><code><span>// webpack.dev.js</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ReactRefreshWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"@pmmmwh/react-refresh-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> CopyPlugin <span>=</span> <span>require</span><span>(</span><span>"copy-webpack-plugin"</span><span>)</span><span>;</span>

<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    <span>"style-loader"</span><span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> <span>undefined</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].js"</span><span>,</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].chunk.js"</span><span>,</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/js/[hash:10][ext][query]"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(jsx|js)$</span><span>/</span></span><span>,</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
            <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span>
              <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span>
              <span>plugins</span><span>:</span> <span>[</span>
                <span>// "@babel/plugin-transform-runtime", // presets中包含了</span>
                <span>"react-refresh/babel"</span><span>,</span> <span>// 开启js的HMR功能</span>
              <span>]</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>ReactRefreshWebpackPlugin</span><span>(</span><span>)</span><span>,</span> <span>// 解决js的HMR功能运行时全局变量的问题</span>
    <span>// 将public下面的资源复制到dist目录去（除了index.html）</span>
    <span>new</span> <span>CopyPlugin</span><span>(</span><span>{</span>
      <span>patterns</span><span>:</span> <span>[</span>
        <span>{</span>
          <span>from</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public"</span><span>)</span><span>,</span>
          <span>to</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span>
          <span>toType</span><span>:</span> <span>"dir"</span><span>,</span>
          <span>noErrorOnMissing</span><span>:</span> <span>true</span><span>,</span> <span>// 不生成错误</span>
          <span>globOptions</span><span>:</span> <span>{</span>
            <span>// 忽略文件</span>
            <span>ignore</span><span>:</span> <span>[</span><span>"**/index.html"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>info</span><span>:</span> <span>{</span>
            <span>// 跳过terser压缩js</span>
            <span>minimized</span><span>:</span> <span>true</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>resolve</span><span>:</span> <span>{</span>
    <span>extensions</span><span>:</span> <span>[</span><span>".jsx"</span><span>,</span> <span>".js"</span><span>,</span> <span>".json"</span><span>]</span><span>,</span> <span>// 自动补全文件扩展名，让jsx可以使用</span>
  <span>}</span><span>,</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span>
    <span>port</span><span>:</span> <span>3000</span><span>,</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span>
    <span>compress</span><span>:</span> <span>true</span><span>,</span>
    <span>historyApiFallback</span><span>:</span> <span>true</span><span>,</span> <span>// 解决react-router刷新404问题</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="生产模式配置" tabindex="-1"> 生产模式配置</h2>
<div><pre><code><span>// webpack.prod.js</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> CopyPlugin <span>=</span> <span>require</span><span>(</span><span>"copy-webpack-plugin"</span><span>)</span><span>;</span>

<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].[contenthash:10].js"</span><span>,</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].[contenthash:10].chunk.js"</span><span>,</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/js/[hash:10][ext][query]"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(jsx|js)$</span><span>/</span></span><span>,</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
            <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span>
              <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span>
              <span>plugins</span><span>:</span> <span>[</span>
                <span>// "@babel/plugin-transform-runtime" // presets中包含了</span>
              <span>]</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:10].css"</span><span>,</span>
      <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:10].chunk.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 将public下面的资源复制到dist目录去（除了index.html）</span>
    <span>new</span> <span>CopyPlugin</span><span>(</span><span>{</span>
      <span>patterns</span><span>:</span> <span>[</span>
        <span>{</span>
          <span>from</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public"</span><span>)</span><span>,</span>
          <span>to</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span>
          <span>toType</span><span>:</span> <span>"dir"</span><span>,</span>
          <span>noErrorOnMissing</span><span>:</span> <span>true</span><span>,</span> <span>// 不生成错误</span>
          <span>globOptions</span><span>:</span> <span>{</span>
            <span>// 忽略文件</span>
            <span>ignore</span><span>:</span> <span>[</span><span>"**/index.html"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>info</span><span>:</span> <span>{</span>
            <span>// 跳过terser压缩js</span>
            <span>minimized</span><span>:</span> <span>true</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>// 压缩的操作</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>new</span> <span>TerserWebpackPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>resolve</span><span>:</span> <span>{</span>
    <span>extensions</span><span>:</span> <span>[</span><span>".jsx"</span><span>,</span> <span>".js"</span><span>,</span> <span>".json"</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="其他配置" tabindex="-1"> 其他配置</h2>
<ul>
<li>package.json</li>
</ul>
<div><pre><code><span>{</span>
  <span>"name"</span><span>:</span> <span>"react-cli"</span><span>,</span>
  <span>"version"</span><span>:</span> <span>"1.0.0"</span><span>,</span>
  <span>"description"</span><span>:</span> <span>""</span><span>,</span>
  <span>"main"</span><span>:</span> <span>"index.js"</span><span>,</span>
  <span>"scripts"</span><span>:</span> <span>{</span>
    <span>"start"</span><span>:</span> <span>"npm run dev"</span><span>,</span>
    <span>"dev"</span><span>:</span> <span>"cross-env NODE_ENV=development webpack serve --config ./config/webpack.dev.js"</span><span>,</span>
    <span>"build"</span><span>:</span> <span>"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.js"</span>
  <span>}</span><span>,</span>
  <span>"keywords"</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>"author"</span><span>:</span> <span>""</span><span>,</span>
  <span>"license"</span><span>:</span> <span>"ISC"</span><span>,</span>
  <span>"devDependencies"</span><span>:</span> <span>{</span>
    <span>"@babel/core"</span><span>:</span> <span>"^7.17.10"</span><span>,</span>
    <span>"@pmmmwh/react-refresh-webpack-plugin"</span><span>:</span> <span>"^0.5.5"</span><span>,</span>
    <span>"babel-loader"</span><span>:</span> <span>"^8.2.5"</span><span>,</span>
    <span>"babel-preset-react-app"</span><span>:</span> <span>"^10.0.1"</span><span>,</span>
    <span>"copy-webpack-plugin"</span><span>:</span> <span>"^10.2.4"</span><span>,</span>
    <span>"cross-env"</span><span>:</span> <span>"^7.0.3"</span><span>,</span>
    <span>"css-loader"</span><span>:</span> <span>"^6.7.1"</span><span>,</span>
    <span>"css-minimizer-webpack-plugin"</span><span>:</span> <span>"^3.4.1"</span><span>,</span>
    <span>"eslint-config-react-app"</span><span>:</span> <span>"^7.0.1"</span><span>,</span>
    <span>"eslint-webpack-plugin"</span><span>:</span> <span>"^3.1.1"</span><span>,</span>
    <span>"html-webpack-plugin"</span><span>:</span> <span>"^5.5.0"</span><span>,</span>
    <span>"image-minimizer-webpack-plugin"</span><span>:</span> <span>"^3.2.3"</span><span>,</span>
    <span>"imagemin"</span><span>:</span> <span>"^8.0.1"</span><span>,</span>
    <span>"imagemin-gifsicle"</span><span>:</span> <span>"^7.0.0"</span><span>,</span>
    <span>"imagemin-jpegtran"</span><span>:</span> <span>"^7.0.0"</span><span>,</span>
    <span>"imagemin-optipng"</span><span>:</span> <span>"^8.0.0"</span><span>,</span>
    <span>"imagemin-svgo"</span><span>:</span> <span>"^10.0.1"</span><span>,</span>
    <span>"less-loader"</span><span>:</span> <span>"^10.2.0"</span><span>,</span>
    <span>"mini-css-extract-plugin"</span><span>:</span> <span>"^2.6.0"</span><span>,</span>
    <span>"postcss-loader"</span><span>:</span> <span>"^6.2.1"</span><span>,</span>
    <span>"postcss-preset-env"</span><span>:</span> <span>"^7.5.0"</span><span>,</span>
    <span>"react-refresh"</span><span>:</span> <span>"^0.13.0"</span><span>,</span>
    <span>"sass-loader"</span><span>:</span> <span>"^12.6.0"</span><span>,</span>
    <span>"style-loader"</span><span>:</span> <span>"^3.3.1"</span><span>,</span>
    <span>"stylus-loader"</span><span>:</span> <span>"^6.2.0"</span><span>,</span>
    <span>"webpack"</span><span>:</span> <span>"^5.72.0"</span><span>,</span>
    <span>"webpack-cli"</span><span>:</span> <span>"^4.9.2"</span><span>,</span>
    <span>"webpack-dev-server"</span><span>:</span> <span>"^4.9.0"</span>
  <span>}</span><span>,</span>
  <span>"dependencies"</span><span>:</span> <span>{</span>
    <span>"antd"</span><span>:</span> <span>"^4.20.2"</span><span>,</span>
    <span>"react"</span><span>:</span> <span>"^18.1.0"</span><span>,</span>
    <span>"react-dom"</span><span>:</span> <span>"^18.1.0"</span><span>,</span>
    <span>"react-router-dom"</span><span>:</span> <span>"^6.3.0"</span>
  <span>}</span><span>,</span>
  <span>"browserslist"</span><span>:</span> <span>[</span><span>"last 2 version"</span><span>,</span> <span>"> 1%"</span><span>,</span> <span>"not dead"</span><span>]</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>.eslintrc.js</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>extends</span><span>:</span> <span>[</span><span>"react-app"</span><span>]</span><span>,</span> <span>// 继承 react 官方规则</span>
  <span>parserOptions</span><span>:</span> <span>{</span>
    <span>babelOptions</span><span>:</span> <span>{</span>
      <span>presets</span><span>:</span> <span>[</span>
        <span>// 解决页面报错问题</span>
        <span>[</span><span>"babel-preset-react-app"</span><span>,</span> <span>false</span><span>]</span><span>,</span>
        <span>"babel-preset-react-app/prod"</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>babel.config.js</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 使用react官方规则</span>
  <span>presets</span><span>:</span> <span>[</span><span>"react-app"</span><span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><h2 id="合并开发和生产配置" tabindex="-1"> 合并开发和生产配置</h2>
<ul>
<li>webpack.config.js</li>
</ul>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ReactRefreshWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"@pmmmwh/react-refresh-webpack-plugin"</span><span>)</span><span>;</span>

<span>// 需要通过 cross-env 定义环境变量</span>
<span>const</span> isProduction <span>=</span> process<span>.</span>env<span>.</span><span>NODE_ENV</span> <span>===</span> <span>"production"</span><span>;</span>

<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    isProduction <span>?</span> MiniCssExtractPlugin<span>.</span>loader <span>:</span> <span>"style-loader"</span><span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> isProduction <span>?</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span> <span>:</span> <span>undefined</span><span>,</span>
    <span>filename</span><span>:</span> isProduction
      <span>?</span> <span>"static/js/[name].[contenthash:10].js"</span>
      <span>:</span> <span>"static/js/[name].js"</span><span>,</span>
    <span>chunkFilename</span><span>:</span> isProduction
      <span>?</span> <span>"static/js/[name].[contenthash:10].chunk.js"</span>
      <span>:</span> <span>"static/js/[name].chunk.js"</span><span>,</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/js/[hash:10][ext][query]"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(jsx|js)$</span><span>/</span></span><span>,</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
            <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
              <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
              <span>plugins</span><span>:</span> <span>[</span>
                <span>// "@babel/plugin-transform-runtime",  // presets中包含了</span>
                <span>!</span>isProduction <span>&amp;&amp;</span> <span>"react-refresh/babel"</span><span>,</span>
              <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>extensions</span><span>:</span> <span>[</span><span>".js"</span><span>,</span> <span>".jsx"</span><span>]</span><span>,</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    isProduction <span>&amp;&amp;</span>
      <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
        <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:10].css"</span><span>,</span>
        <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:10].chunk.css"</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>!</span>isProduction <span>&amp;&amp;</span> <span>new</span> <span>ReactRefreshWebpackPlugin</span><span>(</span><span>)</span><span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimize</span><span>:</span> isProduction<span>,</span>
    <span>// 压缩的操作</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// 压缩css</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 压缩js</span>
      <span>new</span> <span>TerserWebpackPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span>
      <span>// 其他都用默认值</span>
    <span>}</span><span>,</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>resolve</span><span>:</span> <span>{</span>
    <span>extensions</span><span>:</span> <span>[</span><span>".jsx"</span><span>,</span> <span>".js"</span><span>,</span> <span>".json"</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span>
    <span>port</span><span>:</span> <span>3000</span><span>,</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span>
    <span>compress</span><span>:</span> <span>true</span><span>,</span>
    <span>historyApiFallback</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> isProduction <span>?</span> <span>"production"</span> <span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> isProduction <span>?</span> <span>"source-map"</span> <span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>修改运行指令 package.json</li>
</ul>
<div><pre><code><span>{</span>
  <span>"name"</span><span>:</span> <span>"react-cli"</span><span>,</span>
  <span>"version"</span><span>:</span> <span>"1.0.0"</span><span>,</span>
  <span>"description"</span><span>:</span> <span>""</span><span>,</span>
  <span>"main"</span><span>:</span> <span>"index.js"</span><span>,</span>
  <span>"scripts"</span><span>:</span> <span>{</span>
    <span>"start"</span><span>:</span> <span>"npm run dev"</span><span>,</span>
    <span>"dev"</span><span>:</span> <span>"cross-env NODE_ENV=development webpack serve --config ./config/webpack.config.js"</span><span>,</span>
    <span>"build"</span><span>:</span> <span>"cross-env NODE_ENV=production webpack --config ./config/webpack.config.js"</span>
  <span>}</span><span>,</span>
  <span>"keywords"</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>"author"</span><span>:</span> <span>""</span><span>,</span>
  <span>"license"</span><span>:</span> <span>"ISC"</span><span>,</span>
  <span>"devDependencies"</span><span>:</span> <span>{</span>
    <span>"@babel/core"</span><span>:</span> <span>"^7.17.10"</span><span>,</span>
    <span>"@pmmmwh/react-refresh-webpack-plugin"</span><span>:</span> <span>"^0.5.5"</span><span>,</span>
    <span>"babel-loader"</span><span>:</span> <span>"^8.2.5"</span><span>,</span>
    <span>"babel-preset-react-app"</span><span>:</span> <span>"^10.0.1"</span><span>,</span>
    <span>"cross-env"</span><span>:</span> <span>"^7.0.3"</span><span>,</span>
    <span>"css-loader"</span><span>:</span> <span>"^6.7.1"</span><span>,</span>
    <span>"css-minimizer-webpack-plugin"</span><span>:</span> <span>"^3.4.1"</span><span>,</span>
    <span>"eslint-config-react-app"</span><span>:</span> <span>"^7.0.1"</span><span>,</span>
    <span>"eslint-webpack-plugin"</span><span>:</span> <span>"^3.1.1"</span><span>,</span>
    <span>"html-webpack-plugin"</span><span>:</span> <span>"^5.5.0"</span><span>,</span>
    <span>"image-minimizer-webpack-plugin"</span><span>:</span> <span>"^3.2.3"</span><span>,</span>
    <span>"imagemin"</span><span>:</span> <span>"^8.0.1"</span><span>,</span>
    <span>"imagemin-gifsicle"</span><span>:</span> <span>"^7.0.0"</span><span>,</span>
    <span>"imagemin-jpegtran"</span><span>:</span> <span>"^7.0.0"</span><span>,</span>
    <span>"imagemin-optipng"</span><span>:</span> <span>"^8.0.0"</span><span>,</span>
    <span>"imagemin-svgo"</span><span>:</span> <span>"^10.0.1"</span><span>,</span>
    <span>"less-loader"</span><span>:</span> <span>"^10.2.0"</span><span>,</span>
    <span>"mini-css-extract-plugin"</span><span>:</span> <span>"^2.6.0"</span><span>,</span>
    <span>"react-refresh"</span><span>:</span> <span>"^0.13.0"</span><span>,</span>
    <span>"sass-loader"</span><span>:</span> <span>"^12.6.0"</span><span>,</span>
    <span>"style-loader"</span><span>:</span> <span>"^3.3.1"</span><span>,</span>
    <span>"stylus-loader"</span><span>:</span> <span>"^6.2.0"</span><span>,</span>
    <span>"webpack"</span><span>:</span> <span>"^5.72.0"</span><span>,</span>
    <span>"webpack-cli"</span><span>:</span> <span>"^4.9.2"</span><span>,</span>
    <span>"webpack-dev-server"</span><span>:</span> <span>"^4.9.0"</span>
  <span>}</span><span>,</span>
  <span>"dependencies"</span><span>:</span> <span>{</span>
    <span>"react"</span><span>:</span> <span>"^18.1.0"</span><span>,</span>
    <span>"react-dom"</span><span>:</span> <span>"^18.1.0"</span><span>,</span>
    <span>"react-router-dom"</span><span>:</span> <span>"^6.3.0"</span>
  <span>}</span><span>,</span>
  <span>"browserslist"</span><span>:</span> <span>[</span><span>"last 2 version"</span><span>,</span> <span>"> 1%"</span><span>,</span> <span>"not dead"</span><span>]</span>
<span>}</span>
</code></pre><div><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="优化配置" tabindex="-1"> 优化配置</h2>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ReactRefreshWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"@pmmmwh/react-refresh-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> CopyPlugin <span>=</span> <span>require</span><span>(</span><span>"copy-webpack-plugin"</span><span>)</span><span>;</span>

<span>const</span> isProduction <span>=</span> process<span>.</span>env<span>.</span><span>NODE_ENV</span> <span>===</span> <span>"production"</span><span>;</span>

<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    isProduction <span>?</span> MiniCssExtractPlugin<span>.</span>loader <span>:</span> <span>"style-loader"</span><span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor <span>&amp;&amp;</span> <span>{</span>
      <span>loader</span><span>:</span> preProcessor<span>,</span>
      <span>options</span><span>:</span>
        preProcessor <span>===</span> <span>"less-loader"</span>
          <span>?</span> <span>{</span>
              <span>// antd的自定义主题</span>
              <span>lessOptions</span><span>:</span> <span>{</span>
                <span>modifyVars</span><span>:</span> <span>{</span>
                  <span>// 其他主题色：https://ant.design/docs/react/customize-theme-cn</span>
                  <span>"@primary-color"</span><span>:</span> <span>"#1DA57A"</span><span>,</span> <span>// 全局主色</span>
                <span>}</span><span>,</span>
                <span>javascriptEnabled</span><span>:</span> <span>true</span><span>,</span>
              <span>}</span><span>,</span>
            <span>}</span>
          <span>:</span> <span>{</span><span>}</span><span>,</span>
    <span>}</span><span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> isProduction <span>?</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span> <span>:</span> <span>undefined</span><span>,</span>
    <span>filename</span><span>:</span> isProduction
      <span>?</span> <span>"static/js/[name].[contenthash:10].js"</span>
      <span>:</span> <span>"static/js/[name].js"</span><span>,</span>
    <span>chunkFilename</span><span>:</span> isProduction
      <span>?</span> <span>"static/js/[name].[contenthash:10].chunk.js"</span>
      <span>:</span> <span>"static/js/[name].chunk.js"</span><span>,</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/js/[hash:10][ext][query]"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(jsx|js)$</span><span>/</span></span><span>,</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
            <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span>
              <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span>
              <span>plugins</span><span>:</span> <span>[</span>
                <span>// "@babel/plugin-transform-runtime",  // presets中包含了</span>
                <span>!</span>isProduction <span>&amp;&amp;</span> <span>"react-refresh/babel"</span><span>,</span>
              <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>extensions</span><span>:</span> <span>[</span><span>".js"</span><span>,</span> <span>".jsx"</span><span>]</span><span>,</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    isProduction <span>&amp;&amp;</span>
      <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
        <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:10].css"</span><span>,</span>
        <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:10].chunk.css"</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>!</span>isProduction <span>&amp;&amp;</span> <span>new</span> <span>ReactRefreshWebpackPlugin</span><span>(</span><span>)</span><span>,</span>
    <span>// 将public下面的资源复制到dist目录去（除了index.html）</span>
    <span>new</span> <span>CopyPlugin</span><span>(</span><span>{</span>
      <span>patterns</span><span>:</span> <span>[</span>
        <span>{</span>
          <span>from</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public"</span><span>)</span><span>,</span>
          <span>to</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span>
          <span>toType</span><span>:</span> <span>"dir"</span><span>,</span>
          <span>noErrorOnMissing</span><span>:</span> <span>true</span><span>,</span> <span>// 不生成错误</span>
          <span>globOptions</span><span>:</span> <span>{</span>
            <span>// 忽略文件</span>
            <span>ignore</span><span>:</span> <span>[</span><span>"**/index.html"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>info</span><span>:</span> <span>{</span>
            <span>// 跳过terser压缩js</span>
            <span>minimized</span><span>:</span> <span>true</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimize</span><span>:</span> isProduction<span>,</span>
    <span>// 压缩的操作</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// 压缩css</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 压缩js</span>
      <span>new</span> <span>TerserWebpackPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span>
      <span>cacheGroups</span><span>:</span> <span>{</span>
        <span>// layouts通常是admin项目的主体布局组件，所有路由组件都要使用的</span>
        <span>// 可以单独打包，从而复用</span>
        <span>// 如果项目中没有，请删除</span>
        <span>layouts</span><span>:</span> <span>{</span>
          <span>name</span><span>:</span> <span>"layouts"</span><span>,</span>
          <span>test</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src/layouts"</span><span>)</span><span>,</span>
          <span>priority</span><span>:</span> <span>40</span><span>,</span>
        <span>}</span><span>,</span>
        <span>// 如果项目中使用antd，此时将所有node_modules打包在一起，那么打包输出文件会比较大。</span>
        <span>// 所以我们将node_modules中比较大的模块单独打包，从而并行加载速度更好</span>
        <span>// 如果项目中没有，请删除</span>
        <span>antd</span><span>:</span> <span>{</span>
          <span>name</span><span>:</span> <span>"chunk-antd"</span><span>,</span>
          <span>test</span><span>:</span> <span><span>/</span><span>[\\/]node_modules[\\/]antd(.*)</span><span>/</span></span><span>,</span>
          <span>priority</span><span>:</span> <span>30</span><span>,</span>
        <span>}</span><span>,</span>
        <span>// 将react相关的库单独打包，减少node_modules的chunk体积。</span>
        <span>react</span><span>:</span> <span>{</span>
          <span>name</span><span>:</span> <span>"react"</span><span>,</span>
          <span>test</span><span>:</span> <span><span>/</span><span>[\\/]node_modules[\\/]react(.*)?[\\/]</span><span>/</span></span><span>,</span>
          <span>chunks</span><span>:</span> <span>"initial"</span><span>,</span>
          <span>priority</span><span>:</span> <span>20</span><span>,</span>
        <span>}</span><span>,</span>
        <span>libs</span><span>:</span> <span>{</span>
          <span>name</span><span>:</span> <span>"chunk-libs"</span><span>,</span>
          <span>test</span><span>:</span> <span><span>/</span><span>[\\/]node_modules[\\/]</span><span>/</span></span><span>,</span>
          <span>priority</span><span>:</span> <span>10</span><span>,</span> <span>// 权重最低，优先考虑前面内容</span>
          <span>chunks</span><span>:</span> <span>"initial"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>resolve</span><span>:</span> <span>{</span>
    <span>extensions</span><span>:</span> <span>[</span><span>".jsx"</span><span>,</span> <span>".js"</span><span>,</span> <span>".json"</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span>
    <span>port</span><span>:</span> <span>3000</span><span>,</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span>
    <span>compress</span><span>:</span> <span>true</span><span>,</span>
    <span>historyApiFallback</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> isProduction <span>?</span> <span>"production"</span> <span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> isProduction <span>?</span> <span>"source-map"</span> <span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
  <span>performance</span><span>:</span> <span>false</span><span>,</span> <span>// 关闭性能分析，提示速度</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">总结</title>
    <id>https://github.com/MisterChen9527/note/webpack/project/summary.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/project/summary.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>本章节我们学习到了：</p>
<ol>
<li>
<p>如何搭建 <code>React-Cli</code> 和 <code>Vue-Cli</code>。</p>
</li>
<li>
<p>如何对脚手架进行优化。</p>
</li>
<li>
<p>未来随着项目越来越大，还可以在优化的方案。</p>
</li>
</ol>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">Vue脚手架</title>
    <id>https://github.com/MisterChen9527/note/webpack/project/vue-cli.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/project/vue-cli.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="开发模式配置" tabindex="-1"> 开发模式配置</h2>
<div><pre><code><span>// webpack.dev.js</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> VueLoaderPlugin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"vue-loader"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> DefinePlugin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"webpack"</span><span>)</span><span>;</span>
<span>const</span> CopyPlugin <span>=</span> <span>require</span><span>(</span><span>"copy-webpack-plugin"</span><span>)</span><span>;</span>

<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    <span>"vue-style-loader"</span><span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> <span>undefined</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].js"</span><span>,</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].chunk.js"</span><span>,</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/js/[hash:10][ext][query]"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(jsx|js)$</span><span>/</span></span><span>,</span>
        <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
        <span>options</span><span>:</span> <span>{</span>
          <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span>
          <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>// "@babel/plugin-transform-runtime" // presets中包含了</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>// vue-loader不支持oneOf</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.vue$</span><span>/</span></span><span>,</span>
        <span>loader</span><span>:</span> <span>"vue-loader"</span><span>,</span> <span>// 内部会给vue文件注入HMR功能代码</span>
        <span>options</span><span>:</span> <span>{</span>
          <span>// 开启缓存</span>
          <span>cacheDirectory</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
            __dirname<span>,</span>
            <span>"node_modules/.cache/vue-loader"</span>
          <span>)</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>CopyPlugin</span><span>(</span><span>{</span>
      <span>patterns</span><span>:</span> <span>[</span>
        <span>{</span>
          <span>from</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public"</span><span>)</span><span>,</span>
          <span>to</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span>
          <span>toType</span><span>:</span> <span>"dir"</span><span>,</span>
          <span>noErrorOnMissing</span><span>:</span> <span>true</span><span>,</span>
          <span>globOptions</span><span>:</span> <span>{</span>
            <span>ignore</span><span>:</span> <span>[</span><span>"**/index.html"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>info</span><span>:</span> <span>{</span>
            <span>minimized</span><span>:</span> <span>true</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>VueLoaderPlugin</span><span>(</span><span>)</span><span>,</span>
    <span>// 解决页面警告</span>
    <span>new</span> <span>DefinePlugin</span><span>(</span><span>{</span>
      <span>__VUE_OPTIONS_API__</span><span>:</span> <span>"true"</span><span>,</span>
      <span>__VUE_PROD_DEVTOOLS__</span><span>:</span> <span>"false"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>resolve</span><span>:</span> <span>{</span>
    <span>extensions</span><span>:</span> <span>[</span><span>".vue"</span><span>,</span> <span>".js"</span><span>,</span> <span>".json"</span><span>]</span><span>,</span> <span>// 自动补全文件扩展名，让vue可以使用</span>
  <span>}</span><span>,</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span>
    <span>port</span><span>:</span> <span>3000</span><span>,</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span>
    <span>compress</span><span>:</span> <span>true</span><span>,</span>
    <span>historyApiFallback</span><span>:</span> <span>true</span><span>,</span> <span>// 解决vue-router刷新404问题</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="生产模式配置" tabindex="-1"> 生产模式配置</h2>
<div><pre><code><span>// webpack.prod.js</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> VueLoaderPlugin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"vue-loader"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> DefinePlugin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"webpack"</span><span>)</span><span>;</span>

<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> <span>undefined</span><span>,</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].[contenthash:10].js"</span><span>,</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].[contenthash:10].chunk.js"</span><span>,</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/js/[hash:10][ext][query]"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(jsx|js)$</span><span>/</span></span><span>,</span>
        <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
        <span>options</span><span>:</span> <span>{</span>
          <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span>
          <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>// "@babel/plugin-transform-runtime" // presets中包含了</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>// vue-loader不支持oneOf</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.vue$</span><span>/</span></span><span>,</span>
        <span>loader</span><span>:</span> <span>"vue-loader"</span><span>,</span> <span>// 内部会给vue文件注入HMR功能代码</span>
        <span>options</span><span>:</span> <span>{</span>
          <span>// 开启缓存</span>
          <span>cacheDirectory</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
            __dirname<span>,</span>
            <span>"node_modules/.cache/vue-loader"</span>
          <span>)</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>CopyPlugin</span><span>(</span><span>{</span>
      <span>patterns</span><span>:</span> <span>[</span>
        <span>{</span>
          <span>from</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public"</span><span>)</span><span>,</span>
          <span>to</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span>
          <span>toType</span><span>:</span> <span>"dir"</span><span>,</span>
          <span>noErrorOnMissing</span><span>:</span> <span>true</span><span>,</span>
          <span>globOptions</span><span>:</span> <span>{</span>
            <span>ignore</span><span>:</span> <span>[</span><span>"**/index.html"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>info</span><span>:</span> <span>{</span>
            <span>minimized</span><span>:</span> <span>true</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:10].css"</span><span>,</span>
      <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:10].chunk.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>VueLoaderPlugin</span><span>(</span><span>)</span><span>,</span>
    <span>new</span> <span>DefinePlugin</span><span>(</span><span>{</span>
      <span>__VUE_OPTIONS_API__</span><span>:</span> <span>"true"</span><span>,</span>
      <span>__VUE_PROD_DEVTOOLS__</span><span>:</span> <span>"false"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>// 压缩的操作</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>new</span> <span>TerserWebpackPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>resolve</span><span>:</span> <span>{</span>
    <span>extensions</span><span>:</span> <span>[</span><span>".vue"</span><span>,</span> <span>".js"</span><span>,</span> <span>".json"</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="其他配置" tabindex="-1"> 其他配置</h2>
<ul>
<li>package.json</li>
</ul>
<div><pre><code><span>{</span>
  <span>"name"</span><span>:</span> <span>"vue-cli"</span><span>,</span>
  <span>"version"</span><span>:</span> <span>"1.0.0"</span><span>,</span>
  <span>"description"</span><span>:</span> <span>""</span><span>,</span>
  <span>"main"</span><span>:</span> <span>"main.js"</span><span>,</span>
  <span>"scripts"</span><span>:</span> <span>{</span>
    <span>"start"</span><span>:</span> <span>"npm run dev"</span><span>,</span>
    <span>"dev"</span><span>:</span> <span>"cross-env NODE_ENV=development webpack serve --config ./config/webpack.dev.js"</span><span>,</span>
    <span>"build"</span><span>:</span> <span>"cross-env NODE_ENV=production webpack --config ./config/webpack.prod.js"</span>
  <span>}</span><span>,</span>
  <span>"keywords"</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>"author"</span><span>:</span> <span>""</span><span>,</span>
  <span>"license"</span><span>:</span> <span>"ISC"</span><span>,</span>
  <span>"devDependencies"</span><span>:</span> <span>{</span>
    <span>"@babel/core"</span><span>:</span> <span>"^7.17.10"</span><span>,</span>
    <span>"@babel/eslint-parser"</span><span>:</span> <span>"^7.17.0"</span><span>,</span>
    <span>"@vue/cli-plugin-babel"</span><span>:</span> <span>"^5.0.4"</span><span>,</span>
    <span>"babel-loader"</span><span>:</span> <span>"^8.2.5"</span><span>,</span>
    <span>"copy-webpack-plugin"</span><span>:</span> <span>"^10.2.4"</span><span>,</span>
    <span>"cross-env"</span><span>:</span> <span>"^7.0.3"</span><span>,</span>
    <span>"css-loader"</span><span>:</span> <span>"^6.7.1"</span><span>,</span>
    <span>"css-minimizer-webpack-plugin"</span><span>:</span> <span>"^3.4.1"</span><span>,</span>
    <span>"eslint-plugin-vue"</span><span>:</span> <span>"^8.7.1"</span><span>,</span>
    <span>"eslint-webpack-plugin"</span><span>:</span> <span>"^3.1.1"</span><span>,</span>
    <span>"html-webpack-plugin"</span><span>:</span> <span>"^5.5.0"</span><span>,</span>
    <span>"image-minimizer-webpack-plugin"</span><span>:</span> <span>"^3.2.3"</span><span>,</span>
    <span>"imagemin"</span><span>:</span> <span>"^8.0.1"</span><span>,</span>
    <span>"imagemin-gifsicle"</span><span>:</span> <span>"^7.0.0"</span><span>,</span>
    <span>"imagemin-jpegtran"</span><span>:</span> <span>"^7.0.0"</span><span>,</span>
    <span>"imagemin-optipng"</span><span>:</span> <span>"^8.0.0"</span><span>,</span>
    <span>"imagemin-svgo"</span><span>:</span> <span>"^10.0.1"</span><span>,</span>
    <span>"less-loader"</span><span>:</span> <span>"^10.2.0"</span><span>,</span>
    <span>"mini-css-extract-plugin"</span><span>:</span> <span>"^2.6.0"</span><span>,</span>
    <span>"postcss-preset-env"</span><span>:</span> <span>"^7.5.0"</span><span>,</span>
    <span>"sass-loader"</span><span>:</span> <span>"^12.6.0"</span><span>,</span>
    <span>"stylus-loader"</span><span>:</span> <span>"^6.2.0"</span><span>,</span>
    <span>"vue-loader"</span><span>:</span> <span>"^17.0.0"</span><span>,</span>
    <span>"vue-style-loader"</span><span>:</span> <span>"^4.1.3"</span><span>,</span>
    <span>"vue-template-compiler"</span><span>:</span> <span>"^2.6.14"</span><span>,</span>
    <span>"webpack"</span><span>:</span> <span>"^5.72.0"</span><span>,</span>
    <span>"webpack-cli"</span><span>:</span> <span>"^4.9.2"</span><span>,</span>
    <span>"webpack-dev-server"</span><span>:</span> <span>"^4.9.0"</span>
  <span>}</span><span>,</span>
  <span>"dependencies"</span><span>:</span> <span>{</span>
    <span>"vue"</span><span>:</span> <span>"^3.2.33"</span><span>,</span>
    <span>"vue-router"</span><span>:</span> <span>"^4.0.15"</span>
  <span>}</span><span>,</span>
  <span>"browserslist"</span><span>:</span> <span>[</span><span>"last 2 version"</span><span>,</span> <span>"> 1%"</span><span>,</span> <span>"not dead"</span><span>]</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>.eslintrc.js</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>root</span><span>:</span> <span>true</span><span>,</span>
  <span>env</span><span>:</span> <span>{</span>
    <span>node</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>extends</span><span>:</span> <span>[</span><span>"plugin:vue/vue3-essential"</span><span>,</span> <span>"eslint:recommended"</span><span>]</span><span>,</span>
  <span>parserOptions</span><span>:</span> <span>{</span>
    <span>parser</span><span>:</span> <span>"@babel/eslint-parser"</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>babel.config.js</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>presets</span><span>:</span> <span>[</span><span>"@vue/cli-plugin-babel/preset"</span><span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><h2 id="合并开发和生产配置" tabindex="-1"> 合并开发和生产配置</h2>
<div><pre><code><span>// webpack.config.js</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> VueLoaderPlugin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"vue-loader"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> DefinePlugin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"webpack"</span><span>)</span><span>;</span>
<span>const</span> CopyPlugin <span>=</span> <span>require</span><span>(</span><span>"copy-webpack-plugin"</span><span>)</span><span>;</span>

<span>// 需要通过 cross-env 定义环境变量</span>
<span>const</span> isProduction <span>=</span> process<span>.</span>env<span>.</span><span>NODE_ENV</span> <span>===</span> <span>"production"</span><span>;</span>

<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    isProduction <span>?</span> MiniCssExtractPlugin<span>.</span>loader <span>:</span> <span>"vue-style-loader"</span><span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span><span>"postcss-preset-env"</span><span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> isProduction <span>?</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span> <span>:</span> <span>undefined</span><span>,</span>
    <span>filename</span><span>:</span> isProduction
      <span>?</span> <span>"static/js/[name].[contenthash:10].js"</span>
      <span>:</span> <span>"static/js/[name].js"</span><span>,</span>
    <span>chunkFilename</span><span>:</span> isProduction
      <span>?</span> <span>"static/js/[name].[contenthash:10].chunk.js"</span>
      <span>:</span> <span>"static/js/[name].chunk.js"</span><span>,</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/js/[hash:10][ext][query]"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>// 用来匹配 .css 结尾的文件</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>// use 数组里面 Loader 执行顺序是从右到左</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(jsx|js)$</span><span>/</span></span><span>,</span>
        <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
        <span>options</span><span>:</span> <span>{</span>
          <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span>
          <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>// "@babel/plugin-transform-runtime" // presets中包含了</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>// vue-loader不支持oneOf</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.vue$</span><span>/</span></span><span>,</span>
        <span>loader</span><span>:</span> <span>"vue-loader"</span><span>,</span> <span>// 内部会给vue文件注入HMR功能代码</span>
        <span>options</span><span>:</span> <span>{</span>
          <span>// 开启缓存</span>
          <span>cacheDirectory</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
            __dirname<span>,</span>
            <span>"node_modules/.cache/vue-loader"</span>
          <span>)</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>CopyPlugin</span><span>(</span><span>{</span>
      <span>patterns</span><span>:</span> <span>[</span>
        <span>{</span>
          <span>from</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public"</span><span>)</span><span>,</span>
          <span>to</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span>
          <span>toType</span><span>:</span> <span>"dir"</span><span>,</span>
          <span>noErrorOnMissing</span><span>:</span> <span>true</span><span>,</span>
          <span>globOptions</span><span>:</span> <span>{</span>
            <span>ignore</span><span>:</span> <span>[</span><span>"**/index.html"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>info</span><span>:</span> <span>{</span>
            <span>minimized</span><span>:</span> <span>true</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    isProduction <span>&amp;&amp;</span>
      <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
        <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:10].css"</span><span>,</span>
        <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:10].chunk.css"</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>VueLoaderPlugin</span><span>(</span><span>)</span><span>,</span>
    <span>new</span> <span>DefinePlugin</span><span>(</span><span>{</span>
      <span>__VUE_OPTIONS_API__</span><span>:</span> <span>"true"</span><span>,</span>
      <span>__VUE_PROD_DEVTOOLS__</span><span>:</span> <span>"false"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimize</span><span>:</span> isProduction<span>,</span>
    <span>// 压缩的操作</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>new</span> <span>TerserWebpackPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span>
    <span>}</span><span>,</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>resolve</span><span>:</span> <span>{</span>
    <span>extensions</span><span>:</span> <span>[</span><span>".vue"</span><span>,</span> <span>".js"</span><span>,</span> <span>".json"</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span>
    <span>port</span><span>:</span> <span>3000</span><span>,</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span>
    <span>compress</span><span>:</span> <span>true</span><span>,</span>
    <span>historyApiFallback</span><span>:</span> <span>true</span><span>,</span> <span>// 解决vue-router刷新404问题</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> isProduction <span>?</span> <span>"production"</span> <span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> isProduction <span>?</span> <span>"source-map"</span> <span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="优化配置" tabindex="-1"> 优化配置</h2>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> CopyPlugin <span>=</span> <span>require</span><span>(</span><span>"copy-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> VueLoaderPlugin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"vue-loader"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> DefinePlugin <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"webpack"</span><span>)</span><span>;</span>
<span>const</span> AutoImport <span>=</span> <span>require</span><span>(</span><span>"unplugin-auto-import/webpack"</span><span>)</span><span>;</span>
<span>const</span> Components <span>=</span> <span>require</span><span>(</span><span>"unplugin-vue-components/webpack"</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> ElementPlusResolver <span>}</span> <span>=</span> <span>require</span><span>(</span><span>"unplugin-vue-components/resolvers"</span><span>)</span><span>;</span>
<span>// 需要通过 cross-env 定义环境变量</span>
<span>const</span> isProduction <span>=</span> process<span>.</span>env<span>.</span><span>NODE_ENV</span> <span>===</span> <span>"production"</span><span>;</span>

<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    isProduction <span>?</span> MiniCssExtractPlugin<span>.</span>loader <span>:</span> <span>"vue-style-loader"</span><span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span><span>"postcss-preset-env"</span><span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor <span>&amp;&amp;</span> <span>{</span>
      <span>loader</span><span>:</span> preProcessor<span>,</span>
      <span>options</span><span>:</span>
        preProcessor <span>===</span> <span>"sass-loader"</span>
          <span>?</span> <span>{</span>
              <span>// 自定义主题：自动引入我们定义的scss文件</span>
              <span>additionalData</span><span>:</span> <span><span>`</span><span>@use "@/styles/element/index.scss" as *;</span><span>`</span></span><span>,</span>
            <span>}</span>
          <span>:</span> <span>{</span><span>}</span><span>,</span>
    <span>}</span><span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> isProduction <span>?</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span> <span>:</span> <span>undefined</span><span>,</span>
    <span>filename</span><span>:</span> isProduction
      <span>?</span> <span>"static/js/[name].[contenthash:10].js"</span>
      <span>:</span> <span>"static/js/[name].js"</span><span>,</span>
    <span>chunkFilename</span><span>:</span> isProduction
      <span>?</span> <span>"static/js/[name].[contenthash:10].chunk.js"</span>
      <span>:</span> <span>"static/js/[name].chunk.js"</span><span>,</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/js/[hash:10][ext][query]"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
        <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
        <span>parser</span><span>:</span> <span>{</span>
          <span>dataUrlCondition</span><span>:</span> <span>{</span>
            <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
        <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
      <span>}</span><span>,</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.(jsx|js)$</span><span>/</span></span><span>,</span>
        <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
        <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
        <span>options</span><span>:</span> <span>{</span>
          <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span>
          <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>// "@babel/plugin-transform-runtime" // presets中包含了</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
      <span>// vue-loader不支持oneOf</span>
      <span>{</span>
        <span>test</span><span>:</span> <span><span>/</span><span>\.vue$</span><span>/</span></span><span>,</span>
        <span>loader</span><span>:</span> <span>"vue-loader"</span><span>,</span> <span>// 内部会给vue文件注入HMR功能代码</span>
        <span>options</span><span>:</span> <span>{</span>
          <span>// 开启缓存</span>
          <span>cacheDirectory</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
            __dirname<span>,</span>
            <span>"node_modules/.cache/vue-loader"</span>
          <span>)</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>CopyPlugin</span><span>(</span><span>{</span>
      <span>patterns</span><span>:</span> <span>[</span>
        <span>{</span>
          <span>from</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public"</span><span>)</span><span>,</span>
          <span>to</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span>
          <span>toType</span><span>:</span> <span>"dir"</span><span>,</span>
          <span>noErrorOnMissing</span><span>:</span> <span>true</span><span>,</span>
          <span>globOptions</span><span>:</span> <span>{</span>
            <span>ignore</span><span>:</span> <span>[</span><span>"**/index.html"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>info</span><span>:</span> <span>{</span>
            <span>minimized</span><span>:</span> <span>true</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    isProduction <span>&amp;&amp;</span>
      <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
        <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:10].css"</span><span>,</span>
        <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:10].chunk.css"</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>VueLoaderPlugin</span><span>(</span><span>)</span><span>,</span>
    <span>new</span> <span>DefinePlugin</span><span>(</span><span>{</span>
      <span>__VUE_OPTIONS_API__</span><span>:</span> <span>"true"</span><span>,</span>
      <span>__VUE_PROD_DEVTOOLS__</span><span>:</span> <span>"false"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 按需加载element-plus组件样式</span>
    <span>AutoImport</span><span>(</span><span>{</span>
      <span>resolvers</span><span>:</span> <span>[</span><span>ElementPlusResolver</span><span>(</span><span>)</span><span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>Components</span><span>(</span><span>{</span>
      <span>resolvers</span><span>:</span> <span>[</span>
        <span>ElementPlusResolver</span><span>(</span><span>{</span>
          <span>importStyle</span><span>:</span> <span>"sass"</span><span>,</span> <span>// 自定义主题</span>
        <span>}</span><span>)</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimize</span><span>:</span> isProduction<span>,</span>
    <span>// 压缩的操作</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>new</span> <span>TerserWebpackPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span>
      <span>cacheGroups</span><span>:</span> <span>{</span>
        <span>// layouts通常是admin项目的主体布局组件，所有路由组件都要使用的</span>
        <span>// 可以单独打包，从而复用</span>
        <span>// 如果项目中没有，请删除</span>
        <span>layouts</span><span>:</span> <span>{</span>
          <span>name</span><span>:</span> <span>"layouts"</span><span>,</span>
          <span>test</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src/layouts"</span><span>)</span><span>,</span>
          <span>priority</span><span>:</span> <span>40</span><span>,</span>
        <span>}</span><span>,</span>
        <span>// 如果项目中使用element-plus，此时将所有node_modules打包在一起，那么打包输出文件会比较大。</span>
        <span>// 所以我们将node_modules中比较大的模块单独打包，从而并行加载速度更好</span>
        <span>// 如果项目中没有，请删除</span>
        <span>elementUI</span><span>:</span> <span>{</span>
          <span>name</span><span>:</span> <span>"chunk-elementPlus"</span><span>,</span>
          <span>test</span><span>:</span> <span><span>/</span><span>[\\/]node_modules[\\/]_?element-plus(.*)</span><span>/</span></span><span>,</span>
          <span>priority</span><span>:</span> <span>30</span><span>,</span>
        <span>}</span><span>,</span>
        <span>// 将vue相关的库单独打包，减少node_modules的chunk体积。</span>
        <span>vue</span><span>:</span> <span>{</span>
          <span>name</span><span>:</span> <span>"vue"</span><span>,</span>
          <span>test</span><span>:</span> <span><span>/</span><span>[\\/]node_modules[\\/]vue(.*)[\\/]</span><span>/</span></span><span>,</span>
          <span>chunks</span><span>:</span> <span>"initial"</span><span>,</span>
          <span>priority</span><span>:</span> <span>20</span><span>,</span>
        <span>}</span><span>,</span>
        <span>libs</span><span>:</span> <span>{</span>
          <span>name</span><span>:</span> <span>"chunk-libs"</span><span>,</span>
          <span>test</span><span>:</span> <span><span>/</span><span>[\\/]node_modules[\\/]</span><span>/</span></span><span>,</span>
          <span>priority</span><span>:</span> <span>10</span><span>,</span> <span>// 权重最低，优先考虑前面内容</span>
          <span>chunks</span><span>:</span> <span>"initial"</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>resolve</span><span>:</span> <span>{</span>
    <span>extensions</span><span>:</span> <span>[</span><span>".vue"</span><span>,</span> <span>".js"</span><span>,</span> <span>".json"</span><span>]</span><span>,</span>
    <span>alias</span><span>:</span> <span>{</span>
      <span>// 路径别名</span>
      <span>"@"</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span>
    <span>port</span><span>:</span> <span>3000</span><span>,</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span>
    <span>compress</span><span>:</span> <span>true</span><span>,</span>
    <span>historyApiFallback</span><span>:</span> <span>true</span><span>,</span> <span>// 解决vue-router刷新404问题</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> isProduction <span>?</span> <span>"production"</span> <span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> isProduction <span>?</span> <span>"source-map"</span> <span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
  <span>performance</span><span>:</span> <span>false</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">高级优化</title>
    <id>https://github.com/MisterChen9527/note/webpack/senior/</id>
    <link href="https://github.com/MisterChen9527/note/webpack/senior/"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<div><p>提示</p>
<p>本章节主要介绍 Webpack 高级配置。</p>
</div>
<p>所谓高级配置其实就是进行 Webpack 优化，让我们代码在编译/运行时性能更好~</p>
<p>我们会从以下角度来进行优化：</p>
<ol>
<li>提升开发体验</li>
<li>提升打包构建速度</li>
<li>减少代码体积</li>
<li>优化代码运行性能</li>
</ol>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">提升开发体验</title>
    <id>https://github.com/MisterChen9527/note/webpack/senior/enhanceExperience.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/senior/enhanceExperience.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="sourcemap" tabindex="-1"> SourceMap</h2>
<h3 id="为什么" tabindex="-1"> 为什么</h3>
<p>开发时我们运行的代码是经过 webpack 编译后的，例如下面这个样子：</p>
<div><pre><code><span>/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */</span>
<span>/******/</span> <span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span> <span>// webpackBootstrap</span>
<span>/******/</span> 	<span>"use strict"</span><span>;</span>
<span>/******/</span> 	<span>var</span> __webpack_modules__ <span>=</span> <span>(</span><span>{</span>

<span>/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/less/index.less":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js!./src/less/index.less ***!
  \**********************************************************************************************************/</span>
<span>/***/ ((module, __webpack_exports__, __webpack_require__) => <span>{</span>

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */</span> __webpack_require__<span>.</span><span>d</span><span>(</span>__webpack_exports__<span>,</span> <span>{</span>\n<span>/* harmony export */</span>   \<span>"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".box2 {\\n  width: 100px;\\n  height: 100px;\\n  background-color: deeppink;\\n}\\n\", \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://webpack5/./src/less/index.less?./node_modules/css-loader/dist/cjs.js!./node_modules/less-loader/dist/cjs.js"</span><span>)</span><span>;</span>

<span>/***/ <span>}</span>),
// 其他省略
</span></code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>所有 css 和 js 合并成了一个文件，并且多了其他代码。此时如果代码运行出错那么提示代码错误位置我们是看不懂的。一旦将来开发代码文件很多，那么很难去发现错误出现在哪里。</p>
<p>所以我们需要更加准确的错误提示，来帮助我们更好的开发代码。</p>
<h3 id="是什么" tabindex="-1"> 是什么</h3>
<p>SourceMap（源代码映射）是一个用来生成源代码与构建后代码一一映射的文件的方案。</p>
<p>它会生成一个 xxx.map 文件，里面包含源代码和构建后代码每一行、每一列的映射关系。当构建后代码出错了，会通过 xxx.map 文件，从构建后代码出错位置找到映射后源代码出错位置，从而让浏览器提示源代码文件出错位置，帮助我们更快的找到错误根源。</p>
<h3 id="怎么用" tabindex="-1"> 怎么用</h3>
<p>通过查看<a href="https://webpack.docschina.org/configuration/devtool/" target="_blank" rel="noopener noreferrer">Webpack DevTool 文档</a>可知，SourceMap 的值有很多种情况.</p>
<p>但实际开发时我们只需要关注两种情况即可：</p>
<ul>
<li>
<p>开发模式：<code>cheap-module-source-map</code></p>
<ul>
<li>优点：打包编译速度快，只包含行映射</li>
<li>缺点：没有列映射</li>
</ul>
</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 其他省略</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>生产模式：<code>source-map</code>
<ul>
<li>优点：包含行/列映射</li>
<li>缺点：打包编译速度更慢</li>
</ul>
</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 其他省略</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">提升打包构建速度</title>
    <id>https://github.com/MisterChen9527/note/webpack/senior/liftingSpeed.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/senior/liftingSpeed.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="hotmodulereplacement" tabindex="-1"> HotModuleReplacement</h2>
<h3 id="为什么" tabindex="-1"> 为什么</h3>
<p>开发时我们修改了其中一个模块代码，Webpack 默认会将所有模块全部重新打包编译，速度很慢。</p>
<p>所以我们需要做到修改某个模块代码，就只有这个模块代码需要重新打包编译，其他模块不变，这样打包速度就能很快。</p>
<h3 id="是什么" tabindex="-1"> 是什么</h3>
<p>HotModuleReplacement（HMR/热模块替换）：在程序运行中，替换、添加或删除模块，而无需重新加载整个页面。</p>
<h3 id="怎么用" tabindex="-1"> 怎么用</h3>
<ol>
<li>基本配置</li>
</ol>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 其他省略</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span> <span>// 启动服务器域名</span>
    <span>port</span><span>:</span> <span>"3000"</span><span>,</span> <span>// 启动服务器端口号</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span> <span>// 是否自动打开浏览器</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span> <span>// 开启HMR功能（只能用于开发环境，生产环境不需要了）</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>此时 css 样式经过 style-loader 处理，已经具备 HMR 功能了。
但是 js 还不行。</p>
<ol start="2">
<li>JS 配置</li>
</ol>
<div><pre><code><span>// main.js</span>
<span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>const</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
<span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>

<span>// 判断是否支持HMR功能</span>
<span>if</span> <span>(</span>module<span>.</span>hot<span>)</span> <span>{</span>
  module<span>.</span>hot<span>.</span><span>accept</span><span>(</span><span>"./js/count.js"</span><span>,</span> <span>function</span> <span>(</span><span>count</span><span>)</span> <span>{</span>
    <span>const</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>

  module<span>.</span>hot<span>.</span><span>accept</span><span>(</span><span>"./js/sum.js"</span><span>,</span> <span>function</span> <span>(</span><span>sum</span><span>)</span> <span>{</span>
    <span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
<span>}</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>上面这样写会很麻烦，所以实际开发我们会使用其他 loader 来解决。</p>
<p>比如：<a href="https://github.com/vuejs/vue-loader" target="_blank" rel="noopener noreferrer">vue-loader</a>, <a href="https://github.com/gaearon/react-hot-loader" target="_blank" rel="noopener noreferrer">react-hot-loader</a>。</p>
<h2 id="oneof" tabindex="-1"> OneOf</h2>
<h3 id="为什么-1" tabindex="-1"> 为什么</h3>
<p>打包时每个文件都会经过所有 loader 处理，虽然因为 <code>test</code> 正则原因实际没有处理上，但是都要过一遍。比较慢。</p>
<h3 id="是什么-1" tabindex="-1"> 是什么</h3>
<p>顾名思义就是只能匹配上一个 loader, 剩下的就不匹配了。</p>
<h3 id="怎么用-1" tabindex="-1"> 怎么用</h3>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> <span>undefined</span><span>,</span> <span>// 开发模式没有输出，不需要指定输出目录</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>// clean: true, // 开发模式没有输出，不需要清空输出结果</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>// 将图片文件输出到 static/imgs 目录中</span>
              <span>// 将图片文件命名 [hash:8][ext][query]</span>
              <span>// [hash:8]: hash值取8位</span>
              <span>// [ext]: 使用之前的文件扩展名</span>
              <span>// [query]: 添加之前的query参数</span>
              <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>exclude</span><span>:</span> <span><span>/</span><span>node_modules</span><span>/</span></span><span>,</span> <span>// 排除node_modules代码不编译</span>
            <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// 开发服务器</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span> <span>// 启动服务器域名</span>
    <span>port</span><span>:</span> <span>"3000"</span><span>,</span> <span>// 启动服务器端口号</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span> <span>// 是否自动打开浏览器</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span> <span>// 开启HMR功能</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>生产模式也是如此配置。</p>
<h2 id="include-exclude" tabindex="-1"> Include/Exclude</h2>
<h3 id="为什么-2" tabindex="-1"> 为什么</h3>
<p>开发时我们需要使用第三方的库或插件，所有文件都下载到 node_modules 中了。而这些文件是不需要编译可以直接使用的。</p>
<p>所以我们在对 js 文件处理时，要排除 node_modules 下面的文件。</p>
<h3 id="是什么-2" tabindex="-1"> 是什么</h3>
<ul>
<li>include</li>
</ul>
<p>包含，只处理 xxx 文件</p>
<ul>
<li>exclude</li>
</ul>
<p>排除，除了 xxx 文件以外其他文件都处理</p>
<h3 id="怎么用-2" tabindex="-1"> 怎么用</h3>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> <span>undefined</span><span>,</span> <span>// 开发模式没有输出，不需要指定输出目录</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>// clean: true, // 开发模式没有输出，不需要清空输出结果</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>// 将图片文件输出到 static/imgs 目录中</span>
              <span>// 将图片文件命名 [hash:8][ext][query]</span>
              <span>// [hash:8]: hash值取8位</span>
              <span>// [ext]: 使用之前的文件扩展名</span>
              <span>// [query]: 添加之前的query参数</span>
              <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// 开发服务器</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span> <span>// 启动服务器域名</span>
    <span>port</span><span>:</span> <span>"3000"</span><span>,</span> <span>// 启动服务器端口号</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span> <span>// 是否自动打开浏览器</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span> <span>// 开启HMR功能</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>生产模式也是如此配置。</p>
<h2 id="cache" tabindex="-1"> Cache</h2>
<h3 id="为什么-3" tabindex="-1"> 为什么</h3>
<p>每次打包时 js 文件都要经过 Eslint 检查 和 Babel 编译，速度比较慢。</p>
<p>我们可以缓存之前的 Eslint 检查 和 Babel 编译结果，这样第二次打包时速度就会更快了。</p>
<h3 id="是什么-3" tabindex="-1"> 是什么</h3>
<p>对 Eslint 检查 和 Babel 编译结果进行缓存。</p>
<h3 id="怎么用-3" tabindex="-1"> 怎么用</h3>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> <span>undefined</span><span>,</span> <span>// 开发模式没有输出，不需要指定输出目录</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>// clean: true, // 开发模式没有输出，不需要清空输出结果</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"less-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"sass-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>[</span><span>"style-loader"</span><span>,</span> <span>"css-loader"</span><span>,</span> <span>"stylus-loader"</span><span>]</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>// 将图片文件输出到 static/imgs 目录中</span>
              <span>// 将图片文件命名 [hash:8][ext][query]</span>
              <span>// [hash:8]: hash值取8位</span>
              <span>// [ext]: 使用之前的文件扩展名</span>
              <span>// [query]: 添加之前的query参数</span>
              <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
            <span>options</span><span>:</span> <span>{</span>
              <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
              <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>// 开发服务器</span>
  <span>devServer</span><span>:</span> <span>{</span>
    <span>host</span><span>:</span> <span>"localhost"</span><span>,</span> <span>// 启动服务器域名</span>
    <span>port</span><span>:</span> <span>"3000"</span><span>,</span> <span>// 启动服务器端口号</span>
    <span>open</span><span>:</span> <span>true</span><span>,</span> <span>// 是否自动打开浏览器</span>
    <span>hot</span><span>:</span> <span>true</span><span>,</span> <span>// 开启HMR功能</span>
  <span>}</span><span>,</span>
  <span>mode</span><span>:</span> <span>"development"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"cheap-module-source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="thead" tabindex="-1"> Thead</h2>
<h3 id="为什么-4" tabindex="-1"> 为什么</h3>
<p>当项目越来越庞大时，打包速度越来越慢，甚至于需要一个下午才能打包出来代码。这个速度是比较慢的。</p>
<p>我们想要继续提升打包速度，其实就是要提升 js 的打包速度，因为其他文件都比较少。</p>
<p>而对 js 文件处理主要就是 eslint 、babel、Terser 三个工具，所以我们要提升它们的运行速度。</p>
<p>我们可以开启多进程同时处理 js 文件，这样速度就比之前的单进程打包更快了。</p>
<h3 id="是什么-4" tabindex="-1"> 是什么</h3>
<p>多进程打包：开启电脑的多个进程同时干一件事，速度更快。</p>
<p><strong>需要注意：请仅在特别耗时的操作中使用，因为每个进程启动就有大约为 600ms 左右开销。</strong></p>
<h3 id="怎么用-4" tabindex="-1"> 怎么用</h3>
<p>我们启动进程的数量就是我们 CPU 的核数。</p>
<ol>
<li>如何获取 CPU 的核数，因为每个电脑都不一样。</li>
</ol>
<div><pre><code><span>// nodejs核心模块，直接使用</span>
<span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><ol start="2">
<li>下载包</li>
</ol>
<div><pre><code>npm i thread-loader -D
</code></pre><div aria-hidden="true"><div></div></div></div><ol start="3">
<li>使用</li>
</ol>
<div><pre><code><span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>// 将图片文件输出到 static/imgs 目录中</span>
              <span>// 将图片文件命名 [hash:8][ext][query]</span>
              <span>// [hash:8]: hash值取8位</span>
              <span>// [ext]: 使用之前的文件扩展名</span>
              <span>// [query]: 添加之前的query参数</span>
              <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/main.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimize</span><span>:</span> <span>true</span><span>,</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads <span>// 开启多进程</span>
      <span>}</span><span>)</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><div>&nbsp;</div><br><br><br><br><br><div>&nbsp;</div><br><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>我们目前打包的内容都很少，所以因为启动进程开销原因，使用多进程打包实际上会显著的让我们打包时间变得很长。</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">优化代码运行性能</title>
    <id>https://github.com/MisterChen9527/note/webpack/senior/optimizePerformance.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/senior/optimizePerformance.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="code-split" tabindex="-1"> Code Split</h2>
<h3 id="为什么" tabindex="-1"> 为什么</h3>
<p>打包代码时会将所有 js 文件打包到一个文件中，体积太大了。我们如果只要渲染首页，就应该只加载首页的 js 文件，其他文件不应该加载。</p>
<p>所以我们需要将打包生成的文件进行代码分割，生成多个 js 文件，渲染哪个页面就只加载某个 js 文件，这样加载的资源就少，速度就更快。</p>
<h3 id="是什么" tabindex="-1"> 是什么</h3>
<p>代码分割（Code Split）主要做了两件事：</p>
<ol>
<li>分割文件：将打包生成的文件进行分割，生成多个 js 文件。</li>
<li>按需加载：需要哪个文件就加载哪个文件。</li>
</ol>
<h3 id="怎么用" tabindex="-1"> 怎么用</h3>
<p>代码分割实现方式有不同的方式，为了更加方便体现它们之间的差异，我们会分别创建新的文件来演示</p>
<h5 id="_1-多入口" tabindex="-1"> 1. 多入口</h5>
<ol>
<li>文件目录</li>
</ol>
<div><pre><code>├── public
├── src
|   ├── app.js
|   └── main.js
├── package.json
└── webpack.config.js
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="2">
<li>下载包</li>
</ol>
<div><pre><code>npm i webpack webpack-cli html-webpack-plugin -D
</code></pre><div aria-hidden="true"><div></div></div></div><ol start="3">
<li>新建文件</li>
</ol>
<p>内容无关紧要，主要观察打包输出的结果</p>
<ul>
<li>app.js</li>
</ul>
<div><pre><code>console<span>.</span><span>log</span><span>(</span><span>"hello app"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>main.js</li>
</ul>
<div><pre><code>console<span>.</span><span>log</span><span>(</span><span>"hello main"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><ol start="4">
<li>配置</li>
</ol>
<div><pre><code><span>// webpack.config.js</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 单入口</span>
  <span>// entry: './src/main.js',</span>
  <span>// 多入口</span>
  <span>entry</span><span>:</span> <span>{</span>
    <span>main</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
    <span>app</span><span>:</span> <span>"./src/app.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"./dist"</span><span>)</span><span>,</span>
    <span>// [name]是webpack命名规则，使用chunk的name作为输出的文件名。</span>
    <span>// 什么是chunk？打包的资源就是chunk，输出出去叫bundle。</span>
    <span>// chunk的name是啥呢？ 比如： entry中xxx: "./src/xxx.js", name就是xxx。注意是前面的xxx，和文件名无关。</span>
    <span>// 为什么需要这样命名呢？如果还是之前写法main.js，那么打包生成两个js文件都会叫做main.js会发生覆盖。(实际上会直接报错的)</span>
    <span>filename</span><span>:</span> <span>"js/[name].js"</span><span>,</span>
    <span>clear</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> <span>"./public/index.html"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="5">
<li>运行指令</li>
</ol>
<div><pre><code>npx webpack
</code></pre><div aria-hidden="true"><div></div></div></div><p>此时在 dist 目录我们能看到输出了两个 js 文件。</p>
<p>总结：配置了几个入口，至少输出几个 js 文件。</p>
<h5 id="_2-提取重复代码" tabindex="-1"> 2. 提取重复代码</h5>
<p>如果多入口文件中都引用了同一份代码，我们不希望这份代码被打包到两个文件中，导致代码重复，体积更大。</p>
<p>我们需要提取多入口的重复代码，只打包生成一个 js 文件，其他文件引用它就好。</p>
<ol>
<li>修改文件</li>
</ol>
<ul>
<li>app.js</li>
</ul>
<div><pre><code><span>import</span> <span>{</span> sum <span>}</span> <span>from</span> <span>"./math"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>"hello app"</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><ul>
<li>main.js</li>
</ul>
<div><pre><code><span>import</span> <span>{</span> sum <span>}</span> <span>from</span> <span>"./math"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>"hello main"</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>)</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><ul>
<li>math.js</li>
</ul>
<div><pre><code><span>export</span> <span>const</span> <span>sum</span> <span>=</span> <span>(</span><span><span>...</span>args</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> args<span>.</span><span>reduce</span><span>(</span><span>(</span><span>p<span>,</span> c</span><span>)</span> <span>=></span> p <span>+</span> c<span>,</span> <span>0</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><ol start="2">
<li>修改配置文件</li>
</ol>
<div><pre><code><span>// webpack.config.js</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 单入口</span>
  <span>// entry: './src/main.js',</span>
  <span>// 多入口</span>
  <span>entry</span><span>:</span> <span>{</span>
    <span>main</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
    <span>app</span><span>:</span> <span>"./src/app.js"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"./dist"</span><span>)</span><span>,</span>
    <span>// [name]是webpack命名规则，使用chunk的name作为输出的文件名。</span>
    <span>// 什么是chunk？打包的资源就是chunk，输出出去叫bundle。</span>
    <span>// chunk的name是啥呢？ 比如： entry中xxx: "./src/xxx.js", name就是xxx。注意是前面的xxx，和文件名无关。</span>
    <span>// 为什么需要这样命名呢？如果还是之前写法main.js，那么打包生成两个js文件都会叫做main.js会发生覆盖。(实际上会直接报错的)</span>
    <span>filename</span><span>:</span> <span>"js/[name].js"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> <span>"./public/index.html"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span> <span>// 对所有模块都进行分割</span>
      <span>// 以下是默认值</span>
      <span>// minSize: 20000, // 分割代码最小的大小</span>
      <span>// minRemainingSize: 0, // 类似于minSize，最后确保提取的文件大小不能为0</span>
      <span>// minChunks: 1, // 至少被引用的次数，满足条件才会代码分割</span>
      <span>// maxAsyncRequests: 30, // 按需加载时并行加载的文件的最大数量</span>
      <span>// maxInitialRequests: 30, // 入口js文件最大并行请求数量</span>
      <span>// enforceSizeThreshold: 50000, // 超过50kb一定会单独打包（此时会忽略minRemainingSize、maxAsyncRequests、maxInitialRequests）</span>
      <span>// cacheGroups: { // 组，哪些模块要打包到一个组</span>
      <span>//   defaultVendors: { // 组名</span>
      <span>//     test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块</span>
      <span>//     priority: -10, // 权重（越大越高）</span>
      <span>//     reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块</span>
      <span>//   },</span>
      <span>//   default: { // 其他没有写的配置会使用上面的默认值</span>
      <span>//     minChunks: 2, // 这里的minChunks权重更大</span>
      <span>//     priority: -20,</span>
      <span>//     reuseExistingChunk: true,</span>
      <span>//   },</span>
      <span>// },</span>
      <span>// 修改配置</span>
      <span>cacheGroups</span><span>:</span> <span>{</span>
        <span>// 组，哪些模块要打包到一个组</span>
        <span>// defaultVendors: { // 组名</span>
        <span>//   test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块</span>
        <span>//   priority: -10, // 权重（越大越高）</span>
        <span>//   reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块</span>
        <span>// },</span>
        <span>default</span><span>:</span> <span>{</span>
          <span>// 其他没有写的配置会使用上面的默认值</span>
          <span>minSize</span><span>:</span> <span>0</span><span>,</span> <span>// 我们定义的文件体积太小了，所以要改打包的最小文件体积</span>
          <span>minChunks</span><span>:</span> <span>2</span><span>,</span>
          <span>priority</span><span>:</span> <span>-</span><span>20</span><span>,</span>
          <span>reuseExistingChunk</span><span>:</span> <span>true</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="3">
<li>运行指令</li>
</ol>
<div><pre><code>npx webpack
</code></pre><div aria-hidden="true"><div></div></div></div><p>此时我们会发现生成 3 个 js 文件，其中有一个就是提取的公共模块。</p>
<h5 id="_3-按需加载-动态导入" tabindex="-1"> 3. 按需加载，动态导入</h5>
<p>想要实现按需加载，动态导入模块。还需要额外配置：</p>
<ol>
<li>修改文件</li>
</ol>
<ul>
<li>main.js</li>
</ul>
<div><pre><code>console<span>.</span><span>log</span><span>(</span><span>"hello main"</span><span>)</span><span>;</span>

document<span>.</span><span>getElementById</span><span>(</span><span>"btn"</span><span>)</span><span>.</span><span>onclick</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>// 动态导入 --> 实现按需加载</span>
  <span>// 即使只被引用了一次，也会代码分割</span>
  <span>import</span><span>(</span><span>"./math.js"</span><span>)</span><span>.</span><span>then</span><span>(</span><span>(</span><span><span>{</span> sum <span>}</span></span><span>)</span> <span>=></span> <span>{</span>
    <span>alert</span><span>(</span><span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>)</span><span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>app.js</li>
</ul>
<div><pre><code>console<span>.</span><span>log</span><span>(</span><span>"hello app"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>public/index.html</li>
</ul>
<div><pre><code><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>></span></span>
<span><span><span>&lt;</span>html</span> <span>lang</span><span><span>=</span><span>"</span>en<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>head</span><span>></span></span>
    <span><span><span>&lt;</span>meta</span> <span>charset</span><span><span>=</span><span>"</span>UTF-8<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>http-equiv</span><span><span>=</span><span>"</span>X-UA-Compatible<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>IE=edge<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>"</span>viewport<span>"</span></span> <span>content</span><span><span>=</span><span>"</span>width=device-width, initial-scale=1.0<span>"</span></span> <span>/></span></span>
    <span><span><span>&lt;</span>title</span><span>></span></span>Code Split<span><span><span>&lt;/</span>title</span><span>></span></span>
  <span><span><span>&lt;/</span>head</span><span>></span></span>
  <span><span><span>&lt;</span>body</span><span>></span></span>
    <span><span><span>&lt;</span>h1</span><span>></span></span>hello webpack<span><span><span>&lt;/</span>h1</span><span>></span></span>
    <span><span><span>&lt;</span>button</span> <span>id</span><span><span>=</span><span>"</span>btn<span>"</span></span><span>></span></span>计算<span><span><span>&lt;/</span>button</span><span>></span></span>
  <span><span><span>&lt;/</span>body</span><span>></span></span>
<span><span><span>&lt;/</span>html</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="2">
<li>运行指令</li>
</ol>
<div><pre><code>npx webpack
</code></pre><div aria-hidden="true"><div></div></div></div><p>我们可以发现，一旦通过 import 动态导入语法导入模块，模块就被代码分割，同时也能按需加载了。</p>
<h5 id="_4-单入口" tabindex="-1"> 4. 单入口</h5>
<p>开发时我们可能是单页面应用（SPA），只有一个入口（单入口）。那么我们需要这样配置：</p>
<div><pre><code><span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 单入口</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>// 多入口</span>
  <span>// entry: {</span>
  <span>//   main: "./src/main.js",</span>
  <span>//   app: "./src/app.js",</span>
  <span>// },</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"./dist"</span><span>)</span><span>,</span>
    <span>// [name]是webpack命名规则，使用chunk的name作为输出的文件名。</span>
    <span>// 什么是chunk？打包的资源就是chunk，输出出去叫bundle。</span>
    <span>// chunk的name是啥呢？ 比如： entry中xxx: "./src/xxx.js", name就是xxx。注意是前面的xxx，和文件名无关。</span>
    <span>// 为什么需要这样命名呢？如果还是之前写法main.js，那么打包生成两个js文件都会叫做main.js会发生覆盖。(实际上会直接报错的)</span>
    <span>filename</span><span>:</span> <span>"js/[name].js"</span><span>,</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>template</span><span>:</span> <span>"./public/index.html"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span> <span>// 对所有模块都进行分割</span>
      <span>// 以下是默认值</span>
      <span>// minSize: 20000, // 分割代码最小的大小</span>
      <span>// minRemainingSize: 0, // 类似于minSize，最后确保提取的文件大小不能为0</span>
      <span>// minChunks: 1, // 至少被引用的次数，满足条件才会代码分割</span>
      <span>// maxAsyncRequests: 30, // 按需加载时并行加载的文件的最大数量</span>
      <span>// maxInitialRequests: 30, // 入口js文件最大并行请求数量</span>
      <span>// enforceSizeThreshold: 50000, // 超过50kb一定会单独打包（此时会忽略minRemainingSize、maxAsyncRequests、maxInitialRequests）</span>
      <span>// cacheGroups: { // 组，哪些模块要打包到一个组</span>
      <span>//   defaultVendors: { // 组名</span>
      <span>//     test: /[\\/]node_modules[\\/]/, // 需要打包到一起的模块</span>
      <span>//     priority: -10, // 权重（越大越高）</span>
      <span>//     reuseExistingChunk: true, // 如果当前 chunk 包含已从主 bundle 中拆分出的模块，则它将被重用，而不是生成新的模块</span>
      <span>//   },</span>
      <span>//   default: { // 其他没有写的配置会使用上面的默认值</span>
      <span>//     minChunks: 2, // 这里的minChunks权重更大</span>
      <span>//     priority: -20,</span>
      <span>//     reuseExistingChunk: true,</span>
      <span>//   },</span>
      <span>// },</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h6 id="_5-更新配置" tabindex="-1"> 5. 更新配置</h6>
<p>最终我们会使用单入口+代码分割+动态导入方式来进行配置。更新之前的配置文件。</p>
<div><pre><code><span>// webpack.prod.js</span>
<span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>// 将图片文件输出到 static/imgs 目录中</span>
              <span>// 将图片文件命名 [hash:8][ext][query]</span>
              <span>// [hash:8]: hash值取8位</span>
              <span>// [ext]: 使用之前的文件扩展名</span>
              <span>// [query]: 添加之前的query参数</span>
              <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                  <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
                  <span>plugins</span><span>:</span> <span>[</span><span>"@babel/plugin-transform-runtime"</span><span>]</span><span>,</span> <span>// 减少代码体积</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/main.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads<span>,</span> <span>// 开启多进程</span>
      <span>}</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span> <span>// 对所有模块都进行分割</span>
      <span>// 其他内容用默认配置即可</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h5 id="_6-给动态导入文件取名称" tabindex="-1"> 6. 给动态导入文件取名称</h5>
<ol>
<li>修改文件</li>
</ol>
<ul>
<li>main.js</li>
</ul>
<div><pre><code><span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>

<span>// 以下代码生产模式下会删除</span>
<span>if</span> <span>(</span>module<span>.</span>hot<span>)</span> <span>{</span>
  module<span>.</span>hot<span>.</span><span>accept</span><span>(</span><span>"./js/sum.js"</span><span>,</span> <span>function</span> <span>(</span><span>sum</span><span>)</span> <span>{</span>
    <span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
    console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
<span>}</span>

document<span>.</span><span>getElementById</span><span>(</span><span>"btn"</span><span>)</span><span>.</span><span>onClick</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>// eslint会对动态导入语法报错，需要修改eslint配置文件</span>
  <span>// webpackChunkName: "math"：这是webpack动态导入模块命名的方式</span>
  <span>// "math"将来就会作为[name]的值显示。</span>
  <span>import</span><span>(</span><span>/* webpackChunkName: "math" */</span> <span>"./js/math.js"</span><span>)</span><span>.</span><span>then</span><span>(</span><span>(</span><span><span>{</span> count <span>}</span></span><span>)</span> <span>=></span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="2">
<li>eslint 配置</li>
</ol>
<ul>
<li>下载包</li>
</ul>
<div><pre><code>npm i eslint-plugin-import -D
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>配置</li>
</ul>
<div><pre><code><span>// .eslintrc.js</span>
module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 继承 Eslint 规则</span>
  <span>extends</span><span>:</span> <span>[</span><span>"eslint:recommended"</span><span>]</span><span>,</span>
  <span>env</span><span>:</span> <span>{</span>
    <span>node</span><span>:</span> <span>true</span><span>,</span> <span>// 启用node中全局变量</span>
    <span>browser</span><span>:</span> <span>true</span><span>,</span> <span>// 启用浏览器中全局变量</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>"import"</span><span>]</span><span>,</span> <span>// 解决动态导入import语法报错问题 --> 实际使用eslint-plugin-import的规则解决的</span>
  <span>parserOptions</span><span>:</span> <span>{</span>
    <span>ecmaVersion</span><span>:</span> <span>6</span><span>,</span>
    <span>sourceType</span><span>:</span> <span>"module"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>rules</span><span>:</span> <span>{</span>
    <span>"no-var"</span><span>:</span> <span>2</span><span>,</span> <span>// 不能使用 var 定义变量</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol>
<li>统一命名配置</li>
</ol>
<div><pre><code><span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].js"</span><span>,</span> <span>// 入口文件打包输出资源命名方式</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].chunk.js"</span><span>,</span> <span>// 动态导入输出资源命名方式</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/media/[name].[hash][ext]"</span><span>,</span> <span>// 图片、字体等资源命名方式（注意用hash）</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>// generator: {</span>
            <span>//   // 将图片文件输出到 static/imgs 目录中</span>
            <span>//   // 将图片文件命名 [hash:8][ext][query]</span>
            <span>//   // [hash:8]: hash值取8位</span>
            <span>//   // [ext]: 使用之前的文件扩展名</span>
            <span>//   // [query]: 添加之前的query参数</span>
            <span>//   filename: "static/imgs/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>// generator: {</span>
            <span>//   filename: "static/media/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                  <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
                  <span>plugins</span><span>:</span> <span>[</span><span>"@babel/plugin-transform-runtime"</span><span>]</span><span>,</span> <span>// 减少代码体积</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/[name].css"</span><span>,</span>
      <span>chunkFilename</span><span>:</span> <span>"static/css/[name].chunk.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads<span>,</span> <span>// 开启多进程</span>
      <span>}</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span> <span>// 对所有模块都进行分割</span>
      <span>// 其他内容用默认配置即可</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="3">
<li>运行指令</li>
</ol>
<div><pre><code>npx webpack
</code></pre><div aria-hidden="true"><div></div></div></div><p>观察打包输出 js 文件名称。</p>
<h2 id="preload-prefetch" tabindex="-1"> Preload / Prefetch</h2>
<h3 id="为什么-1" tabindex="-1"> 为什么</h3>
<p>我们前面已经做了代码分割，同时会使用 import 动态导入语法来进行代码按需加载（我们也叫懒加载，比如路由懒加载就是这样实现的）。</p>
<p>但是加载速度还不够好，比如：是用户点击按钮时才加载这个资源的，如果资源体积很大，那么用户会感觉到明显卡顿效果。</p>
<p>我们想在浏览器空闲时间，加载后续需要使用的资源。我们就需要用上 <code>Preload</code> 或 <code>Prefetch</code> 技术。</p>
<h3 id="是什么-1" tabindex="-1"> 是什么</h3>
<ul>
<li>
<p><code>Preload</code>：告诉浏览器立即加载资源。</p>
</li>
<li>
<p><code>Prefetch</code>：告诉浏览器在空闲时才开始加载资源。</p>
</li>
</ul>
<p>它们共同点：</p>
<ul>
<li>都只会加载资源，并不执行。</li>
<li>都有缓存。</li>
</ul>
<p>它们区别：</p>
<ul>
<li><code>Preload</code>加载优先级高，<code>Prefetch</code>加载优先级低。</li>
<li><code>Preload</code>只能加载当前页面需要使用的资源，<code>Prefetch</code>可以加载当前页面资源，也可以加载下一个页面需要使用的资源。</li>
</ul>
<p>总结：</p>
<ul>
<li>当前页面优先级高的资源用 <code>Preload</code> 加载。</li>
<li>下一个页面需要使用的资源用 <code>Prefetch</code> 加载。</li>
</ul>
<p>它们的问题：兼容性较差。</p>
<ul>
<li>我们可以去 <a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">Can I Use</a> 网站查询 API 的兼容性问题。</li>
<li><code>Preload</code> 相对于 <code>Prefetch</code> 兼容性好一点。</li>
</ul>
<h3 id="怎么用-1" tabindex="-1"> 怎么用</h3>
<ol>
<li>下载包</li>
</ol>
<div><pre><code>npm i @vue/preload-webpack-plugin -D
</code></pre><div aria-hidden="true"><div></div></div></div><ol start="2">
<li>配置 webpack.prod.js</li>
</ol>
<div><pre><code><span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> PreloadWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"@vue/preload-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].js"</span><span>,</span> <span>// 入口文件打包输出资源命名方式</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].chunk.js"</span><span>,</span> <span>// 动态导入输出资源命名方式</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/media/[name].[hash][ext]"</span><span>,</span> <span>// 图片、字体等资源命名方式（注意用hash）</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>// generator: {</span>
            <span>//   // 将图片文件输出到 static/imgs 目录中</span>
            <span>//   // 将图片文件命名 [hash:8][ext][query]</span>
            <span>//   // [hash:8]: hash值取8位</span>
            <span>//   // [ext]: 使用之前的文件扩展名</span>
            <span>//   // [query]: 添加之前的query参数</span>
            <span>//   filename: "static/imgs/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>// generator: {</span>
            <span>//   filename: "static/media/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                  <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
                  <span>plugins</span><span>:</span> <span>[</span><span>"@babel/plugin-transform-runtime"</span><span>]</span><span>,</span> <span>// 减少代码体积</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/[name].css"</span><span>,</span>
      <span>chunkFilename</span><span>:</span> <span>"static/css/[name].chunk.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
    <span>new</span> <span>PreloadWebpackPlugin</span><span>(</span><span>{</span>
      <span>rel</span><span>:</span> <span>"preload"</span><span>,</span> <span>// preload兼容性更好</span>
      <span>as</span><span>:</span> <span>"script"</span><span>,</span>
      <span>// rel: 'prefetch' // prefetch兼容性更差</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads<span>,</span> <span>// 开启多进程</span>
      <span>}</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span> <span>// 对所有模块都进行分割</span>
      <span>// 其他内容用默认配置即可</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="network-cache" tabindex="-1"> Network Cache</h2>
<h3 id="为什么-2" tabindex="-1"> 为什么</h3>
<p>将来开发时我们对静态资源会使用缓存来优化，这样浏览器第二次请求资源就能读取缓存了，速度很快。</p>
<p>但是这样的话就会有一个问题, 因为前后输出的文件名是一样的，都叫 main.js，一旦将来发布新版本，因为文件名没有变化导致浏览器会直接读取缓存，不会加载新资源，项目也就没法更新了。</p>
<p>所以我们从文件名入手，确保更新前后文件名不一样，这样就可以做缓存了。</p>
<h3 id="是什么-2" tabindex="-1"> 是什么</h3>
<p>它们都会生成一个唯一的 hash 值。</p>
<ul>
<li>fullhash（webpack4 是 hash）</li>
</ul>
<p>每次修改任何一个文件，所有文件名的 hash 至都将改变。所以一旦修改了任何一个文件，整个项目的文件缓存都将失效。</p>
<ul>
<li>chunkhash</li>
</ul>
<p>根据不同的入口文件(Entry)进行依赖文件解析、构建对应的 chunk，生成对应的哈希值。我们 js 和 css 是同一个引入，会共享一个 hash 值。</p>
<ul>
<li>contenthash</li>
</ul>
<p>根据文件内容生成 hash 值，只有文件内容变化了，hash 值才会变化。所有文件 hash 值是独享且不同的。</p>
<h3 id="怎么用-2" tabindex="-1"> 怎么用</h3>
<div><pre><code><span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> PreloadWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"@vue/preload-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>// [contenthash:8]使用contenthash，取8位长度</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].[contenthash:8].js"</span><span>,</span> <span>// 入口文件打包输出资源命名方式</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].[contenthash:8].chunk.js"</span><span>,</span> <span>// 动态导入输出资源命名方式</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/media/[name].[hash][ext]"</span><span>,</span> <span>// 图片、字体等资源命名方式（注意用hash）</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>// generator: {</span>
            <span>//   // 将图片文件输出到 static/imgs 目录中</span>
            <span>//   // 将图片文件命名 [hash:8][ext][query]</span>
            <span>//   // [hash:8]: hash值取8位</span>
            <span>//   // [ext]: 使用之前的文件扩展名</span>
            <span>//   // [query]: 添加之前的query参数</span>
            <span>//   filename: "static/imgs/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>// generator: {</span>
            <span>//   filename: "static/media/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                  <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
                  <span>plugins</span><span>:</span> <span>[</span><span>"@babel/plugin-transform-runtime"</span><span>]</span><span>,</span> <span>// 减少代码体积</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:8].css"</span><span>,</span>
      <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:8].chunk.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
    <span>new</span> <span>PreloadWebpackPlugin</span><span>(</span><span>{</span>
      <span>rel</span><span>:</span> <span>"preload"</span><span>,</span> <span>// preload兼容性更好</span>
      <span>as</span><span>:</span> <span>"script"</span><span>,</span>
      <span>// rel: 'prefetch' // prefetch兼容性更差</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads<span>,</span> <span>// 开启多进程</span>
      <span>}</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span> <span>// 对所有模块都进行分割</span>
      <span>// 其他内容用默认配置即可</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>问题：</li>
</ul>
<p>当我们修改 math.js 文件再重新打包的时候，因为 contenthash 原因，math.js 文件 hash 值发生了变化（这是正常的）。</p>
<p>但是 main.js 文件的 hash 值也发生了变化，这会导致 main.js 的缓存失效。明明我们只修改 math.js, 为什么 main.js 也会变身变化呢？</p>
<ul>
<li>
<p>原因：</p>
<ul>
<li>更新前：math.xxx.js, main.js 引用的 math.xxx.js</li>
<li>更新后：math.yyy.js, main.js 引用的 math.yyy.js, 文件名发生了变化，间接导致 main.js 也发生了变化</li>
</ul>
</li>
<li>
<p>解决：</p>
</li>
</ul>
<p>将 hash 值单独保管在一个 runtime 文件中。</p>
<p>我们最终输出三个文件：main、math、runtime。当 math 文件发送变化，变化的是 math 和 runtime 文件，main 不变。</p>
<p>runtime 文件只保存文件的 hash 值和它们与文件关系，整个文件体积就比较小，所以变化重新请求的代价也小。</p>
<div><pre><code><span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> PreloadWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"@vue/preload-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>// [contenthash:8]使用contenthash，取8位长度</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].[contenthash:8].js"</span><span>,</span> <span>// 入口文件打包输出资源命名方式</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].[contenthash:8].chunk.js"</span><span>,</span> <span>// 动态导入输出资源命名方式</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/media/[name].[hash][ext]"</span><span>,</span> <span>// 图片、字体等资源命名方式（注意用hash）</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>// generator: {</span>
            <span>//   // 将图片文件输出到 static/imgs 目录中</span>
            <span>//   // 将图片文件命名 [hash:8][ext][query]</span>
            <span>//   // [hash:8]: hash值取8位</span>
            <span>//   // [ext]: 使用之前的文件扩展名</span>
            <span>//   // [query]: 添加之前的query参数</span>
            <span>//   filename: "static/imgs/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>// generator: {</span>
            <span>//   filename: "static/media/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                  <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
                  <span>plugins</span><span>:</span> <span>[</span><span>"@babel/plugin-transform-runtime"</span><span>]</span><span>,</span> <span>// 减少代码体积</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:8].css"</span><span>,</span>
      <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:8].chunk.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
    <span>new</span> <span>PreloadWebpackPlugin</span><span>(</span><span>{</span>
      <span>rel</span><span>:</span> <span>"preload"</span><span>,</span> <span>// preload兼容性更好</span>
      <span>as</span><span>:</span> <span>"script"</span><span>,</span>
      <span>// rel: 'prefetch' // prefetch兼容性更差</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads<span>,</span> <span>// 开启多进程</span>
      <span>}</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span> <span>// 对所有模块都进行分割</span>
      <span>// 其他内容用默认配置即可</span>
    <span>}</span><span>,</span>
    <span>// 提取runtime文件</span>
    <span>runtimeChunk</span><span>:</span> <span>{</span>
      <span>name</span><span>:</span> <span>(</span><span>entrypoint</span><span>)</span> <span>=></span> <span><span>`</span><span>runtime~</span><span><span>${</span>entrypoint<span>.</span>name<span>}</span></span><span>`</span></span><span>,</span> <span>// runtime文件命名规则</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="core-js" tabindex="-1"> Core-js</h2>
<h3 id="为什么-3" tabindex="-1"> 为什么</h3>
<p>过去我们使用 babel 对 js 代码进行了兼容性处理，其中使用@babel/preset-env 智能预设来处理兼容性问题。</p>
<p>它能将 ES6 的一些语法进行编译转换，比如箭头函数、点点点运算符等。但是如果是 async 函数、promise 对象、数组的一些方法（includes）等，它没办法处理。</p>
<p>所以此时我们 js 代码仍然存在兼容性问题，一旦遇到低版本浏览器会直接报错。所以我们想要将 js 兼容性问题彻底解决</p>
<h3 id="是什么-3" tabindex="-1"> 是什么</h3>
<p><code>core-js</code> 是专门用来做 ES6 以及以上 API 的 <code>polyfill</code>。</p>
<p><code>polyfill</code>翻译过来叫做垫片/补丁。就是用社区上提供的一段代码，让我们在不兼容某些新特性的浏览器上，使用该新特性。</p>
<h3 id="怎么用-3" tabindex="-1"> 怎么用</h3>
<ol>
<li>修改 main.js</li>
</ol>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>const</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
<span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
<span>// 添加promise代码</span>
<span>const</span> promise <span>=</span> Promise<span>.</span><span>resolve</span><span>(</span><span>)</span><span>;</span>
promise<span>.</span><span>then</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"hello promise"</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>此时 Eslint 会对 Promise 报错。</p>
<ol start="2">
<li>修改配置文件</li>
</ol>
<ul>
<li>下载包</li>
</ul>
<div><pre><code>npm i @babel/eslint-parser -D
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>.eslintrc.js</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 继承 Eslint 规则</span>
  <span>extends</span><span>:</span> <span>[</span><span>"eslint:recommended"</span><span>]</span><span>,</span>
  <span>parser</span><span>:</span> <span>"@babel/eslint-parser"</span><span>,</span> <span>// 支持最新的最终 ECMAScript 标准</span>
  <span>env</span><span>:</span> <span>{</span>
    <span>node</span><span>:</span> <span>true</span><span>,</span> <span>// 启用node中全局变量</span>
    <span>browser</span><span>:</span> <span>true</span><span>,</span> <span>// 启用浏览器中全局变量</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span><span>"import"</span><span>]</span><span>,</span> <span>// 解决动态导入import语法报错问题 --> 实际使用eslint-plugin-import的规则解决的</span>
  <span>parserOptions</span><span>:</span> <span>{</span>
    <span>ecmaVersion</span><span>:</span> <span>6</span><span>,</span> <span>// es6</span>
    <span>sourceType</span><span>:</span> <span>"module"</span><span>,</span> <span>// es module</span>
  <span>}</span><span>,</span>
  <span>rules</span><span>:</span> <span>{</span>
    <span>"no-var"</span><span>:</span> <span>2</span><span>,</span> <span>// 不能使用 var 定义变量</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="3">
<li>运行指令</li>
</ol>
<div><pre><code>npm run build
</code></pre><div aria-hidden="true"><div></div></div></div><p>此时观察打包输出的 js 文件，我们发现 Promise 语法并没有编译转换，所以我们需要使用 <code>core-js</code> 来进行 <code>polyfill</code>。</p>
<ol start="4">
<li>使用<code>core-js</code></li>
</ol>
<ul>
<li>下载包</li>
</ul>
<div><pre><code>npm i core-js
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>手动全部引入</li>
</ul>
<div><pre><code><span>import</span> <span>"core-js"</span><span>;</span>
<span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>const</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
<span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
<span>// 添加promise代码</span>
<span>const</span> promise <span>=</span> Promise<span>.</span><span>resolve</span><span>(</span><span>)</span><span>;</span>
promise<span>.</span><span>then</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"hello promise"</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>这样引入会将所有兼容性代码全部引入，体积太大了。我们只想引入 promise 的 <code>polyfill</code>。</p>
<ul>
<li>手动按需引入</li>
</ul>
<div><pre><code><span>import</span> <span>"core-js/es/promise"</span><span>;</span>
<span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>const</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
<span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
<span>// 添加promise代码</span>
<span>const</span> promise <span>=</span> Promise<span>.</span><span>resolve</span><span>(</span><span>)</span><span>;</span>
promise<span>.</span><span>then</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"hello promise"</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>只引入打包 promise 的 <code>polyfill</code>，打包体积更小。但是将来如果还想使用其他语法，我需要手动引入库很麻烦。</p>
<ul>
<li>
<p>自动按需引入</p>
<ul>
<li>main.js</li>
</ul>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>const</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
<span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
<span>// 添加promise代码</span>
<span>const</span> promise <span>=</span> Promise<span>.</span><span>resolve</span><span>(</span><span>)</span><span>;</span>
promise<span>.</span><span>then</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"hello promise"</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>babel.config.js</li>
</ul>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>// 智能预设：能够编译ES6语法</span>
  <span>presets</span><span>:</span> <span>[</span>
    <span>[</span>
      <span>"@babel/preset-env"</span><span>,</span>
      <span>// 按需加载core-js的polyfill</span>
      <span>{</span> <span>useBuiltIns</span><span>:</span> <span>"usage"</span><span>,</span> <span>corejs</span><span>:</span> <span>{</span> <span>version</span><span>:</span> <span>"3"</span><span>,</span> <span>proposals</span><span>:</span> <span>true</span> <span>}</span> <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div></li>
</ul>
<p>此时就会自动根据我们代码中使用的语法，来按需加载相应的 <code>polyfill</code> 了。</p>
<h2 id="pwa" tabindex="-1"> PWA</h2>
<h3 id="为什么-4" tabindex="-1"> 为什么</h3>
<p>开发 Web App 项目，项目一旦处于网络离线情况，就没法访问了。</p>
<p>我们希望给项目提供离线体验。</p>
<h3 id="是什么-4" tabindex="-1"> 是什么</h3>
<p>渐进式网络应用程序(progressive web application - PWA)：是一种可以提供类似于 native app(原生应用程序) 体验的 Web App 的技术。</p>
<p>其中最重要的是，在 <strong>离线(offline)</strong> 时应用程序能够继续运行功能。</p>
<p>内部通过 Service Workers 技术实现的。</p>
<h3 id="怎么用-4" tabindex="-1"> 怎么用</h3>
<ol>
<li>下载包</li>
</ol>
<div><pre><code>npm i workbox-webpack-plugin -D
</code></pre><div aria-hidden="true"><div></div></div></div><ol start="2">
<li>修改配置文件</li>
</ol>
<div><pre><code><span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> PreloadWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"@vue/preload-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> WorkboxPlugin <span>=</span> <span>require</span><span>(</span><span>"workbox-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>// [contenthash:8]使用contenthash，取8位长度</span>
    <span>filename</span><span>:</span> <span>"static/js/[name].[contenthash:8].js"</span><span>,</span> <span>// 入口文件打包输出资源命名方式</span>
    <span>chunkFilename</span><span>:</span> <span>"static/js/[name].[contenthash:8].chunk.js"</span><span>,</span> <span>// 动态导入输出资源命名方式</span>
    <span>assetModuleFilename</span><span>:</span> <span>"static/media/[name].[hash][ext]"</span><span>,</span> <span>// 图片、字体等资源命名方式（注意用hash）</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>// generator: {</span>
            <span>//   // 将图片文件输出到 static/imgs 目录中</span>
            <span>//   // 将图片文件命名 [hash:8][ext][query]</span>
            <span>//   // [hash:8]: hash值取8位</span>
            <span>//   // [ext]: 使用之前的文件扩展名</span>
            <span>//   // [query]: 添加之前的query参数</span>
            <span>//   filename: "static/imgs/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>// generator: {</span>
            <span>//   filename: "static/media/[hash:8][ext][query]",</span>
            <span>// },</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                  <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
                  <span>plugins</span><span>:</span> <span>[</span><span>"@babel/plugin-transform-runtime"</span><span>]</span><span>,</span> <span>// 减少代码体积</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/[name].[contenthash:8].css"</span><span>,</span>
      <span>chunkFilename</span><span>:</span> <span>"static/css/[name].[contenthash:8].chunk.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
    <span>new</span> <span>PreloadWebpackPlugin</span><span>(</span><span>{</span>
      <span>rel</span><span>:</span> <span>"preload"</span><span>,</span> <span>// preload兼容性更好</span>
      <span>as</span><span>:</span> <span>"script"</span><span>,</span>
      <span>// rel: 'prefetch' // prefetch兼容性更差</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>WorkboxPlugin<span>.</span>GenerateSW</span><span>(</span><span>{</span>
      <span>// 这些选项帮助快速启用 ServiceWorkers</span>
      <span>// 不允许遗留任何“旧的” ServiceWorkers</span>
      <span>clientsClaim</span><span>:</span> <span>true</span><span>,</span>
      <span>skipWaiting</span><span>:</span> <span>true</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads<span>,</span> <span>// 开启多进程</span>
      <span>}</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
    <span>// 代码分割配置</span>
    <span>splitChunks</span><span>:</span> <span>{</span>
      <span>chunks</span><span>:</span> <span>"all"</span><span>,</span> <span>// 对所有模块都进行分割</span>
      <span>// 其他内容用默认配置即可</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="3">
<li>修改 main.js</li>
</ol>
<div><pre><code><span>import</span> count <span>from</span> <span>"./js/count"</span><span>;</span>
<span>import</span> sum <span>from</span> <span>"./js/sum"</span><span>;</span>
<span>// 引入资源，Webpack才会对其打包</span>
<span>import</span> <span>"./css/iconfont.css"</span><span>;</span>
<span>import</span> <span>"./css/index.css"</span><span>;</span>
<span>import</span> <span>"./less/index.less"</span><span>;</span>
<span>import</span> <span>"./sass/index.sass"</span><span>;</span>
<span>import</span> <span>"./sass/index.scss"</span><span>;</span>
<span>import</span> <span>"./styl/index.styl"</span><span>;</span>

<span>const</span> result1 <span>=</span> <span>count</span><span>(</span><span>2</span><span>,</span> <span>1</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result1<span>)</span><span>;</span>
<span>const</span> result2 <span>=</span> <span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>result2<span>)</span><span>;</span>
<span>// 添加promise代码</span>
<span>const</span> promise <span>=</span> Promise<span>.</span><span>resolve</span><span>(</span><span>)</span><span>;</span>
promise<span>.</span><span>then</span><span>(</span><span>(</span><span>)</span> <span>=></span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"hello promise"</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>

<span>const</span> arr <span>=</span> <span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>]</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>arr<span>.</span><span>includes</span><span>(</span><span>5</span><span>)</span><span>)</span><span>;</span>

<span>if</span> <span>(</span><span>"serviceWorker"</span> <span>in</span> navigator<span>)</span> <span>{</span>
  window<span>.</span><span>addEventListener</span><span>(</span><span>"load"</span><span>,</span> <span>(</span><span>)</span> <span>=></span> <span>{</span>
    navigator<span>.</span>serviceWorker
      <span>.</span><span>register</span><span>(</span><span>"/service-worker.js"</span><span>)</span>
      <span>.</span><span>then</span><span>(</span><span>(</span><span>registration</span><span>)</span> <span>=></span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"SW registered: "</span><span>,</span> registration<span>)</span><span>;</span>
      <span>}</span><span>)</span>
      <span>.</span><span>catch</span><span>(</span><span>(</span><span>registrationError</span><span>)</span> <span>=></span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>"SW registration failed: "</span><span>,</span> registrationError<span>)</span><span>;</span>
      <span>}</span><span>)</span><span>;</span>
  <span>}</span><span>)</span><span>;</span>
<span>}</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="4">
<li>运行指令</li>
</ol>
<div><pre><code>npm run build
</code></pre><div aria-hidden="true"><div></div></div></div><p>此时如果直接通过 VSCode 访问打包后页面，在浏览器控制台会发现 <code>SW registration failed</code>。</p>
<p>因为我们打开的访问路径是：<code>http://127.0.0.1:5500/dist/index.html</code>。此时页面会去请求 <code>service-worker.js</code> 文件，请求路径是：<code>http://127.0.0.1:5500/service-worker.js</code>，这样找不到会 404。</p>
<p>实际 <code>service-worker.js</code> 文件路径是：<code>http://127.0.0.1:5500/dist/service-worker.js</code>。</p>
<ol start="5">
<li>解决路径问题</li>
</ol>
<ul>
<li>下载包</li>
</ul>
<div><pre><code>npm i serve -g
</code></pre><div aria-hidden="true"><div></div></div></div><p>serve 也是用来启动开发服务器来部署代码查看效果的。</p>
<ul>
<li>运行指令</li>
</ul>
<div><pre><code>serve dist
</code></pre><div aria-hidden="true"><div></div></div></div><p>此时通过 serve 启动的服务器我们 service-worker 就能注册成功了。</p>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">减少代码体积</title>
    <id>https://github.com/MisterChen9527/note/webpack/senior/reduceVolume.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/senior/reduceVolume.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<h2 id="tree-shaking" tabindex="-1"> Tree Shaking</h2>
<h3 id="为什么" tabindex="-1"> 为什么</h3>
<p>开发时我们定义了一些工具函数库，或者引用第三方工具函数库或组件库。</p>
<p>如果没有特殊处理的话我们打包时会引入整个库，但是实际上可能我们可能只用上极小部分的功能。</p>
<p>这样将整个库都打包进来，体积就太大了。</p>
<h3 id="是什么" tabindex="-1"> 是什么</h3>
<p><code>Tree Shaking</code> 是一个术语，通常用于描述移除 JavaScript 中的没有使用上的代码。</p>
<p><strong>注意：它依赖 <code>ES Module</code>。</strong></p>
<h3 id="怎么用" tabindex="-1"> 怎么用</h3>
<p>Webpack 已经默认开启了这个功能，无需其他配置。</p>
<h2 id="babel" tabindex="-1"> Babel</h2>
<h3 id="为什么-1" tabindex="-1"> 为什么</h3>
<p>Babel 为编译的每个文件都插入了辅助代码，使代码体积过大！</p>
<p>Babel 对一些公共方法使用了非常小的辅助代码，比如 <code>_extend</code>。默认情况下会被添加到每一个需要它的文件中。</p>
<p>你可以将这些辅助代码作为一个独立模块，来避免重复引入。</p>
<h3 id="是什么-1" tabindex="-1"> 是什么</h3>
<p><code>@babel/plugin-transform-runtime</code>: 禁用了 Babel 自动对每个文件的 runtime 注入，而是引入 <code>@babel/plugin-transform-runtime</code> 并且使所有辅助代码从这里引用。</p>
<h3 id="怎么用-1" tabindex="-1"> 怎么用</h3>
<ol>
<li>下载包</li>
</ol>
<div><pre><code>npm i @babel/plugin-transform-runtime -D
</code></pre><div aria-hidden="true"><div></div></div></div><ol start="2">
<li>配置</li>
</ol>
<div><pre><code><span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|webp)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>// 将图片文件输出到 static/imgs 目录中</span>
              <span>// 将图片文件命名 [hash:8][ext][query]</span>
              <span>// [hash:8]: hash值取8位</span>
              <span>// [ext]: 使用之前的文件扩展名</span>
              <span>// [query]: 添加之前的query参数</span>
              <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                  <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
                  <span>plugins</span><span>:</span> <span>[</span><span>"@babel/plugin-transform-runtime"</span><span>]</span><span>,</span> <span>// 减少代码体积</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/main.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads<span>,</span> <span>// 开启多进程</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span>
  <span>]</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="image-minimizer" tabindex="-1"> Image Minimizer</h2>
<h3 id="为什么-2" tabindex="-1"> 为什么</h3>
<p>开发如果项目中引用了较多图片，那么图片体积会比较大，将来请求速度比较慢。</p>
<p>我们可以对图片进行压缩，减少图片体积。</p>
<p><strong>注意：如果项目中图片都是在线链接，那么就不需要了。本地项目静态图片才需要进行压缩。</strong></p>
<h3 id="是什么-2" tabindex="-1"> 是什么</h3>
<p><code>image-minimizer-webpack-plugin</code>: 用来压缩图片的插件</p>
<h3 id="怎么用-2" tabindex="-1"> 怎么用</h3>
<ol>
<li>下载包</li>
</ol>
<div><pre><code>npm i image-minimizer-webpack-plugin imagemin -D
</code></pre><div aria-hidden="true"><div></div></div></div><p>还有剩下包需要下载，有两种模式：</p>
<ul>
<li>无损压缩</li>
</ul>
<div><pre><code>npm install imagemin-gifsicle imagemin-jpegtran imagemin-optipng imagemin-svgo -D
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>有损压缩</li>
</ul>
<div><pre><code>npm install imagemin-gifsicle imagemin-mozjpeg imagemin-pngquant imagemin-svgo -D
</code></pre><div aria-hidden="true"><div></div></div></div><blockquote>
<p><a href="https://baike.baidu.com/item/%E6%97%A0%E6%8D%9F%E3%80%81%E6%9C%89%E6%8D%9F%E5%8E%8B%E7%BC%A9" target="_blank" rel="noopener noreferrer">有损/无损压缩的区别</a></p>
</blockquote>
<ol start="2">
<li>配置</li>
</ol>
<p>我们以无损压缩配置为例：</p>
<div><pre><code><span>const</span> os <span>=</span> <span>require</span><span>(</span><span>"os"</span><span>)</span><span>;</span>
<span>const</span> path <span>=</span> <span>require</span><span>(</span><span>"path"</span><span>)</span><span>;</span>
<span>const</span> ESLintWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"eslint-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> HtmlWebpackPlugin <span>=</span> <span>require</span><span>(</span><span>"html-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> MiniCssExtractPlugin <span>=</span> <span>require</span><span>(</span><span>"mini-css-extract-plugin"</span><span>)</span><span>;</span>
<span>const</span> CssMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"css-minimizer-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> TerserPlugin <span>=</span> <span>require</span><span>(</span><span>"terser-webpack-plugin"</span><span>)</span><span>;</span>
<span>const</span> ImageMinimizerPlugin <span>=</span> <span>require</span><span>(</span><span>"image-minimizer-webpack-plugin"</span><span>)</span><span>;</span>

<span>// cpu核数</span>
<span>const</span> threads <span>=</span> os<span>.</span><span>cpus</span><span>(</span><span>)</span><span>.</span>length<span>;</span>

<span>// 获取处理样式的Loaders</span>
<span>const</span> <span>getStyleLoaders</span> <span>=</span> <span>(</span><span>preProcessor</span><span>)</span> <span>=></span> <span>{</span>
  <span>return</span> <span>[</span>
    MiniCssExtractPlugin<span>.</span>loader<span>,</span>
    <span>"css-loader"</span><span>,</span>
    <span>{</span>
      <span>loader</span><span>:</span> <span>"postcss-loader"</span><span>,</span>
      <span>options</span><span>:</span> <span>{</span>
        <span>postcssOptions</span><span>:</span> <span>{</span>
          <span>plugins</span><span>:</span> <span>[</span>
            <span>"postcss-preset-env"</span><span>,</span> <span>// 能解决大多数样式兼容性问题</span>
          <span>]</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>,</span>
    <span>}</span><span>,</span>
    preProcessor<span>,</span>
  <span>]</span><span>.</span><span>filter</span><span>(</span>Boolean<span>)</span><span>;</span>
<span>}</span><span>;</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>entry</span><span>:</span> <span>"./src/main.js"</span><span>,</span>
  <span>output</span><span>:</span> <span>{</span>
    <span>path</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../dist"</span><span>)</span><span>,</span> <span>// 生产模式需要输出</span>
    <span>filename</span><span>:</span> <span>"static/js/main.js"</span><span>,</span> <span>// 将 js 文件输出到 static/js 目录中</span>
    <span>clean</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
  <span>module</span><span>:</span> <span>{</span>
    <span>rules</span><span>:</span> <span>[</span>
      <span>{</span>
        <span>oneOf</span><span>:</span> <span>[</span>
          <span>{</span>
            <span>// 用来匹配 .css 结尾的文件</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.css$</span><span>/</span></span><span>,</span>
            <span>// use 数组里面 Loader 执行顺序是从右到左</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.less$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"less-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.s[ac]ss$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"sass-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.styl$</span><span>/</span></span><span>,</span>
            <span>use</span><span>:</span> <span>getStyleLoaders</span><span>(</span><span>"stylus-loader"</span><span>)</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(png|jpe?g|gif|svg)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset"</span><span>,</span>
            <span>parser</span><span>:</span> <span>{</span>
              <span>dataUrlCondition</span><span>:</span> <span>{</span>
                <span>maxSize</span><span>:</span> <span>10</span> <span>*</span> <span>1024</span><span>,</span> <span>// 小于10kb的图片会被base64处理</span>
              <span>}</span><span>,</span>
            <span>}</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>// 将图片文件输出到 static/imgs 目录中</span>
              <span>// 将图片文件命名 [hash:8][ext][query]</span>
              <span>// [hash:8]: hash值取8位</span>
              <span>// [ext]: 使用之前的文件扩展名</span>
              <span>// [query]: 添加之前的query参数</span>
              <span>filename</span><span>:</span> <span>"static/imgs/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.(ttf|woff2?)$</span><span>/</span></span><span>,</span>
            <span>type</span><span>:</span> <span>"asset/resource"</span><span>,</span>
            <span>generator</span><span>:</span> <span>{</span>
              <span>filename</span><span>:</span> <span>"static/media/[hash:8][ext][query]"</span><span>,</span>
            <span>}</span><span>,</span>
          <span>}</span><span>,</span>
          <span>{</span>
            <span>test</span><span>:</span> <span><span>/</span><span>\.js$</span><span>/</span></span><span>,</span>
            <span>// exclude: /node_modules/, // 排除node_modules代码不编译</span>
            <span>include</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span> <span>// 也可以用包含</span>
            <span>use</span><span>:</span> <span>[</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"thread-loader"</span><span>,</span> <span>// 开启多进程</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>workers</span><span>:</span> threads<span>,</span> <span>// 数量</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
              <span>{</span>
                <span>loader</span><span>:</span> <span>"babel-loader"</span><span>,</span>
                <span>options</span><span>:</span> <span>{</span>
                  <span>cacheDirectory</span><span>:</span> <span>true</span><span>,</span> <span>// 开启babel编译缓存</span>
                  <span>cacheCompression</span><span>:</span> <span>false</span><span>,</span> <span>// 缓存文件不要压缩</span>
                  <span>plugins</span><span>:</span> <span>[</span><span>"@babel/plugin-transform-runtime"</span><span>]</span><span>,</span> <span>// 减少代码体积</span>
                <span>}</span><span>,</span>
              <span>}</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>]</span><span>,</span>
      <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span><span>:</span> <span>[</span>
    <span>new</span> <span>ESLintWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 指定检查文件的根目录</span>
      <span>context</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../src"</span><span>)</span><span>,</span>
      <span>exclude</span><span>:</span> <span>"node_modules"</span><span>,</span> <span>// 默认值</span>
      <span>cache</span><span>:</span> <span>true</span><span>,</span> <span>// 开启缓存</span>
      <span>// 缓存目录</span>
      <span>cacheLocation</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>
        __dirname<span>,</span>
        <span>"../node_modules/.cache/.eslintcache"</span>
      <span>)</span><span>,</span>
      threads<span>,</span> <span>// 开启多进程</span>
    <span>}</span><span>)</span><span>,</span>
    <span>new</span> <span>HtmlWebpackPlugin</span><span>(</span><span>{</span>
      <span>// 以 public/index.html 为模板创建文件</span>
      <span>// 新的html文件有两个特点：1. 内容和源文件一致 2. 自动引入打包生成的js等资源</span>
      <span>template</span><span>:</span> path<span>.</span><span>resolve</span><span>(</span>__dirname<span>,</span> <span>"../public/index.html"</span><span>)</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// 提取css成单独文件</span>
    <span>new</span> <span>MiniCssExtractPlugin</span><span>(</span><span>{</span>
      <span>// 定义输出文件名和目录</span>
      <span>filename</span><span>:</span> <span>"static/css/main.css"</span><span>,</span>
    <span>}</span><span>)</span><span>,</span>
    <span>// css压缩</span>
    <span>// new CssMinimizerPlugin(),</span>
  <span>]</span><span>,</span>
  <span>optimization</span><span>:</span> <span>{</span>
    <span>minimizer</span><span>:</span> <span>[</span>
      <span>// css压缩也可以写到optimization.minimizer里面，效果一样的</span>
      <span>new</span> <span>CssMinimizerPlugin</span><span>(</span><span>)</span><span>,</span>
      <span>// 当生产模式会默认开启TerserPlugin，但是我们需要进行其他配置，就要重新写了</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>parallel</span><span>:</span> threads<span>,</span> <span>// 开启多进程</span>
      <span>}</span><span>)</span><span>,</span>
      <span>// 压缩图片</span>
      <span>new</span> <span>ImageMinimizerPlugin</span><span>(</span><span>{</span>
        <span>minimizer</span><span>:</span> <span>{</span>
          <span>implementation</span><span>:</span> ImageMinimizerPlugin<span>.</span>imageminGenerate<span>,</span>
          <span>options</span><span>:</span> <span>{</span>
            <span>plugins</span><span>:</span> <span>[</span>
              <span>[</span><span>"gifsicle"</span><span>,</span> <span>{</span> <span>interlaced</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"jpegtran"</span><span>,</span> <span>{</span> <span>progressive</span><span>:</span> <span>true</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span><span>"optipng"</span><span>,</span> <span>{</span> <span>optimizationLevel</span><span>:</span> <span>5</span> <span>}</span><span>]</span><span>,</span>
              <span>[</span>
                <span>"svgo"</span><span>,</span>
                <span>{</span>
                  <span>plugins</span><span>:</span> <span>[</span>
                    <span>"preset-default"</span><span>,</span>
                    <span>"prefixIds"</span><span>,</span>
                    <span>{</span>
                      <span>name</span><span>:</span> <span>"sortAttrs"</span><span>,</span>
                      <span>params</span><span>:</span> <span>{</span>
                        <span>xmlnsOrder</span><span>:</span> <span>"alphabetical"</span><span>,</span>
                      <span>}</span><span>,</span>
                    <span>}</span><span>,</span>
                  <span>]</span><span>,</span>
                <span>}</span><span>,</span>
              <span>]</span><span>,</span>
            <span>]</span><span>,</span>
          <span>}</span><span>,</span>
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>// devServer: {</span>
  <span>//   host: "localhost", // 启动服务器域名</span>
  <span>//   port: "3000", // 启动服务器端口号</span>
  <span>//   open: true, // 是否自动打开浏览器</span>
  <span>// },</span>
  <span>mode</span><span>:</span> <span>"production"</span><span>,</span>
  <span>devtool</span><span>:</span> <span>"source-map"</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div><br><br><br><br><br><br><br><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;</div><br><br><br><br><br><br><br><br><br><br></div><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ol start="3">
<li>打包时会出现报错：</li>
</ol>
<div><pre><code>Error: Error with 'src\images\1.jpeg': '"C:\Users\86176\Desktop\webpack\webpack_code\node_modules\jpegtran-bin\vendor\jpegtran.exe"'
Error with 'src\images\3.gif': spawn C:\Users\86176\Desktop\webpack\webpack_code\node_modules\optipng-bin\vendor\optipng.exe ENOENT
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>我们需要安装两个文件到 node_modules 中才能解决, 文件可以从课件中找到：</p>
<ul>
<li>jpegtran.exe</li>
</ul>
<p>需要复制到 <code>node_modules\jpegtran-bin\vendor</code> 下面</p>
<blockquote>
<p><a href="http://jpegclub.org/jpegtran/" target="_blank" rel="noopener noreferrer">jpegtran 官网地址</a></p>
</blockquote>
<ul>
<li>optipng.exe</li>
</ul>
<p>需要复制到 <code>node_modules\optipng-bin\vendor</code> 下面</p>
<blockquote>
<p><a href="http://optipng.sourceforge.net/" target="_blank" rel="noopener noreferrer">OptiPNG 官网地址</a></p>
</blockquote>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">总结</title>
    <id>https://github.com/MisterChen9527/note/webpack/senior/summary.html</id>
    <link href="https://github.com/MisterChen9527/note/webpack/senior/summary.html"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<p>我们从 4 个角度对 webpack 和代码进行了优化：</p>
<ol>
<li>提升开发体验</li>
</ol>
<ul>
<li>使用 <code>Source Map</code> 让开发或上线时代码报错能有更加准确的错误提示。</li>
</ul>
<ol start="2">
<li>提升 webpack 提升打包构建速度</li>
</ol>
<ul>
<li>使用 <code>HotModuleReplacement</code> 让开发时只重新编译打包更新变化了的代码，不变的代码使用缓存，从而使更新速度更快。</li>
<li>使用 <code>OneOf</code> 让资源文件一旦被某个 loader 处理了，就不会继续遍历了，打包速度更快。</li>
<li>使用 <code>Include/Exclude</code> 排除或只检测某些文件，处理的文件更少，速度更快。</li>
<li>使用 <code>Cache</code> 对 eslint 和 babel 处理的结果进行缓存，让第二次打包速度更快。</li>
<li>使用 <code>Thead</code> 多进程处理 eslint 和 babel 任务，速度更快。（需要注意的是，进程启动通信都有开销的，要在比较多代码处理时使用才有效果）</li>
</ul>
<ol start="3">
<li>减少代码体积</li>
</ol>
<ul>
<li>使用 <code>Tree Shaking</code> 剔除了没有使用的多余代码，让代码体积更小。</li>
<li>使用 <code>@babel/plugin-transform-runtime</code> 插件对 babel 进行处理，让辅助代码从中引入，而不是每个文件都生成辅助代码，从而体积更小。</li>
<li>使用 <code>Image Minimizer</code> 对项目中图片进行压缩，体积更小，请求速度更快。（需要注意的是，如果项目中图片都是在线链接，那么就不需要了。本地项目静态图片才需要进行压缩。）</li>
</ul>
<ol start="4">
<li>优化代码运行性能</li>
</ol>
<ul>
<li>使用 <code>Code Split</code> 对代码进行分割成多个 js 文件，从而使单个文件体积更小，并行加载 js 速度更快。并通过 import 动态导入语法进行按需加载，从而达到需要使用时才加载该资源，不用时不加载资源。</li>
<li>使用 <code>Preload / Prefetch</code> 对代码进行提前加载，等未来需要使用时就能直接使用，从而用户体验更好。</li>
<li>使用 <code>Network Cache</code> 能对输出资源文件进行更好的命名，将来好做缓存，从而用户体验更好。</li>
<li>使用 <code>Core-js</code> 对 js 进行兼容性处理，让我们代码能运行在低版本浏览器。</li>
<li>使用 <code>PWA</code> 能让代码离线也能访问，从而提升用户体验。</li>
</ul>
]]></content>
    <category term="WebPack" scheme=""/>
    <published>2022-08-21T05:53:33.000Z</published>
  </entry>
  <entry>
    <title type="html">代码笔记</title>
    <id>https://github.com/MisterChen9527/code/</id>
    <link href="https://github.com/MisterChen9527/code/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>此处是 Mr.Chen 存放的一些代码笔记。</p>
]]></summary>
    <content type="html"><![CDATA[<p>此处是 Mr.Chen 存放的一些代码笔记。</p>

<h2 id="目录" tabindex="-1"> 目录</h2>
<h3 id="基础" tabindex="-1"> 基础</h3>
<ul>
<li>
<p><a href="/code/basic/">基础知识</a></p>
</li>
<li>
<p><a href="/code/windows/">Windows 基础</a></p>
</li>
<li>
<p><a href="/code/github/">GitHub 介绍</a></p>
</li>
</ul>
<h3 id="前端开发" tabindex="-1"> 前端开发</h3>
<ul>
<li>
<p><a href="/code/website/">网站相关</a></p>
</li>
<li>
<p><a href="/code/vue/">Vue 相关</a></p>
</li>
<li>
<p><a href="/code/mini-app/">小程序教程</a></p>
</li>
<li>
<p><a href="/code/node-js/">Node.js</a></p>
</li>
</ul>
<h3 id="代码学习" tabindex="-1"> 代码学习</h3>
<ul>
<li>
<p><a href="/code/language/">代码学习</a></p>
</li>
<li>
<p><a href="/code/language/learning.html">如何学习一门语言</a></p>
</li>
<li>
<p><a href="/code/language/js/">JavaScript 教程</a></p>
</li>
<li>
<p><a href="/code/language/typescript/">TypeScript 教程</a></p>
</li>
<li>
<p><a href="/code/language/python/">Python 教程</a> (编写中...)</p>
</li>
<li>
<p><a href="/code/language/markdown/">Markdown 教程</a></p>
</li>
<li>
<p><a href="/code/language/yaml/">YAML 教程</a></p>
</li>
<li>
<p><a href="/code/language/json/">JSON 教程</a></p>
</li>
</ul>
<h3 id="app" tabindex="-1"> APP</h3>
<ul>
<li><a href="/code/Android/">Android 开发</a></li>
</ul>
<h3 id="后端开发" tabindex="-1"> 后端开发</h3>
<ul>
<li><a href="/code/backEnd/">后端开发</a></li>
</ul>
<h3 id="代码学习网站" tabindex="-1"> 代码学习网站</h3>
<h3 id="优质网站" tabindex="-1"> 优质网站</h3>
<ul>
<li>
<p><a href="https://wangdoc.com/" target="_blank" rel="noopener noreferrer">网道</a></p>
</li>
<li>
<p><a href="https://www.liaoxuefeng.com/" target="_blank" rel="noopener noreferrer">廖雪峰的网站</a></p>
</li>
<li>
<p><a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener noreferrer">MDN</a></p>
<div><p>相关信息</p>
<p>MDN 的中文文档翻译很差，大多都是机翻，十分建议直接阅读英文文档。</p>
</div>
</li>
</ul>
<h3 id="杂牌网站" tabindex="-1"> 杂牌网站</h3>
<ul>
<li>
<p><a href="https://www.runoob.com/" target="_blank" rel="noopener noreferrer">菜鸟教程</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="https://www.w3cschool.cn" target="_blank" rel="noopener noreferrer">w3cschool</a> <i>Content not supported</i> <i>Content not supported</i> <i>Content not supported</i></p>
</li>
<li>
<p><a href="http://www.w3school.com.cn/" target="_blank" rel="noopener noreferrer">w3school</a> <i>Content not supported</i></p>
</li>
</ul>
]]></content>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">APP 组件设计规范</title>
    <id>https://github.com/MisterChen9527/design/APP.html</id>
    <link href="https://github.com/MisterChen9527/design/APP.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>本文对应用程序设计中常见的组件及其作用进行了介绍。</p>
]]></summary>
    <content type="html"><![CDATA[<p>本文对应用程序设计中常见的组件及其作用进行了介绍。</p>

<h2 id="页面总体布局" tabindex="-1"> 页面总体布局</h2>
<ul>
<li>
<h3 id="navigationbar" tabindex="-1"> navigationbar</h3>
<p>简称 Navbar 也就是导航栏。</p>
<p>主要负责承接页面的导航操作。</p>
<p>在内部界面上，一般左侧展示返回操作，居中显示页面标题，右侧展示更多操作。</p>
<p>在主页上，主要承载 tabpage 对应的功能展示与触发。</p>
<p>在 navbar 上，设计要突出质感，应该以简约为主。</p>
<p>使用不鲜明的颜色，可以使用 APP 或网页对的主体色。</p>
<p>可附以纯色 icon。</p>
<p>不能太吸睛导致用户对页面内容注意的分散。</p>
<p>有条件的情况下应该设计其切换动效。</p>
<p><img src="@source/design/assets/navbar1.jpg" alt="图片">
<img src="@source/design/assets/navbar2.jpg" alt="图片">
<img src="@source/design/assets/navbar3.jpg" alt="图片"></p>
</li>
</ul>
<p>好文推荐: <a href="https://www.jianshu.com/p/6037e4f79f4d" target="_blank" rel="noopener noreferrer">iOS 导航栏动效设计思路</a></p>
<ul>
<li>
<h3 id="tabbar" tabindex="-1"> Tabbar</h3>
<p>APP 打开后底部的操作栏叫 tabbar，一般设置 2-5 个模块，每个模块应该设计 logo 与文字，对应的界面叫 tabpage。</p>
<p>在 logo 上应以简约为主，应当设计设置点击与激活效果。</p>
<p>tabpage 的设置要慎重，分类展示 APP 最关键的几个分项设置，并在每个界面内展示具体内容。</p>
<p><img src="@source/design/assets/tab1.jpg" alt="图片">
<img src="@source/design/assets/tab2.jpg" alt="图片"></p>
</li>
</ul>
<h3 id="page" tabindex="-1"> Page</h3>
<p>App 每个页面的背景色，除了纯文章之外不应采用纯白色，设计可以向 APP 主题色靠拢。</p>
<p>应当针对不同设备造成的不同长宽比、分辨率设置不同的页面排版样式，并制作不同的 UI 布局。</p>
<p><img src="@source/design/assets/pc.png" alt="图片">
<img src="@source/design/assets/phone.png" alt="图片">
<img src="@source/design/assets/phone1.png" alt="图片">
<img src="@source/design/assets/phone2.png" alt="图片"></p>
<ul>
<li>
<h3 id="sider" tabindex="-1"> Sider</h3>
<p>侧边栏，可以设置侧边固定按钮点击弹出或者从左向右滑动弹出式。</p>
<p>一般用于承载不需要展示的一些设置项、介绍项、个人信息项。</p>
<p><img src="@source/design/assets/sider1.jpg" alt="图片">
<img src="@source/design/assets/sider2.png" alt="图片"></p>
</li>
</ul>
<h2 id="ui-元素" tabindex="-1"> UI 元素</h2>
<ul>
<li>
<h3 id="grid" tabindex="-1"> Grid</h3>
<p>九宫格结构，实际使用的时候 3×3、4×2 都有广泛使用。</p>
<p>Gird 结构主要用于罗列展示各项功能，或者是各项板块。</p>
<p>各元素应该以上部的圆形或异形图标于下部的说明文字为主。</p>
<p>在移动设备上一般不显示边框、不设计点击动效，而在 PC 与 HD 恰好相反。</p>
<p><img src="@source/design/assets/grid1.jpg" alt="图片">
<img src="@source/design/assets/grid2.jpg" alt="图片"></p>
</li>
<li>
<h3 id="menu" tabindex="-1"> Menu</h3>
<p>菜单有多种表现方式，比如 float menu、pop-up menu、modal menu、dropdown 等。</p>
</li>
<li>
<h3 id="其他元素可以参考ant-design" tabindex="-1"> 其他元素可以参考<a href="https://vue.ant.design/docs/vue/introduce-cn/" target="_blank" rel="noopener noreferrer">Ant-design</a></h3>
</li>
</ul>
<h2 id="杂项" tabindex="-1"> 杂项</h2>
<h3 id="mask-设计" tabindex="-1"> Mask 设计</h3>
<p>灰色的半透明遮罩叫 mask</p>
<p>当透明度很高，感受很小的时候一般设计成可穿透，也就是说点击相当于直接点击蒙层下部区域。</p>
<p>透明度中等的一般式可触摸做取消热区的，也就是点击会取消。</p>
<p>不可穿透的 mask，也就是说点击没有反应，一般要给非常高的不透明度，用户只能点叉号取消。(一般用于弹出推广)</p>
<h3 id="设计趋势" tabindex="-1"> 设计趋势</h3>
<p>目前以 iOS 特有的苹果风，Windows 上的 Aero 效果(毛玻璃效果)与安卓的 Material Design 设计为主。</p>
<h4 id="图标" tabindex="-1"> 图标</h4>
<p>常用实心矢量图标</p>
<h4 id="移动端" tabindex="-1"> 移动端</h4>
<p>分割线和边框目前采用已经比较少。</p>
<h4 id="pc" tabindex="-1"> PC</h4>
<p>增强鼠标移动与网页的交互带来沉浸式的体验。</p>
<h4 id="突出质感" tabindex="-1"> 突出质感</h4>
<p>因为不同机型现实效果不一样，普遍采用圆角、阴影、以及毛玻璃效果，还有避免用纯色背景转而用略蓝略灰的色调突出质感。</p>
<h4 id="增强反馈感" tabindex="-1"> 增强反馈感</h4>
<p>每次点击时和点击之后出发的效果都能在屏幕上让用户感知自己的操作(即我刚刚点了按钮，按钮生效产生了某种操作)</p>
]]></content>
    <category term="设计" scheme=""/>
    <published>2019-11-24T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">UI 设计</title>
    <id>https://github.com/MisterChen9527/design/</id>
    <link href="https://github.com/MisterChen9527/design/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>本文列出了一些 UI 设计相关的资源。</p>
]]></summary>
    <content type="html"><![CDATA[<p>本文列出了一些 UI 设计相关的资源。</p>

<h2 id="相关教程" tabindex="-1"> 相关教程</h2>
<ul>
<li>
<p><a href="/design/icon/">图标设计教程</a></p>
</li>
<li>
<p><a href="/design/navigation/">导航设计教程</a></p>
</li>
</ul>
<h2 id="配色" tabindex="-1"> 配色</h2>
<ul>
<li>
<p><a href="http://www.ruanyifeng.com/blog/2019/03/coloring-scheme.html" target="_blank" rel="noopener noreferrer">阮一峰 - 配色方案</a></p>
</li>
<li>
<p><a href="https://webgradients.com/" target="_blank" rel="noopener noreferrer">网页背景渐变色</a></p>
</li>
</ul>
<h2 id="设计" tabindex="-1"> 设计</h2>
<ul>
<li>
<p><a href="https://developer.apple.com/design/tips/" target="_blank" rel="noopener noreferrer">Apple 设计原则</a></p>
</li>
<li>
<p><a href="https://developer.apple.com/design/" target="_blank" rel="noopener noreferrer">Apple 设计</a></p>
</li>
<li>
<p><a href="/design/APP.html">App 组件设计规范</a></p>
</li>
</ul>
<h2 id="网站组件" tabindex="-1"> 网站组件</h2>
<ul>
<li>
<p><a href="https://ant.design/index-cn" target="_blank" rel="noopener noreferrer">Ant Design</a></p>
</li>
<li>
<p><a href="https://weui.io/" target="_blank" rel="noopener noreferrer">WeUI</a></p>
</li>
</ul>
<h2 id="小程序组件库" tabindex="-1"> 小程序组件库</h2>
<ul>
<li>
<p><a href="https://youzan.github.io/vant-weapp/" target="_blank" rel="noopener noreferrer">Vant</a></p>
</li>
<li>
<p><a href="https://www.color-ui.com/" target="_blank" rel="noopener noreferrer">Color UI</a></p>
</li>
</ul>
]]></content>
    <category term="设计" scheme=""/>
    <published>2019-11-24T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">机械硬盘</title>
    <id>https://github.com/MisterChen9527/hardware/HDD.html</id>
    <link href="https://github.com/MisterChen9527/hardware/HDD.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>现代计算机大部分文件存储功能都是由机械硬盘这种设备提供的。(现在的 SSD 和闪存从概念和逻辑上都部分继承自机械硬盘，所以使用机械硬盘来进行理解也是没有问题的)</p>
<p>机械硬盘能实现信息存储的功能基于: 磁性存储介质能够被磁化，且磁化后会长久保留被磁化的状态，这种被磁化状态能够被读取出来，同时这种磁化状态还能够不断被修改，磁化正好有两个方向，所以可以表示 0 和 1。
于是硬盘就是把这种磁性存储介质做成一个个盘片，每一个盘片上都分布着数量巨大的磁性存储单位，使用磁性读写头对盘片进行写入和读取(从原理上类似黑胶唱片的播放)。</p>
<p>一个硬盘中的磁性存储单位数以亿计(1T 硬盘就有约 80 亿个)，所以需要一套规则来规划信息如何存取(比如一本存储信息的书我们还会分为页，每一页从上到下从左到右读取，同时还有章节目录)
于是就有了这些物理、逻辑概念:</p>
<ol>
<li>
<p>一个硬盘有多张盘片叠成，不同盘片有编号</p>
</li>
<li>
<p>每张盘片上的存储颗粒成环形一圈圈地排布，每一圈称为磁道，有编号</p>
</li>
<li>
<p>每条磁道上都有一圈存储颗粒，每 512 * 8(512 字节，0.5KB)个存储颗粒作为一个扇区，扇区是硬盘上存储的最小物理单位</p>
</li>
<li>
<p>N 个扇区可以组成簇，N 取决于不同的文件系统或是文件系统的配置，簇是此文件系统中的最小存储单位</p>
</li>
<li>
<p>所有盘面上的同一磁道构成一个圆柱，称为柱面，柱面是系统分区的最小单位</p>
</li>
</ol>
<p>磁头读写文件的时候，首先是分区读写的，由 inode 编号(区内唯一的编号)找到对应的磁道和扇区，然后一个柱面一个柱面地进行读写。机械硬盘的读写控制系统是一个令人叹为观止的精密工程(一个盘面上有几亿个存储单位，每个磁道宽度不到几十纳米，磁盘每分钟上万转)，同时关于读写的逻辑也是有诸多细节(比如扇区的编号并不是连续的)，非常有意思，可以自行搜索文章拓展阅读。</p>
]]></content>
    <category term="硬件" scheme=""/>
    <published>2020-06-05T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">硬件相关</title>
    <id>https://github.com/MisterChen9527/hardware/</id>
    <link href="https://github.com/MisterChen9527/hardware/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<h1 id="硬件相关" tabindex="-1"> 硬件相关</h1>
<p>这里是一些常见的硬件相关的问题总结，供访客查阅。</p>
]]></summary>
    <content type="html"><![CDATA[<h1 id="硬件相关" tabindex="-1"> 硬件相关</h1>
<p>这里是一些常见的硬件相关的问题总结，供访客查阅。</p>

]]></content>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">CPU 的架构</title>
    <id>https://github.com/MisterChen9527/hardware/structure.html</id>
    <link href="https://github.com/MisterChen9527/hardware/structure.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>CPU 内部已经含有一些微指令，我们所使用的软件都要经过 CPU 内部的微指令集来达成才行。那这些指令集的设计主要又被分为两种设计理念，这就是目前世界上常见到的两种主要 CPU 架构，分别是: 精简指令集(RISC)与复杂指令集(CISC) 系统。</p>
<h2 id="精简指令集" tabindex="-1"> 精简指令集</h2>
<p>精简指令集，(Reduced Instruction Set Computer, RISC) 的设计中，微指令集较为精简。每个指令的执行时间都很短，完成的动作也很单纯，指令的执行性能较佳；但是若要做复杂的事情，就要由多个指令来完成。常见的 RISC 微指令集 CPU 主要例如甲骨文(Oracle) 公司的 SPARC 系列、IBM 公司的 Power Architecture (包括 PowerPC) 系列、与 ARM 公司(ARM Holdings) 的 ARM CPU 系列等。</p>
<p>在应用方面，SPARC CPU 的电脑常用于学术领域的大型工作站中，包括银行金融体系的主要伺服器也都有这类的电脑架构；至于 PowerPC 架构的应用上，例如索尼(Sony)公司出产的 Play Station 3(PS3)就是使用 PowerPC 架构的 Cell 处理器；那 ARM 的 ARM 呢? 您常使用的各厂牌手机、PDA、导航系统、网络设备(交换器、路由器等)等，几乎都是使用 ARM 架构的 CPU。目前世界上使用范围最广的 CPU 可能就是 ARM 这种架构。</p>
<h2 id="复杂指令集" tabindex="-1"> 复杂指令集</h2>
<p>复杂指令集，(Complex Instruction Set Computer, CISC)。与 RISC 不同的，CISC 在微指令集的每个小指令可以执行一些较低阶的硬体操作，指令数目多而且复杂，每条指令的长度并不相同。因为指令执行较为复杂所以每条指令花费的时间较长，但每条个别指令可以处理的工作较为丰富。常见的 CISC 微指令集 CPU 主要有 AMD、Intel、VIA 等的 x86 架构的 CPU。</p>
<p>由于 AMD、Intel、VIA 所开发出来的 x86 架构 CPU 被大量使用于个人电脑(Personal computer)用途上面，因此，个人电脑常被称为 x86 架构的电脑! 那为何称为 x86 架构呢? 这是因为最早的那颗 Intel 发展出来的 CPU 代号称为 8086，后来依此架构又开发出 80286, 80386...，因此这种架构的 CPU 就被称为 x86 架构了。</p>
<p>在 2003 年以前由 Intel 所开发的 x86 架构 CPU 由 8 位数升级到 16、32 位数，后来 AMD 依此架构修改新一代的 CPU 为 64 位数， 为了区别两者的差异，因此 64 位数的个人电脑 CPU 又被统称为 x86_64 的架构。</p>
<div><p>提示</p>
<p>所谓的位数指的是 CPU 一次资料读取的最大量! 64 位数 CPU 代表 CPU 一次可以读写 64bits 这么多的资料，32 位数 CPU 则是 CPU 一次只能读取 32 位数的意思。因为 CPU 读取资料量有限制，因此能够从记忆体中读写的资料也就有所限制。所以，一般 32 位数的 CPU 所能读写的最大资料量是 4GB。</p>
</div>
<p>那么不同的 x86 架构的 CPU 有什么差异呢? 除了 CPU 的整体结构(如第二层快取、每次运行可执行的指令数等)之外， 主要是在于微指令集的不同。新的 x86 的 CPU 大多含有很先进的微指令集， 这些微指令集可以加速多媒体程序的运行，也能够加强虚拟化的性能，而且某些微指令集更能够增加能源效率，降低 CPU 耗电量。</p>
]]></content>
    <category term="硬件" scheme=""/>
    <published>2020-06-05T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Linux</title>
    <id>https://github.com/MisterChen9527/linux/</id>
    <link href="https://github.com/MisterChen9527/linux/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="linux-教程" tabindex="-1"> Linux 教程</h2>
<ul>
<li>
<p><a href="/linux/intro/">Linux 介绍</a></p>
<ul>
<li>
<p><a href="/linux/intro/intro.html">Linux 介绍</a></p>
</li>
<li>
<p><a href="/linux/intro/history.html">Linux 历史</a></p>
</li>
<li>
<p><a href="/linux/intro/language.html">Linux 编写语言</a></p>
</li>
<li>
<p><a href="/linux/intro/advantage.html">Linux 优势</a></p>
</li>
<li>
<p><a href="/linux/intro/desktop.html">Linux 桌面环境</a></p>
</li>
</ul>
</li>
<li>
<p><a href="/linux/file/">Linux 文件</a></p>
<ul>
<li>
<p><a href="/linux/file/file.html">Linux 文件</a></p>
</li>
<li>
<p><a href="/linux/file/dir.html">Linux 目录</a></p>
</li>
<li>
<p><a href="/linux/file/mount.html">挂载</a></p>
</li>
</ul>
</li>
<li>
<p><a href="/linux/command/">Linux 命令</a></p>
<ul>
<li>
<p><a href="/linux/command/command.html">命令格式简介</a></p>
</li>
<li>
<p><a href="/linux/command/dir.html">目录相关</a></p>
</li>
<li>
<p><a href="/linux/command/file.html">文件相关</a></p>
</li>
<li>
<p><a href="/linux/command/other.html">其他命令</a></p>
</li>
<li>
<p><a href="/linux/command/add.html">命令的自动补全</a></p>
</li>
<li>
<p><a href="/linux/command/excu.html">命令的执行</a></p>
</li>
<li>
<p><a href="/linux/command/path.html">环境变量</a></p>
</li>
<li>
<p><a href="/linux/command/ln.html">创建链接</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="ubuntu" tabindex="-1"> ubuntu</h2>
<ul>
<li><a href="/linux/ubuntu/">点击前往</a></li>
</ul>
<h2 id="centos" tabindex="-1"> CentOS</h2>
<ul>
<li><a href="/linux/centos.html">点击前往</a></li>
</ul>
<h2 id="wsl" tabindex="-1"> WSL</h2>
<ul>
<li><a href="/linux/WSL.html">点击前往</a></li>
</ul>
]]></content>
    <category term="Linux" scheme=""/>
    <published>2019-11-15T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">WSL</title>
    <id>https://github.com/MisterChen9527/linux/WSL.html</id>
    <link href="https://github.com/MisterChen9527/linux/WSL.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>WSL 可以直接在 Windows 系统上安装并运行 Linux。目前最新的版本是 WSL2。</p>
]]></summary>
    <content type="html"><![CDATA[<p>WSL 可以直接在 Windows 系统上安装并运行 Linux。目前最新的版本是 WSL2。</p>

<h2 id="ubuntu" tabindex="-1"> Ubuntu</h2>
<p>Windows 上的功能有很大缺失。已知不能用 Snap。</p>
<h2 id="wsl-文件位置" tabindex="-1"> WSL 文件位置</h2>
<div><pre><code>C:\Users\%USERNAME%\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs
</code></pre><div aria-hidden="true"><div></div></div></div><h2 id="重启-wsl" tabindex="-1"> 重启 WSL</h2>
<p>使用</p>
<div><pre><code>net stop LxssManager
</code></pre><div aria-hidden="true"><div></div></div></div><p>和</p>
<div><pre><code>net start LxssManager
</code></pre><div aria-hidden="true"><div></div></div></div>]]></content>
    <category term="Linux" scheme=""/>
    <published>2019-11-23T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">CentOS 教程</title>
    <id>https://github.com/MisterChen9527/linux/centos.html</id>
    <link href="https://github.com/MisterChen9527/linux/centos.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="管理工具" tabindex="-1"> 管理工具</h2>
<ul>
<li>yum (Centos 7)</li>
<li>dnf (Centos 8)</li>
</ul>
<h2 id="yarn" tabindex="-1"> yarn</h2>
<div><pre><code><span>curl</span> --silent --location https://dl.yarnpkg.com/rpm/yarn.repo <span>|</span> <span>sudo</span> <span>tee</span> /etc/yum.repos.d/yarn.repo

<span>sudo</span> yum <span>install</span> <span>yarn</span>
<span>## OR ##</span>
<span>sudo</span> dnf <span>install</span> <span>yarn</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p>测试是否安装成功:</p>
<div><pre><code><span>yarn</span> --version
</code></pre><div aria-hidden="true"><div></div></div></div>]]></content>
    <category term="Linux" scheme=""/>
    <published>2019-11-23T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">ssh</title>
    <id>https://github.com/MisterChen9527/linux/ssh.html</id>
    <link href="https://github.com/MisterChen9527/linux/ssh.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="使用密码登录" tabindex="-1"> 使用密码登录</h2>
<ol>
<li>
<p>执行以下命令，连接 Linux 云服务器。</p>
<div><pre><code><span>ssh</span> <span>&lt;</span>username<span>></span>@<span>&lt;</span>hostname or IP address<span>></span>
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>username 即为前提条件中获得的默认帐号。</li>
<li>hostname or IP address 为您的 Linux 实例公网 IP 或自定义域名。</li>
</ul>
</li>
<li>
<p>输入已获取的密码，按 Enter，即可完成登录。</p>
</li>
</ol>
<h2 id="使用密钥登录" tabindex="-1"> 使用密钥登录</h2>
<ol>
<li>
<p>执行以下命令，赋予私钥文件仅本人可读权限。</p>
<div><pre><code><span>chmod</span> <span>400</span> <span>&lt;</span>下载的与云服务器关联的私钥的绝对路径<span>></span>
</code></pre><div aria-hidden="true"><div></div></div></div></li>
<li>
<p>执行以下命令，进行远程登录。</p>
<div><pre><code><span>ssh</span> -i <span>&lt;</span>下载的与云服务器关联的私钥的绝对路径<span>></span> <span>&lt;</span>username<span>></span>@<span>&lt;</span>hostname or IP address<span>></span>
</code></pre><div aria-hidden="true"><div></div></div></div><ul>
<li>username 即为前提条件中获得的默认帐号。</li>
<li>hostname or IP address 为您的 Linux 实例公网 IP 或自定义域名。</li>
</ul>
<p>例如，执行 <code>ssh -i &quot;id_rsa&quot; ubuntu@123.206.113.227</code> 命令，远程登录 Linux 云服务器。</p>
</li>
</ol>
<h2 id="断开链接" tabindex="-1"> 断开链接</h2>
<p><code>Ctrl + D</code> 或 输入 <code>logout</code>.</p>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-11-23T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Mr.Chen 的随笔</title>
    <id>https://github.com/MisterChen9527/note/</id>
    <link href="https://github.com/MisterChen9527/note/"/>
    <updated>2022-08-21T05:53:33.000Z</updated>
    <content type="html"><![CDATA[<div><p>提示</p>
<p>这里是 Mr.Chen 的一些随笔，后续会被整理进博客中。</p>
</div>
<h2 id="node-js-相关" tabindex="-1"> Node.js 相关</h2>
<ul>
<li><a href="/note/node-js/current-path.html">current-path 相关</a></li>
</ul>
<h2 id="前端打包工具-相关" tabindex="-1"> 前端打包工具 相关</h2>
<ul>
<li><a href="/note/vite/">Vite 相关</a></li>
<li><a href="/note/webpack/">WebPack 相关</a></li>
</ul>
]]></content>
    <category term="随笔" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">软件教程</title>
    <id>https://github.com/MisterChen9527/software/</id>
    <link href="https://github.com/MisterChen9527/software/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="代码编辑器" tabindex="-1"> 代码编辑器</h2>
<ul>
<li><a href="/software/editor.html">编辑器介绍</a></li>
</ul>
<h2 id="团队协作" tabindex="-1"> 团队协作</h2>
<p>开发项目的代码版本管理以及多人协作使用 Git 软件</p>
<ul>
<li>
<p><a href="/software/git/">Git 教程</a></p>
</li>
<li>
<p><a href="/code/github/">GitHub 介绍</a></p>
</li>
</ul>
<h2 id="浏览器" tabindex="-1"> 浏览器</h2>
<p>在开发中，调试网页推荐使用 Chrome。</p>
<ul>
<li><a href="/software/chrome.html">Chrome 介绍</a></li>
</ul>
<h2 id="后端" tabindex="-1"> 后端</h2>
<h3 id="http-server" tabindex="-1"> Http Server</h3>
<p>网站已经停止使用 Apache Lounge 编译的 httpd Apache。目前迁移到更加轻量，并发性能更好的 Nginx 上。</p>
<ul>
<li>
<p><a href="/software/apache.html">Apache</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/software/nginx.html">Nginx</a></p>
</li>
</ul>
<h3 id="抓包与-api-调试" tabindex="-1"> 抓包与 API 调试</h3>
<ul>
<li><a href="/software/postman.html">Postman</a></li>
</ul>
<h2 id="工具软件" tabindex="-1"> 工具软件</h2>
<ul>
<li><a href="/software/tool/">查看详情</a></li>
</ul>
<h2 id="手机-app" tabindex="-1"> 手机 APP</h2>
<h3 id="sololearn" tabindex="-1"> soloLearn</h3>
<p>一个代码在线学习社区，只有英文版。由于代码语义贴近英文原生逻辑，十分建议在编辑代码时 “think in English”。</p>
<p>软件中的 code playground 可以在线运行大部分代码，大家在手机上就可以进行练习与尝试。</p>
<h2 id="adobe-软件" tabindex="-1"> Adobe 软件</h2>
<p>Adobe 全系软件的获取，请见 <a href="https://www.weibo.com/vposy" target="_blank" rel="noopener noreferrer">vposy 的微博</a> 的置顶帖。</p>
]]></content>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Apache</title>
    <id>https://github.com/MisterChen9527/software/apache.html</id>
    <link href="https://github.com/MisterChen9527/software/apache.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>Apache 是世界使用排名第一的 Web 服务器软件。它可以运行在几乎所有广泛使用的计算机平台上，由于其跨平台和安全性被广泛使用，是最流行的 Web 服务器端软件之一。它快速、可靠并且可通过简单的 API 扩充，将 Perl/Python 等解释器编译到服务器中。</p>
]]></summary>
    <content type="html"><![CDATA[<p>Apache 是世界使用排名第一的 Web 服务器软件。它可以运行在几乎所有广泛使用的计算机平台上，由于其跨平台和安全性被广泛使用，是最流行的 Web 服务器端软件之一。它快速、可靠并且可通过简单的 API 扩充，将 Perl/Python 等解释器编译到服务器中。</p>

<h2 id="apache-是什么" tabindex="-1"> Apache 是什么</h2>
<p>Apache HTTP Server (简称 Apache )是 Apache 软件基金会的一个开放源码的网页服务器，可以在大多数计算机操作系统中运行，由于其多平台和安全性被广泛使用，是最流行的 Web 服务器端软件之一。它快速、可靠并且可通过简单的 API 扩展，将 Perl/Python 等解释器编译到服务器中。</p>
<p>Apache HTTP 服务器是一个模块化的服务器，源于 NCSAhttpd 服务器，经过多次修改，成为世界使用排名第一的 Web 服务器软件。
它可以运行在几乎所有广泛使用的计算机平台上。</p>
<h2 id="apache-模块" tabindex="-1"> Apache 模块</h2>
<p>Apache 通过引入各种模块来完成不同的功能。</p>
<h2 id="apache-官方文档" tabindex="-1"> Apache 官方文档</h2>
<ul>
<li><a href="https://httpd.apache.org/docs/2.4/zh-cn/" target="_blank" rel="noopener noreferrer">文档地址</a></li>
</ul>
<h2 id="apache-配置" tabindex="-1"> Apache 配置</h2>
<p>Apache 通过 conf 文件夹下的 httpd.conf 来配置。</p>
<div><pre><code><span># 此处填入 Apache 的路径</span>
<span>Define</span> SRVROOT <span>"U:/Apache"</span>
<span>ServerRoot</span> <span>"<span>${SRVROOT}</span>"</span>
<span>Listen</span> 127.0.0.1:80
<span>Listen</span> 127.0.0.1:443

<span>LoadModule</span> auth_basic_module modules/mod_auth_basic.so
<span>LoadModule</span> authz_core_module modules/mod_authz_core.so
<span>LoadModule</span> deflate_module modules/mod_deflate.so
<span>LoadModule</span> dir_module modules/mod_dir.so
<span>LoadModule</span> env_module modules/mod_env.so
<span>LoadModule</span> isapi_module modules/mod_isapi.so
<span>LoadModule</span> log_config_module modules/mod_log_config.so
<span>LoadModule</span> mime_module modules/mod_mime.so
<span>LoadModule</span> negotiation_module modules/mod_negotiation.so
<span>LoadModule</span> proxy_http2_module modules/mod_proxy_http2.so
<span>LoadModule</span> ratelimit_module modules/mod_ratelimit.so
<span>LoadModule</span> rewrite_module modules/mod_rewrite.so
<span>LoadModule</span> setenvif_module modules/mod_setenvif.so
<span>LoadModule</span> ssl_module modules/mod_ssl.so
<span># 此处填入 PHP 的 ssh 组件路径</span>
<span>LoadFile</span> <span>"u:/php/libssh2.dll"</span>
<span># 此处填入 PHP 的 Apache 组件路径</span>
<span>LoadModule</span> php7_module <span>"u:/PHP/php7apache2_4.dll"</span>
<span># 此处填入 PHP 的路径</span>
PHPIniDir <span>"u:/PHP"</span>

<span><span><span>&lt;</span>IfModule</span><span> unixd_module</span><span>></span></span>
<span>User</span> daemon
<span>Group</span> daemon
<span><span><span>&lt;/</span>IfModule</span><span>></span></span>

<span>ServerAdmin</span> mister-hope@outlook.com
<span>ServerName</span> localhost

<span><span><span>&lt;</span>Directory</span><span> /</span><span>></span></span>
  <span>AllowOverride</span> none
  <span>Require</span> all denied
<span><span><span>&lt;/</span>Directory</span><span>></span></span>

<span>DocumentRoot</span> <span>"<span>${SRVROOT}</span>/htdocs"</span>
<span><span><span>&lt;</span>Directory</span><span> <span>"<span>${SRVROOT}</span>/htdocs"</span></span><span>></span></span>
  <span>Options</span> FollowSymLinks
  <span>AllowOverride</span> All
  <span>Require</span> all granted
<span><span><span>&lt;/</span>Directory</span><span>></span></span>

<span><span><span>&lt;</span>IfModule</span><span> dir_module</span><span>></span></span>
  <span>DirectoryIndex</span> index.html index.php
<span><span><span>&lt;/</span>IfModule</span><span>></span></span>

<span><span><span>&lt;</span>Files</span><span> <span>".ht*"</span></span><span>></span></span>
  <span>Require</span> all denied
<span><span><span>&lt;/</span>Files</span><span>></span></span>

<span>ErrorLog</span> <span>"logs/error.log"</span>
<span>LogLevel</span> info

<span><span><span>&lt;</span>IfModule</span><span> log_config_module</span><span>></span></span>
  <span>LogFormat</span> <span>"<span>%h</span> <span>%l</span> <span>%u</span> <span>%t</span> \"<span>%r</span>\" %>s <span>%b</span> \"<span>%{Referer}</span>i\" \"<span>%{User-Agent}</span>i\""</span> combined
  <span>LogFormat</span> <span>"<span>%h</span> <span>%l</span> <span>%u</span> <span>%t</span> \"<span>%r</span>\" %>s <span>%b</span>"</span> common
  <span><span><span>&lt;</span>IfModule</span><span> logio_module</span><span>></span></span>
    <span>LogFormat</span> <span>"<span>%h</span> <span>%l</span> <span>%u</span> <span>%t</span> \"<span>%r</span>\" %>s <span>%b</span> \"<span>%{Referer}</span>i\" \"<span>%{User-Agent}</span>i\" <span>%I</span> <span>%O</span>"</span> combinedio
  <span><span><span>&lt;/</span>IfModule</span><span>></span></span>
  <span>CustomLog</span> <span>"logs/access.log"</span> common
<span><span><span>&lt;/</span>IfModule</span><span>></span></span>

<span><span><span>&lt;</span>IfModule</span><span> alias_module</span><span>></span></span>
  <span>ScriptAlias</span> /cgi-bin/ <span>"<span>${SRVROOT}</span>/cgi-bin/"</span>
<span><span><span>&lt;/</span>IfModule</span><span>></span></span>

<span><span><span>&lt;</span>Directory</span><span> <span>"<span>${SRVROOT}</span>/cgi-bin"</span></span><span>></span></span>
  <span>AllowOverride</span> None
  <span>Options</span> None
  <span>Require</span> all granted
<span><span><span>&lt;/</span>Directory</span><span>></span></span>

<span><span><span>&lt;</span>IfModule</span><span> headers_module</span><span>></span></span>
  <span>RequestHeader</span> unset Proxy early
<span><span><span>&lt;/</span>IfModule</span><span>></span></span>

<span><span><span>&lt;</span>IfModule</span><span> mime_module</span><span>></span></span>
  <span>TypesConfig</span> conf/mime.types
  <span>AddHandler</span> application/x-httpd-php .php
  <span>AddType</span> application/x-compress .Z
  <span>AddType</span> application/x-gzip .gz .tgz
  <span>AddType</span> application/x-httpd-php .php .html
<span><span><span>&lt;/</span>IfModule</span><span>></span></span>

<span><span><span>&lt;</span>IfModule</span><span> proxy_html_module</span><span>></span></span>
  <span>Include</span> conf/extra/proxy-html.conf
<span><span><span>&lt;/</span>IfModule</span><span>></span></span>
<span><span><span>&lt;</span>IfModule</span><span> ssl_module</span><span>></span></span>
  <span>SSLRandomSeed</span> startup builtin
  <span>SSLRandomSeed</span> connect builtin
<span><span><span>&lt;/</span>IfModule</span><span>></span></span>

<span><span><span>&lt;</span>VirtualHost</span><span> *<span>:</span>80</span><span>></span></span>
  <span>ServerAdmin</span> mister-hope@outlook.com
  <span>ServerName</span> nenu.com
  <span>ServerAlias</span> innenu
  <span>DocumentRoot</span> <span>"<span>${SRVROOT}</span>/htdocs"</span>
<span><span><span>&lt;/</span>VirtualHost</span><span>></span></span>

<span><span><span>&lt;</span>VirtualHost</span><span> *<span>:</span>443</span><span>></span></span>
  <span>ServerAdmin</span> mister-hope@outlook.com
  <span>ServerName</span> mrhope.com
  <span>ServerAlias</span> mrhope
  <span>DocumentRoot</span> <span>"<span>${SRVROOT}</span>/htdocs"</span>
<span><span><span>&lt;/</span>VirtualHost</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><ul>
<li>
<h3 id="serverroot" tabindex="-1"> ServerRoot</h3>
<p>指定服务器的根目录</p>
</li>
<li>
<h3 id="listen" tabindex="-1"> Listen</h3>
<p>指定服务器监听的 IP 与 port</p>
</li>
<li>
<h3 id="loadmodule" tabindex="-1"> LoadModule</h3>
<p>加载指定的模块来使服务器调用</p>
</li>
<li>
<h3 id="phpinidir" tabindex="-1"> PHPIniDir</h3>
<p>指定 PHP 目录</p>
</li>
<li>
<h3 id="unixd-module" tabindex="-1"> unixd_module</h3>
<p>分配用户权限</p>
</li>
<li>
<h3 id="serveradmin" tabindex="-1"> ServerAdmin</h3>
<p>服务器管理员</p>
</li>
<li>
<h3 id="servername" tabindex="-1"> ServerName</h3>
<p>服务器名称</p>
</li>
</ul>
]]></content>
    <category term="服务器" scheme=""/>
    <published>2019-12-12T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Chrome</title>
    <id>https://github.com/MisterChen9527/software/chrome.html</id>
    <link href="https://github.com/MisterChen9527/software/chrome.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>Chrome 是谷歌出品的浏览器。其内核使用 Chromium，基于 JavaScript V8，是全球比例最大的浏览器内核。</p>
]]></summary>
    <content type="html"><![CDATA[<p>Chrome 是谷歌出品的浏览器。其内核使用 Chromium，基于 JavaScript V8，是全球比例最大的浏览器内核。</p>

<h2 id="简介" tabindex="-1"> 简介</h2>
<p>Chrome 如今可以说是一家独大。很多国内浏览器都是基于 Chromium 内核的套壳浏览器。</p>
<p>Chrome 内核更新频繁，速度和安全性高，对新特性支持非常良好。另外谷歌具有十分强大的开发者工具，是前端开发使用的首选浏览器。目前最新的版本是 85。</p>
<h2 id="配置" tabindex="-1"> 配置</h2>
<p>由于 Chrome 是谷歌出品的浏览器，所以搜索栏默认使用 Google 搜索，而在中国无法访问 Google 服务，所以需要在右上角的菜单中选择设置，在搜索引擎设置中改为百度即可正常使用。</p>
<p><img src="@source/software/assets/searchEngine.png" alt="更改页面"></p>
<h2 id="快捷键" tabindex="-1"> 快捷键</h2>
<p>Chrome 具有很多快捷键，熟练掌握后可以大幅减少时间。</p>
<ul>
<li><code>Ctrl + J</code>: 打开下载页面；</li>
<li><code>Ctrl + H</code>: 打开历史页面；</li>
<li><code>Ctrl + T</code>: 打开新标签页；</li>
<li><code>Ctrl + Shift + T</code>: 恢复上一个关闭的标签页；</li>
<li><code>Ctrl + N</code>: 打开新的窗口；</li>
<li><code>Ctrl + W</code>: 关闭当前标签页；</li>
<li><code>Ctrl + Tab</code>: 切换标签页；</li>
<li><code>Ctrl + Shift + Tab</code>: 反向切换标签页；</li>
<li><code>Ctrl + F</code>: 反向切换标签页；</li>
<li><code>Ctrl + Shift + I</code> 或 <code>F12</code>: 打开开发者工具；</li>
</ul>
<h2 id="开发者工具" tabindex="-1"> 开发者工具</h2>
<p><img src="@source/software/assets/devTool.png" alt="开发者工具"></p>
<p>使用 <code>Ctrl + Shift + I</code> 或 <code>F12</code> 即可打开开发者工具，在开发者工具里，您可以自由的对任何网页进行调试。</p>
<h2 id="chrome-推荐扩展" tabindex="-1"> Chrome 推荐扩展</h2>
<ul>
<li>AdGuard: 广告屏蔽；</li>
<li>Adobe Acrobat: 将当前网页转为 Adobe PDF 文件；</li>
<li>Betternet Unlimited Free VPN Proxy: 免费的 VPN 代理；</li>
<li>Checker Plus for Gmail™: Gmail 邮件管理；</li>
<li>Convertio: 非常强大的文件在线转换；</li>
<li>Dark Reader: 为网页启用夜间模式；</li>
<li>Enhanced GitHub: 能够展示仓库大小，文件大小和快速下载按钮；</li>
<li>Evernote Web Clipper: 印象笔记剪藏，非常好用的保存工具；</li>
<li>Google 翻译: 谷歌翻译软件；</li>
<li>ImTranslator: 翻译，字典，声音</li>
<li>Infinity: 一款非常好的标签页软件；</li>
<li>Office Online: 在线查看并编辑 Office 文件；</li>
<li>React Developer Tools: React 开发者工具</li>
<li>Save to Pocket: 离线网页的最佳插件；</li>
<li>VPN Free - Betternet Unlimited VPN Proxy: 一款免费的 VPN 插件；</li>
<li>Vue.js Devtools: Vue.js 的开发者工具；</li>
</ul>
]]></content>
    <category term="软件" scheme=""/>
    <published>2019-12-13T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">代码编辑器</title>
    <id>https://github.com/MisterChen9527/software/editor.html</id>
    <link href="https://github.com/MisterChen9527/software/editor.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li>
<p><a href="/software/vscode/">VS Code</a></p>
<p>VS Code 的全称是 Visual Studio Code，是一款开源的、免费的、跨平台的、高性能的、轻量级的代码编辑器。它在性能、语言支持、开源社区方面，都做的很不错。</p>
<p>VS Code 具有最大的编辑器社区，插件是所有编辑器里最全的。可以通过安装扩展实现几乎所有的功能，但扩展设置界面对新手不够友好，适合有一定经验的开发者。</p>
<div><p>提示</p>
<p>推荐使用轻量的 Visual Studio Code。</p>
</div>
</li>
<li>
<p>其他代码编辑器</p>
<p>在不同领域的开发者可能会偏向不同种类的开发工具。下面列举其他常见的代码编辑器。</p>
<ul>
<li>WebStorm 是专业的 web 开发工具，提供格式化、代码补全等选项。</li>
<li>PhpStorm 是专业的 php 开发工具，提供格式化、代码补全等选项。</li>
<li><a href="https://notepad-plus-plus.org/" target="_blank" rel="noopener noreferrer">notepad++</a></li>
<li><a href="https://atom.io/" target="_blank" rel="noopener noreferrer">atom</a></li>
<li><a href="https://www.sublimetext.com/3" target="_blank" rel="noopener noreferrer">sublime text</a></li>
</ul>
</li>
</ul>
<div><p>IDE 与编辑器</p>
<p>IDE 和编辑器是有区别的:</p>
<ul>
<li>
<p>IDE: 对代码会有较好的智能提示，同时侧重于工程项目，对项目的开发、调试工作有较好的图像化界面的支持，因此比较笨重。比如 Eclipse 的定位就是 IDE。</p>
</li>
<li>
<p>编辑器: 要相对轻量许多，侧重于文本的编辑。比如 Sublime Text 的定位就是编辑器。再比如 Windows 系统自带的「记事本」就是最简单的编辑器。</p>
</li>
</ul>
<p>需要注意的是，VS Code 的定位是编辑器，而非 IDE。但 VS Code 又比一般的编辑器的功能要丰富许多。</p>
</div>
]]></content>
    <category term="软件" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Nginx</title>
    <id>https://github.com/MisterChen9527/software/nginx.html</id>
    <link href="https://github.com/MisterChen9527/software/nginx.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>Nginx 是一个高性能的 HTTP 和反向代理服务器，也是一个 IMAP / POP3 / SMTP 代理服务器。其特点是占有内存少，并发能力强，稳定性高，并且 Nginx 也拥有友好灵活的配置。</p>
]]></summary>
    <content type="html"><![CDATA[<p>Nginx 是一个高性能的 HTTP 和反向代理服务器，也是一个 IMAP / POP3 / SMTP 代理服务器。其特点是占有内存少，并发能力强，稳定性高，并且 Nginx 也拥有友好灵活的配置。</p>

<h2 id="启动-停止和重新加载配置" tabindex="-1"> 启动，停止和重新加载配置</h2>
<p>要启动 nginx，请运行可执行文件。一旦启动 nginx，就可以通过使用 <code>-s</code> 参数调用可执行文件来对其进行控制。使用以下语法:</p>
<div><pre><code>nginx -s signal
</code></pre><div aria-hidden="true"><div></div></div></div><p>其中 <code>signal</code> 可能是以下之一:</p>
<ul>
<li>stop - 快速关机</li>
<li>quit — 正常关机</li>
<li>reload — 重新加载配置文件</li>
<li>reopen — 重新打开日志文件</li>
</ul>
<h2 id="配置文件的结构" tabindex="-1"> 配置文件的结构</h2>
<p>Nginx 由受配置文件中指定的指令控制的模块组成。指令分为简单指令和块指令。一个简单的指令由名称和参数组成，这些名称和参数之间用空格分隔，并以分号(<code>;</code>)结尾。块指令的结构与简单指令的结构相同，但是它不以分号结尾，而是带有一组用括号 (<code>{</code> 和 <code>}</code>) 括起来的附加指令。如果一个块指令在括号内可以有其他指令，则称为 context (例如: <code>events</code>, <code>http</code>, <code>server</code> 和 <code>location</code>)。</p>
<p>放置在任何 context 外部的配置文件中的指令都被视为在 main context 中。<code>events</code> 和 <code>http</code> 指令位于 <code>main</code> context 中，<code>server</code> 位于 <code>http</code> 中, 并且 <code>location</code> 在 <code>server</code> 中</p>
<p><code>#</code> 号后的其余行被视为注释。</p>
<h2 id="提供静态内容" tabindex="-1"> 提供静态内容</h2>
<p>Web 服务器的一项重要任务是分发文件(例如图像或静态 HTML 页面)。您将实现一个示例，其中将根据请求从不同的本地目录提供文件: <code>/data/www</code> (可能包含 HTML 文件)和 <code>/data/images</code>(包含图像)。这将需要编辑配置文件，并在带有两个位置块的 http 块内设置服务器块。</p>
<p>首先，创建 <code>/data/www</code> 目录，并将包含任何文本内容的 <code>index.html</code> 文件放入其中，并创建 <code>/data/images</code> 目录并将一些图像放入其中。</p>
<p>接下来，打开配置文件。默认配置文件已经包含了服务器块的几个示例，大部分已被注释掉。现在，注释掉所有这些块并启动一个新的服务器块:</p>
<div><pre><code><span><span>http</span></span> <span>{</span>
  <span><span>server</span></span> <span>{</span>
  <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><p>通常，配置文件可以包括几个服务器块，这些服务器块通过它们侦听的端口和服务器名称来区分。一旦 nginx 决定了哪个服务器处理请求，它就会根据服务器块内定义的 location 指令的参数测试请求标头中指定的 URI。</p>
<p>将以下位置块添加到服务器块:</p>
<div><pre><code><span><span>location</span> /</span> <span>{</span>
  <span><span>root</span> /data/www</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>与请求中的 URI 相比，此位置块指定 “<code>/</code>” 前缀。对于匹配的请求，URI 将被添加到 root 指令中指定的路径，即 <code>/data/www</code>，以形成本地文件系统上所请求文件的路径。如果有多个匹配的位置块，nginx 将选择前缀最长的位置块。上面的位置块提供了最短的前缀，长度为 1，因此，只有在所有其他位置块均未提供匹配项时，才会使用该块。</p>
<p>接下来，添加第二个位置块:</p>
<div><pre><code><span><span>location</span> /images/</span> <span>{</span>
  <span><span>root</span> /data</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>这将匹配以 <code>/images/</code> 开头的请求(位置 <code>/</code> 也匹配此类请求，但前缀较短)。</p>
<p>服务器块的最终配置应如下所示:</p>
<div><pre><code><span><span>server</span></span> <span>{</span>
  <span><span>location</span> /</span> <span>{</span>
    <span><span>root</span> /data/www</span><span>;</span>
  <span>}</span>

  <span><span>location</span> /images/</span> <span>{</span>
    <span><span>root</span> /data</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>这已经是服务器的工作配置，可以在标准端口 <code>80</code> 上侦听，并且可以在本地计算机上的 <code>http://localhost/</code> 上访问。响应以 <code>/images/</code> 开头的 URI 请求，服务器将从 <code>/data/images</code> 目录中发送文件。例如，为响应 <code>http://localhost/images/example.png</code> 请求，nginx 将发送文件 <code>/data/images/example.png</code>。如果该文件不存在，nginx 将发送一个注明 404 错误的响应。URI 不以 <code>/images/</code> 开头的请求将被映射到 <code>/data/www</code> 目录。例如，nginx 会响应 <code>http://localhost/some/example.html</code> 请求发送 <code>/data/www/some/example.html</code> 文件。</p>
<p>要应用新配置，请启动 nginx (如果尚未启动)，或通过执行以下命令向 nginx 的主进程发送 <code>reload</code> 信号:</p>
<div><pre><code>nginx -s reload
</code></pre><div aria-hidden="true"><div></div></div></div><p>如果某些东西无法按预期工作，则可以尝试在目录 <code>/usr/local/nginx/logs</code> 或目录 <code>/var/log/nginx</code> 中的 access.log 和 error.log 文件中找出原因。。</p>
<h2 id="设置简单的代理服务器" tabindex="-1"> 设置简单的代理服务器</h2>
<p>Nginx 的一种常用用法是将其设置为代理服务器，这意味着服务器可以接收请求，将请求传递给代理服务器，从请求中检索响应并将它们发送给客户端。</p>
<p>我们将配置一个基本的代理服务器，该服务器为图像请求和本地目录中的文件提供服务，并将所有其他请求发送到代理服务器。在此示例中，两个服务器都将在单个 nginx 实例上定义。</p>
<p>首先，通过向 nginx 的配置文件中添加另一个 <code>server</code> 块来定义代理服务器，其内容如下:</p>
<div><pre><code><span><span>server</span></span> <span>{</span>
  <span><span>listen</span> <span>8080</span></span><span>;</span>
  <span><span>root</span> /data/up1</span><span>;</span>

  <span><span>location</span> /</span> <span>{</span>
  <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>这将是一个简单的服务器，它在端口 8080 上侦听 (以前，自从使用标准端口 80 以来，未指定 listen 指令) 并将所有请求映射到本地文件系统的 <code>/data/up1</code> 目录中。创建此目录，并将 <code>index.html</code> 文件放入其中。请注意，根指令位于服务器上下文中。当选择用于服务请求的位置块不包括自己的根指令时，将使用这种根指令。</p>
<p>接下来，使用上一部分中的服务器配置并对其进行修改以使其成为代理服务器配置。在第一个位置块中，将 <code>proxy_pass</code> 指令与参数中指定的代理服务器的协议，名称和端口放在一起 (在本例中为 <code>http://localhost:8080</code> ):</p>
<div><pre><code><span><span>server</span></span> <span>{</span>
  <span><span>location</span> /</span> <span>{</span>
    <span><span>proxy_pass</span> http://localhost:8080</span><span>;</span>
  <span>}</span>

  <span><span>location</span> /images/</span> <span>{</span>
    <span><span>root</span> /data</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>我们将修改第二个 location 块，该位置块当前将带有 <code>/images/</code> 前缀的请求映射到 <code>/data/images</code> 目录下的文件，以使其与具有典型文件扩展名的图像的请求相匹配。修改后的位置块如下所示:</p>
<div><pre><code><span><span>location</span> ~ \.(gif|jpg|png)$</span> <span>{</span>
  <span><span>root</span> /data/images</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>该参数是一个正则表达式，它匹配以 <code>.gif</code>，<code>.jpg</code> 或 <code>.png</code> 结尾的所有 URI。正则表达式应以 <code>~</code> 开头。相应的请求将被映射到 <code>/ data/images</code> 目录。</p>
<p>当 nginx 选择一个 <code>location</code> 块来服务请求时，它首先检查指定前缀的 <code>location</code> 指令，记住带有最长前缀的 <code>location</code>，然后检查正则表达式。如果存在与正则表达式匹配的内容，nginx 会选择该 “<code>location</code>”，否则，它将选择之前记住的位置。</p>
<p>代理服务器的最终配置如下所示:</p>
<div><pre><code><span><span>server</span></span> <span>{</span>
  <span><span>location</span> /</span> <span>{</span>
    <span><span>proxy_pass</span> http://localhost:8080/</span><span>;</span>
  <span>}</span>

  <span><span>location</span> ~ \.(gif|jpg|png)$</span> <span>{</span>
    <span><span>root</span> /data/images</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>该服务器将过滤以 <code>.gif</code>，<code>.jpg</code> 或 <code>.png</code> 结尾的请求，并将它们映射到目录 <code>/data/images</code>(通过将 URI 添加到根指令的参数)，并将所有其他请求传递给上面配置的代理服务器。</p>
<p>要应用新配置，请按照前面几节的说明将重载信号发送到 nginx。</p>
<p>还有许多其他指令可用于进一步配置代理连接。</p>
<h2 id="设置-fastcgi-代理" tabindex="-1"> 设置 FastCGI 代理</h2>
<p>Nginx 可用于将请求路由到 FastCGI 服务器，该服务器运行使用各种框架和编程语言 (例如 PHP) 构建的应用程序。</p>
<p>与 FastCGI 服务器一起使用的最基本的 Nginx 配置包括使用 <code>fastcgi_pass</code> 指令而不是 <code>proxy_pass</code> 指令和 <code>fastcgi_param</code> 指令来设置传递给 FastCGI 服务器的参数。假设 FastCGI 服务器可以在 <code>localhost:9000</code> 上访问。以上一节中的代理配置为基础，用 <code>fastcgi_pass</code> 指令替换 <code>proxy_pass</code> 指令，并将参数更改为 <code>localhost:9000</code>。在 PHP 中， <code>SCRIPT_FILENAME</code> 参数用于确定脚本名称，而 <code>QUERY_STRING</code> 参数用于传递请求参数。配置的结果为:</p>
<div><pre><code><span><span>server</span></span> <span>{</span>
  <span><span>location</span> /</span> <span>{</span>
    <span><span>fastcgi_pass</span>  localhost:9000</span><span>;</span>
    <span><span>fastcgi_param</span> SCRIPT_FILENAME <span>$document_root</span><span>$fastcgi_script_name</span></span><span>;</span>
    <span><span>fastcgi_param</span> QUERY_STRING    <span>$query_string</span></span><span>;</span>
  <span>}</span>

  <span><span>location</span> ~ \.(gif|jpg|png)$</span> <span>{</span>
    <span><span>root</span> /data/images</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>这将设置一个服务器，该服务器将通过 FastCGI 协议将除静态图像请求以外的所有请求路由到运行在 <code>localhost:9000</code> 上的代理服务器。</p>
<h2 id="官方文档" tabindex="-1"> 官方文档</h2>
<ul>
<li><a href="https://docs.nginx.com/nginx/admin-guide/" target="_blank" rel="noopener noreferrer">点击此处</a></li>
</ul>
]]></content>
    <category term="服务器" scheme=""/>
    <published>2019-12-13T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Postman</title>
    <id>https://github.com/MisterChen9527/software/postman.html</id>
    <link href="https://github.com/MisterChen9527/software/postman.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h1 id="postman" tabindex="-1"> Postman</h1>
<p>Postman 是一个强大的抓包与网络调试工具。</p>
]]></content>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">应用基础知识</title>
    <id>https://github.com/MisterChen9527/code/Android/base.html</id>
    <link href="https://github.com/MisterChen9527/code/Android/base.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>本章包含了一些关于 Android 开发的基础内容。</p>
]]></summary>
    <content type="html"><![CDATA[<p>本章包含了一些关于 Android 开发的基础内容。</p>

<p>您可以使用 Kotlin、Java 和 C++ 语言编写 Android 应用。Android SDK 工具会将您的代码连同任何数据和资源文件编译成一个 APK(Android 软件包)，即带有 <code>.apk</code> 后缀的归档文件。一个 APK 文件包含 Android 应用的所有内容，它也是 Android 设备用来安装应用的文件。</p>
<p>每个 Android 应用都处于各自的安全沙盒中，并受以下 Android 安全功能的保护:</p>
<ul>
<li>
<p>Android 操作系统是一种多用户 Linux 系统，其中的每个应用都是一个不同的用户；
默认情况下，系统会为每个应用分配一个唯一的 Linux 用户 ID(该 ID 仅由系统使用，应用并不知晓)。系统会为应用中的所有文件设置权限，使得只有分配给该应用的用户 ID 才能访问这些文件；</p>
</li>
<li>
<p>每个进程都拥有自己的虚拟机 (VM)，因此应用代码独立于其他应用而运行。</p>
</li>
<li>
<p>默认情况下，每个应用都在其自己的 Linux 进程内运行。Android 系统会在需要执行任何应用组件时启动该进程，然后当不再需要该进程或系统必须为其他应用恢复内存时，其便会关闭该进程。</p>
</li>
</ul>
<p>Android 系统实现了最小权限原则。换言之，默认情况下，每个应用只能访问执行其工作所需的组件，而不能访问其他组件。这样便能创建非常安全的环境，在此环境中，应用无法访问其未获得权限的系统部分。不过，应用仍可通过一些途径与其他应用共享数据以及访问系统服务:</p>
<ul>
<li>
<p>可以安排两个应用共享同一 Linux 用户 ID，在此情况下，二者便能访问彼此的文件。为节省系统资源，也可安排拥有相同用户 ID 的应用在同一 Linux 进程中运行，并共享同一 VM。应用还必须使用相同的证书进行签名。</p>
</li>
<li>
<p>应用可以请求访问设备数据(如用户的联系人、短信消息、可装载存储装置(SD 卡)、相机、蓝牙等)的权限。用户必须明确授予这些权限。如需了解详细信息，请参阅使用系统权限。</p>
</li>
</ul>
<h2 id="应用组件" tabindex="-1"> 应用组件</h2>
<p>应用组件是 Android 应用的基本构建块。每个组件都是一个入口点，系统或用户可通过该入口点进入您的应用。有些组件会依赖于其他组件。</p>
<p>共有四种不同的应用组件类型:</p>
<ul>
<li>Activity</li>
<li>服务</li>
<li>广播接收器</li>
<li>内容提供程序</li>
</ul>
<p>每种类型都有不同的用途和生命周期，后者会定义如何创建和销毁组件。</p>
<h3 id="activity" tabindex="-1"> Activity</h3>
<p>Activity 是与用户交互的入口点。它表示拥有界面的单个屏幕。例如，电子邮件应用可能有一个显示新电子邮件列表的 Activity、一个用于撰写电子邮件的 Activity 以及一个用于阅读电子邮件的 Activity。尽管这些 Activity 通过协作在电子邮件应用中形成一种紧密结合的用户体验，但每个 Activity 都独立于其他 Activity 而存在。因此，其他应用可以启动其中任何一个 Activity(如果电子邮件应用允许)。例如，相机应用可以启动电子邮件应用内用于撰写新电子邮件的 Activity，以便用户共享图片。Activity 有助于完成系统和应用程序之间的以下重要交互:</p>
<ul>
<li>
<p>追踪用户当前关心的内容(屏幕上显示的内容)，以确保系统继续运行托管 Activity 的进程。</p>
</li>
<li>
<p>了解先前使用的进程包含用户可能返回的内容(已停止的 Activity)，从而更优先保留这些进程。</p>
</li>
<li>
<p>帮助应用处理终止其进程的情况，以便用户可以返回已恢复其先前状态的 Activity。</p>
</li>
<li>
<p>提供一种途径，让应用实现彼此之间的用户流，并让系统协调这些用户流。(此处最经典的示例是共享。)</p>
</li>
</ul>
<p>您需将 Activity 作为 Activity 类的子类来实现。如需了解有关 Activity 类的更多信息，请参阅 Activity 开发者指南。</p>
<h2 id="服务" tabindex="-1"> 服务</h2>
<p>服务是一个通用入口点，用于因各种原因使应用在后台保持运行状态。它是一种在后台运行的组件，用于执行长时间运行的操作或为远程进程执行作业。服务不提供界面。例如，当用户使用其他应用时，服务可能会在后台播放音乐或通过网络获取数据，但这不会阻断用户与 Activity 的交互。诸如 Activity 等其他组件可以启动服务，使该服务运行或绑定到该服务，以便与其进行交互。事实上，有两种截然不同的语义服务可以告知系统如何管理应用: 已启动服务会告知系统使其运行至工作完毕。此类工作可以是在后台同步一些数据，或者在用户离开应用后继续播放音乐。在后台同步数据或播放音乐也代表了两种不同类型的已启动服务，而这些服务可以修改系统处理它们的方式:</p>
<ul>
<li>
<p>音乐播放是用户可直接感知的服务，因此，应用会向用户发送通知，表明其希望成为前台，从而告诉系统此消息；在此情况下，系统明白它应尽全力维持该服务进程运行，因为进程消失会令用户感到不快。</p>
</li>
<li>
<p>通常，用户不会意识到常规后台服务正处于运行状态，因此系统可以更自由地管理其进程。如果系统需要使用 RAM 来处理用户更迫切关注的内容，则其可能允许终止服务(然后在稍后的某个时刻重启服务)。</p>
</li>
</ul>
<p>绑定服务之所以能运行，原因是某些其他应用(或系统)已表示希望使用该服务。从根本上讲，这是为另一个进程提供 API 的服务。因此，系统会知晓这些进程之间存在依赖关系，所以如果进程 A 绑定到进程 B 中的服务，系统便知道自己需使进程 B(及其服务)为进程 A 保持运行状态。此外，如果进程 A 是用户关心的内容，系统随即也知道将进程 B 视为用户关心的内容。由于存在灵活性(无论好坏)，服务已成为非常有用的构建块，并且可实现各种高级系统概念。动态壁纸、通知侦听器、屏幕保护程序、输入方法、无障碍功能服务以及众多其他核心系统功能均可构建为在其运行时由应用实现、系统绑定的服务。</p>
<p>您需将服务作为 Service 的子类来实现。如需了解有关 Service 类的更多信息，请参阅服务开发者指南。</p>
<h2 id="广播接收器" tabindex="-1"> 广播接收器</h2>
<p>借助广播接收器组件，系统能够在常规用户流之外向应用传递事件，从而允许应用响应系统范围内的广播通知。由于广播接收器是另一个明确定义的应用入口，因此系统甚至可以向当前未运行的应用传递广播。例如，应用可通过调度提醒来发布通知，以告知用户即将发生的事件。而且，通过将该提醒传递给应用的广播接收器，应用在提醒响起之前即无需继续运行。许多广播均由系统发起，例如，通知屏幕已关闭、电池电量不足或已拍摄照片的广播。应用也可发起广播，例如，通知其他应用某些数据已下载至设备，并且可供其使用。尽管广播接收器不会显示界面，但其可以创建状态栏通知，在发生广播事件时提醒用户。但广播接收器更常见的用途只是作为通向其他组件的通道，旨在执行极少量的工作。例如，它可能会根据带 JobScheduler 的事件调度 JobService 来执行某项工作
广播接收器作为 BroadcastReceiver 的子类实现，并且每条广播都作为 Intent 对象进行传递。如需了解详细信息，请参阅 BroadcastReceiver 类。</p>
<h2 id="内容提供程序" tabindex="-1"> 内容提供程序</h2>
<p>内容提供程序管理一组共享的应用数据，您可以将这些数据存储在文件系统、SQLite 数据库、网络中或者您的应用可访问的任何其他持久化存储位置。其他应用可通过内容提供程序查询或修改数据(如果内容提供程序允许)。例如，Android 系统可提供管理用户联系人信息的内容提供程序。因此，任何拥有适当权限的应用均可查询内容提供程序(如 <code>ContactsContract.Data</code>)，以读取和写入特定人员的相关信息。我们很容易将内容提供程序看作数据库上的抽象，因为其内置的大量 API 和支持时常适用于这一情况。但从系统设计的角度看，二者的核心目的不同。对系统而言，内容提供程序是应用的入口点，用于发布由 URI 架构识别的已命名数据项。因此，应用可以决定如何将其包含的数据映射到 URI 命名空间，进而将这些 URI 分发给其他实体。反之，这些实体也可使用分发的 URI 来访问数据。在管理应用的过程中，系统可以执行以下特殊操作:</p>
<ul>
<li>
<p>分配 URI 无需应用保持运行状态，因此 URI 可在其所属的应用退出后继续保留。当系统必须从相应的 URI 检索应用数据时，系统只需确保所属应用仍处于运行状态。</p>
</li>
<li>
<p>这些 URI 还会提供重要的细粒度安全模型。例如，应用可将其所拥有图像的 URI 放到剪贴板上，但将其内容提供程序锁定，以便其他应用程序无法随意访问它。当第二个应用尝试访问剪贴板上的 URI 时，系统可允许该应用通过临时的 URI 授权来访问数据，这样便只能访问 URI 后面的数据，而非第二个应用中的其他任何内容。</p>
</li>
</ul>
<p>内容提供程序也适用于读取和写入您的应用不共享的私有数据。</p>
<p>内容提供程序作为 ContentProvider 的子类实现，并且其必须实现一组标准 API，以便其他应用能够执行事务。如需了解详细信息，请参阅内容提供程序开发者指南。</p>
<hr>
<p>Android 系统设计的独特之处在于，任何应用都可启动其他应用的组件。例如，当您想让用户使用设备相机拍摄照片时，另一个应用可能也可执行该操作，因而您的应用便可使用该应用，而非自行产生一个 Activity 来拍摄照片。您无需加入甚至链接到该相机应用的代码。只需启动拍摄照片的相机应用中的 Activity 即可。完成拍摄时，系统甚至会将照片返回您的应用，以便您使用。对用户而言，这就如同相机是您应用的一部分。</p>
<p>当系统启动某个组件时，它会启动该应用的进程(如果尚未运行)，并实例化该组件所需的类。例如，如果您的应用启动相机应用中拍摄照片的 Activity，则该 Activity 会在属于相机应用的进程(而非您的应用进程)中运行。因此，与大多数其他系统上的应用不同，Android 应用并没有单个入口点(即没有 main() 函数)。</p>
<p>由于系统在单独的进程中运行每个应用，且其文件权限会限制对其他应用的访问，因此您的应用无法直接启动其他应用中的组件，但 Android 系统可以。如要启动其他应用中的组件，请向系统传递一条消息，说明启动特定组件的 Intent。系统随后便会为您启动该组件。</p>
<h2 id="启动组件" tabindex="-1"> 启动组件</h2>
<p>在四种组件类型中，有三种(Activity、服务和广播接收器)均通过异步消息 Intent 进行启动。Intent 会在运行时对各个组件进行互相绑定。您可以将 Intent 视为从其他组件(无论该组件是属于您的应用还是其他应用)请求操作的信使。</p>
<p>您需使用 Intent 对象创建 Intent，该对象通过定义消息来启动特定组件(显式 Intent)或特定的组件类型(隐式 Intent)。</p>
<p>对于 Activity 和服务，Intent 会定义要执行的操作(例如，查看或发送某内容)，并且可指定待操作数据的 URI，以及正在启动的组件可能需要了解的信息。例如，Intent 可能会传达对 Activity 的请求，以便显示图像或打开网页。在某些情况下，您可以通过启动 Activity 来接收结果，这样 Activity 还会返回 Intent 中的结果。例如，您可以发出一个 Intent，让用户选取某位联系人并将其返回给您。返回 Intent 包含指向所选联系人的 URI。</p>
<p>对于广播接收器，Intent 只会定义待广播的通知。例如，指示设备电池电量不足的广播只包含指示“电池电量不足”的已知操作字符串。</p>
<p>与 Activity、服务和广播接收器不同，内容提供程序并非由 Intent 启动。相反，它们会在成为 ContentResolver 的请求目标时启动。内容解析程序会通过内容提供程序处理所有直接事务，因此通过提供程序执行事务的组件便无需执行事务，而是改为在 ContentResolver 对象上调用方法。这会在内容提供程序与请求信息的组件之间留出一个抽象层(以确保安全)。</p>
<p>每种组件都有不同的启动方法:</p>
<ul>
<li>
<p>如要启动 Activity，您可以向 startActivity() 或 startActivityForResult() 传递 Intent(当您想让 Activity 返回结果时)，或者为其安排新任务。</p>
</li>
<li>
<p>在 Android 5.0(API 级别 21)及更高版本中，您可以使用 JobScheduler 类来调度操作。对于早期 Android 版本，您可以通过向 startService() 传递 Intent 来启动服务(或对执行中的服务下达新指令)。您也可通过向将 bindService() 传递 Intent 来绑定到该服务。</p>
</li>
<li>
<p>您可以通过向 <code>sendBroadcast()</code>、<code>sendOrderedBroadcast()</code> 或 <code>sendStickyBroadcast()</code> 等方法传递 Intent 来发起广播。</p>
</li>
<li>
<p>您可以通过在 ContentResolver 上调用 <code>query()</code>，对内容提供程序执行查询。</p>
</li>
</ul>
<p>如需了解有关 Intent 用法的详细信息，请参阅 Intent 和 Intent 过滤器文档。以下文档将为您详细介绍如何启动特定组件: Activity、服务、BroadcastReceiver 和内容提供程序。</p>
<h2 id="清单文件" tabindex="-1"> 清单文件</h2>
<p>在 Android 系统启动应用组件之前，系统必须通过读取应用的清单文件 (AndroidManifest.xml) 确认组件存在。您的应用必须在此文件中声明其所有组件，该文件必须位于应用项目目录的根目录中。</p>
<p>除了声明应用的组件外，清单文件还有许多其他作用，如:</p>
<ul>
<li>
<p>确定应用需要的任何用户权限，如互联网访问权限或对用户联系人的读取权限。</p>
</li>
<li>
<p>根据应用使用的 API，声明应用所需的最低 API 级别。</p>
</li>
<li>
<p>声明应用使用或需要的硬件和软件功能，如相机、蓝牙服务或多点触摸屏幕。</p>
</li>
<li>
<p>声明应用需要链接的 API 库(Android 框架 API 除外)，如 Google 地图库。</p>
</li>
</ul>
<h3 id="声明组件" tabindex="-1"> 声明组件</h3>
<p>清单文件的主要任务是告知系统应用组件的相关信息。例如，清单文件可按如下所示声明 Activity:</p>
<div><pre><code><span>&lt;?xml version="1.0" encoding="utf-8"?></span>
<span><span><span>&lt;</span>manifest</span> <span>...</span> <span>></span></span>
  <span><span><span>&lt;</span>application</span> <span><span>android:</span>icon</span><span><span>=</span><span>"</span>@drawable/app_icon.png<span>"</span></span> <span>...</span> <span>></span></span>
    <span><span><span>&lt;</span>activity</span> <span><span>android:</span>name</span><span><span>=</span><span>"</span>com.example.project.ExampleActivity<span>"</span></span> <span><span>android:</span>label</span><span><span>=</span><span>"</span>@string/example_label<span>"</span></span> <span>...</span> <span>></span></span>
    <span><span><span>&lt;/</span>activity</span><span>></span></span>
    ...
  <span><span><span>&lt;/</span>application</span><span>></span></span>
<span><span><span>&lt;/</span>manifest</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>在 <code>&lt;application&gt;</code> 元素中，android:icon 属性指向标识应用的图标所对应的资源。</p>
<p>在 <code>&lt;activity&gt;</code> 元素中，android:name 属性指定 Activity 子类的完全限定类名，<code>android:label</code> 属性指定用作 Activity 的用户可见标签的字符串。</p>
<p>您必须使用以下元素声明所有应用组件:</p>
<ul>
<li>
<p>Activity 的 <code>&lt;activity&gt;</code> 元素。</p>
</li>
<li>
<p>服务的 <code>&lt;service&gt;</code> 元素。</p>
</li>
<li>
<p>广播接收器的 <code>&lt;receiver&gt;</code> 元素。</p>
</li>
<li>
<p>内容提供程序的 <code>&lt;provider&gt;</code> 元素。</p>
</li>
</ul>
<p>如果未在清单文件中声明源代码中包含的 Activity、服务和内容提供程序，则这些组件对系统不可见，因此也永远不会运行。不过，您可以 BroadcastReceiver 对象的形式，在清单中声明或在代码中动态创建广播接收器；以及通过调用 <code>registerReceiver()</code>，在系统中注册广播接收器。</p>
<p>如需详细了解如何为您的应用构建清单文件，请参阅 AndroidManifest.xml 文件文档。</p>
<h3 id="声明组件功能" tabindex="-1"> 声明组件功能</h3>
<p>如上文启动组件中所述，您可以使用 Intent 来启动 Activity、服务和广播接收器。您可以通过在 Intent 中显式命名目标组件(使用组件类名)来使用 Intent。您还可使用隐式 Intent，通过它来描述要执行的操作类型和待操作数据(可选)。借助隐式 Intent，系统能够在设备上找到可执行该操作的组件，并启动该组件。如果有多个组件可以执行 Intent 所描述的操作，则由用户选择使用哪一个组件。</p>
<div><p>警告</p>
<p>如果您使用 Intent 来启动 Service，请使用显式 Intent 来确保应用的安全性。使用隐式 Intent 启动服务存在安全隐患，因为您无法确定哪些服务将响应 Intent，且用户无法看到哪些服务已启动。从 Android 5.0 (API 级别 21) 开始，如果使用隐式 Intent 调用 <code>bindService()</code>，系统会抛出异常。请勿为您的服务声明 Intent 过滤器。</p>
</div>
<p>通过将收到的 Intent 与设备上其他应用的清单文件中提供的 Intent 过滤器进行比较，系统便可识别能响应 Intent 的组件。</p>
<p>在应用的清单文件中声明 Activity 时，您可以选择性地加入声明 Activity 功能的 Intent 过滤器，以便响应来自其他应用的 Intent。您可以将 <code>&lt;intent-filter&gt;</code> 元素作为组件声明元素的子项进行添加，从而为您的组件声明 Intent 过滤器。</p>
<p>例如，如果您构建的电子邮件应用包含用于撰写新电子邮件的 Activity，则可通过声明 Intent 过滤器来响应 “send” Intent(目的是发送新电子邮件)，如下方示例所示:</p>
<div><pre><code><span><span><span>&lt;</span>manifest</span> <span>...</span> <span>></span></span>
  ...
  <span><span><span>&lt;</span>application</span> <span>...</span> <span>></span></span>
    <span><span><span>&lt;</span>activity</span> <span><span>android:</span>name</span><span><span>=</span><span>"</span>com.example.project.ComposeEmailActivity<span>"</span></span><span>></span></span>
      <span><span><span>&lt;</span>intent-filter</span><span>></span></span>
        <span><span><span>&lt;</span>action</span> <span><span>android:</span>name</span><span><span>=</span><span>"</span>android.intent.action.SEND<span>"</span></span> <span>/></span></span>
        <span><span><span>&lt;</span>data</span> <span><span>android:</span>type</span><span><span>=</span><span>"</span>*/*<span>"</span></span> <span>/></span></span>
        <span><span><span>&lt;</span>category</span> <span><span>android:</span>name</span><span><span>=</span><span>"</span>android.intent.category.DEFAULT<span>"</span></span> <span>/></span></span>
      <span><span><span>&lt;/</span>intent-filter</span><span>></span></span>
    <span><span><span>&lt;/</span>activity</span><span>></span></span>
  <span><span><span>&lt;/</span>application</span><span>></span></span>
<span><span><span>&lt;/</span>manifest</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>如果另一个应用创建包含 <code>ACTION_SEND</code> 操作的 Intent 并将其传递到 <code>startActivity()</code>，则系统可能会启动您的 Activity，以便用户能够草拟并发送电子邮件。</p>
<p>如需了解有关创建 Intent 过滤器的详细信息，请参阅 Intent 和 Intent 过滤器文档。</p>
<h3 id="声明应用要求" tabindex="-1"> 声明应用要求</h3>
<p>Android 设备多种多样，但并非所有设备都提供相同的特性和功能。以防将您的应用安装在缺少应用所需特性的设备上，您必须通过在清单文件中声明设备和软件要求，为该应用支持的设备类型明确定义一个配置文件。其中的大多数声明只是为了提供信息，系统并不会读取它们，但 Google Play 等外部服务会读取它们，以便在用户通过其设备搜索应用时为用户提供过滤功能。</p>
<p>例如，如果您的应用需要相机功能，并使用 Android 2.1 (API 级别 7) 中引入的 API，您必须在清单文件中声明以下要求，如下方示例所示</p>
<div><pre><code><span><span><span>&lt;</span>manifest</span> <span>...</span> <span>></span></span>
  <span><span><span>&lt;</span>uses-feature</span> <span><span>android:</span>name</span><span><span>=</span><span>"</span>android.hardware.camera.any<span>"</span></span> <span><span>android:</span>required</span><span><span>=</span><span>"</span>true<span>"</span></span> <span>/></span></span>
  <span><span><span>&lt;</span>uses-sdk</span> <span><span>android:</span>minSdkVersion</span><span><span>=</span><span>"</span>7<span>"</span></span> <span><span>android:</span>targetSdkVersion</span><span><span>=</span><span>"</span>19<span>"</span></span> <span>/></span></span>
  ...
<span><span><span>&lt;/</span>manifest</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p>通过示例中所述的声明，没有相机且 Android 版本低于 2.1 的设备将无法从 Google Play 安装您的应用。不过，您可以声明您的应用使用相机，但并不要求必须使用。在此情况下，您的应用必须将 required 属性设置为 false，并在运行时检查设备是否拥有相机，然后根据需要停用任何相机功能。</p>
<p>如需详细了解如何管理应用与不同设备的兼容性，请参阅设备兼容性文档。</p>
<h2 id="应用资源" tabindex="-1"> 应用资源</h2>
<p>Android 应用并非仅包含代码，它还需要与源代码分离的资源，如图像、音频文件以及任何与应用的视觉呈现有关的内容。例如，您可以通过 XML 文件定义 Activity 界面的动画、菜单、样式、颜色和布局。借助应用资源，您无需修改代码即可轻松更新应用的各种特性。通过提供备用资源集，您可以针对各种设备配置(如不同的语言和屏幕尺寸)优化您的应用。</p>
<p>对于您在 Android 项目中加入的每一项资源，SDK 构建工具均会定义唯一的整型 ID，您可以利用此 ID 来引用资源，这些资源或来自应用代码，或来自 XML 中定义的其他资源。例如，如果您的应用包含名为 <code>logo.png</code> 的图像文件(保存在 <code>res/drawable/</code> 目录中)，则 SDK 工具会生成名为 <code>R.drawable.logo</code> 的资源 ID。此 ID 映射到应用特定的整型数，您可以利用它来引用该图像，并将其插入您的界面。</p>
<p>如果提供与源代码分离的资源，则其中最重要的一个优点在于，您可以提供适用于不同设备配置的备用资源。例如，通过在 XML 中定义界面字符串，您可以将字符串翻译为其他语言，并将这些字符串保存在单独的文件中。然后，Android 系统会根据向资源目录名称追加的语言限定符 (如为法语字符串值追加 <code>res/values-fr/</code>) 和用户的语言设置，对您的界面应用相应的语言字符串。</p>
<p>Android 支持许多不同的备用资源限定符。限定符是资源目录名称中加入的短字符串，用于定义这些资源适用的设备配置。例如，您应根据设备的屏幕方向和尺寸为 Activity 创建不同的布局。当设备屏幕为纵向(长型)时，您可能想要一种垂直排列按钮的布局；但当屏幕为横向(宽型)时，可以按水平方向排列按钮。如要根据方向更改布局，您可以定义两种不同的布局，然后对每个布局的目录名称应用相应的限定符。然后，系统会根据当前设备方向自动应用相应的布局。</p>
<p>如需详细了解可以在应用中加入的不同资源类型以及如何针对不同设备配置创建备用资源，请阅读提供资源。如要详细了解最佳做法和设计生产质量的稳健应用，请参阅应用架构指南。</p>
]]></content>
    <category term="Android" scheme=""/>
    <published>2020-04-08T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">应用资源概览</title>
    <id>https://github.com/MisterChen9527/code/Android/resource.html</id>
    <link href="https://github.com/MisterChen9527/code/Android/resource.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>资源是指代码使用的附加文件和静态内容，例如位图、布局定义、界面字符串、动画说明等。</p>
]]></summary>
    <content type="html"><![CDATA[<p>资源是指代码使用的附加文件和静态内容，例如位图、布局定义、界面字符串、动画说明等。</p>

<p>您应始终外部化应用资源(例如图像和代码中的字符串)，以便单独对其进行维护。此外，您还应为特定设备配置提供备用资源，方法是将其进行分组并放入专门命名的资源目录中。在运行时，Android 会根据当前配置使用合适的资源。例如，您可能需根据屏幕尺寸提供不同的界面布局，或根据语言设置提供不同的字符串。</p>
<p>外部化应用资源后，您便可使用在项目 R 类中生成的资源 ID 来访问这些资源。本文档会介绍如何对 Android 项目中的资源进行分组，如何为特定的设备配置提供备用资源，以及如何从您的应用代码或其他 XML 文件访问这些资源。</p>
<h2 id="分组资源类型" tabindex="-1"> 分组资源类型</h2>
<p>您应将各类资源放入项目 <code>res/</code> 目录的特定子目录中。例如，以下是一个简单项目的文件层次结构:</p>
<div><pre><code>MyProject/
  src/
    MyActivity.java
  res/
    drawable/
      graphic.png
    layout/
      main.xml
      info.xml
    mipmap/
      icon.png
    values/
      strings.xml
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>如此示例所示，<code>res/</code> 目录包含所有资源(在子目录中): 一个图像资源、两个布局资源、启动器图标的 <code>mipmap/</code> 目录以及一个字符串资源文件。资源目录名称非常重要，具体说明请见表 1。</p>
<p>表 1. 项目 <code>res/</code> 目录中支持的资源目录。</p>
<table>
<thead>
<tr>
<th>目录</th>
<th>资源类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>animator/</td>
<td>用于定义属性动画的 XML 文件。</td>
</tr>
<tr>
<td>anim/</td>
<td>用于定义渐变动画的 XML 文件。(属性动画也可保存在此目录中，但为了区分这两种类型，属性动画首选 animator/ 目录。)</td>
</tr>
<tr>
<td>color/</td>
<td>用于定义颜色状态列表的 XML 文件。请参阅颜色状态列表资源</td>
</tr>
<tr>
<td>drawable/</td>
<td>位图文件(.png、.9.png、.jpg、.gif)或编译为以下可绘制对象资源子类型的 XML 文件: <br />位图文件<br />九宫格(可调整大小的位图)<br />状态列表<br />形状<br />动画可绘制对象<br />其他可绘制对象<br />请参阅 Drawable 资源。</td>
</tr>
<tr>
<td>mipmap/</td>
<td>适用于不同启动器图标密度的可绘制对象文件。如需了解有关使用 mipmap/ 文件夹管理启动器图标的详细信息，请参阅管理项目概览。</td>
</tr>
<tr>
<td>layout/</td>
<td>用于定义用户界面布局的 XML 文件。请参阅布局资源。</td>
</tr>
<tr>
<td>menu/</td>
<td>用于定义应用菜单(如选项菜单、上下文菜单或子菜单)的 XML 文件。请参阅菜单资源。</td>
</tr>
<tr>
<td>raw/</td>
<td>需以原始形式保存的任意文件。如要使用原始 InputStream 打开这些资源，请使用资源 ID(即 <code>R.raw.filename</code>)调用 <code>Resources.openRawResource()</code>。<br />但是，如需访问原始文件名和文件层次结构，则可以考虑将某些资源保存在 <code>assets/</code> 目录(而非 <code>res/raw/</code>)下。<code>assets/</code> 中的文件没有资源 ID，因此您只能使用 AssetManager 读取这些文件。</td>
</tr>
<tr>
<td>values/</td>
<td>包含字符串、整型数和颜色等简单值的 XML 文件。<br />其他 <code>res/</code> 子目录中的 XML 资源文件会根据 XML 文件名定义单个资源，而 <code>values/</code> 目录中的文件可描述多个资源。对于此目录中的文件，<code>&lt;resources&gt;</code> 元素的每个子元素均会定义一个资源。例如，<code>&lt;string&gt;</code> 元素会创建 R.string 资源，<code>&lt;color&gt;</code> 元素会创建 R.color 资源。<br />由于每个资源均使用自己的 XML 元素进行定义，因此您可以随意命名文件，并在某个文件中放入不同的资源类型。但是，您可能需要将独特的资源类型放在不同的文件中，使其一目了然。例如，对于可在此目录中创建的资源，下面给出了相应的文件名约定: <br />arrays.xml: 资源数组(类型数组)。<br />colors.xml: 颜色值。<br />dimens.xml: 尺寸值。<br />strings.xml: 字符串值。<br />styles.xml: 样式。<br />请参阅字符串资源、样式资源和更多资源类型。</td>
</tr>
<tr>
<td>xml/</td>
<td>可在运行时通过调用 Resources.getXML() 读取的任意 XML 文件。各种 XML 配置文件(如可搜索配置)都必须保存在此处。</td>
</tr>
<tr>
<td>font/</td>
<td>带有扩展名的字体文件(如 .ttf、.otf 或 .ttc)，或包含 <code>&lt;font-family&gt;</code> 元素的 XML 文件。如需详细了解作为资源的字体，请参阅 XML 中的字体。</td>
</tr>
</tbody>
</table>
<div><p>警告</p>
<p>切勿将资源文件直接保存在 <code>res/</code> 目录内，因为这样会造成编译错误。</p>
</div>
]]></content>
    <category term="Android" scheme=""/>
    <published>2020-04-09T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Angular</title>
    <id>https://github.com/MisterChen9527/code/angular/</id>
    <link href="https://github.com/MisterChen9527/code/angular/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>Angular 是 Google 官方在 2016 年 9 月出品的一款框架。</p>
<p>框架强制 Typescript，更倾向于大型项目。</p>
]]></summary>
    <content type="html"><![CDATA[<p>Angular 是 Google 官方在 2016 年 9 月出品的一款框架。</p>
<p>框架强制 Typescript，更倾向于大型项目。</p>

<div><p>Angular 的优点</p>
<ol>
<li>零配置 CLI，享受到 webpack 每次升级的好处，但是不用关心任何 webpack config</li>
<li>官方提供所有的必须组件(http、router、animation、ssr、e2e 等等)，在 2000+ 内部应用测试之后才会发布，基本零 bug，并且保证在未来很多年内一直保证兼容升级</li>
<li>提供官方的应用市场和 low code 生成工具，一行命令就可以生成 Dashboard 和各种页面</li>
<li>框架 100% 由 TypeScript 开发，并且生态内的所有三方库都是(只能用) TypeScript 开发</li>
<li>内置 RxJS，并且从 View 的操作到 Http 全部都是 Reactive 的，可以随意组合</li>
<li>每次升级只要运行一行命令就会帮您修复所有的可能的不兼容问题</li>
<li>通过 Template 隔绝底层的 Compiler 升级成本，Compiler 迭代了三代，性能不断提升，bundle size 不断减少，但是用户代码一行不用改</li>
</ol>
</div>
<p>Angular 写起来其实是有诸多限制的，但是对企业的大型项目来说，这些限制与规范会带来多人协同开发和后期维护上的简便。</p>
<p>如果您在前端框架上追求的更多是: 升级稳定、标准统一、长期维护成本低、协作方便，不需要频繁重构，Angular 的使用感受应该还是相当不错的，这也是为什么目前大量企业用户会选择 Angular 的原因。</p>
<h2 id="相关链接" tabindex="-1"> 相关链接</h2>
<ul>
<li><a href="https://angular.io/docs" target="_blank" rel="noopener noreferrer">官方文档</a></li>
<li><a href="https://angular.cn/docs" target="_blank" rel="noopener noreferrer">中文文档</a></li>
</ul>
]]></content>
    <category term="前端" scheme=""/>
    <published>2020-05-06T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">后端开发</title>
    <id>https://github.com/MisterChen9527/code/backEnd/</id>
    <link href="https://github.com/MisterChen9527/code/backEnd/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="后端入门" tabindex="-1"> 后端入门</h2>
<h3 id="php" tabindex="-1"> PHP</h3>
<p>PHP 是一种创建动态交互性站点的强有力的服务器端脚本语言，免费，并且使用非常广泛。PHP (全称 Hypertext Preprocessor，即超文本预处理器)是一种通用开源脚本语言。</p>
<p>PHP 手册:</p>
<ul>
<li>
<p><a href="http://www.w3school.com.cn/php/index.asp" target="_blank" rel="noopener noreferrer">W3School 教程</a></p>
</li>
<li>
<p><a href="https://www.runoob.com/php/php-tutorial.html" target="_blank" rel="noopener noreferrer">菜鸟教程</a></p>
</li>
</ul>
<p>如果服务器访问数量不大的情况下，PHP 作为一种门槛低，开发方便的脚本语言，还是挺受到欢迎的。</p>
<h3 id="asp" tabindex="-1"> ASP</h3>
<p>ASP 文件可包含文本、HTML 标签和脚本。ASP 文件中的脚本可在服务器上执行。由于 ASP 在服务器上运行，浏览器无需支持客户端脚本就可以显示 ASP 文件!</p>
<ul>
<li>
<p><a href="http://www.w3school.com.cn/asp/index.asp" target="_blank" rel="noopener noreferrer">W3School 教程</a></p>
</li>
<li>
<p><a href="https://www.runoob.com/asp/asp-tutorial.html" target="_blank" rel="noopener noreferrer">菜鸟教程</a></p>
</li>
</ul>
<div><p>提示</p>
<p>更多详情有待日后补充</p>
</div>
]]></content>
    <category term="后端" scheme=""/>
    <published>2019-09-10T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">操作系统</title>
    <id>https://github.com/MisterChen9527/code/basic/OS.html</id>
    <link href="https://github.com/MisterChen9527/code/basic/OS.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>操作系统 (Operating System，OS) 是软件的一部分，它是硬件基础上的第一层软件，是硬件和其它软件沟通的桥梁(或者说接口、中间人、中介等)。</p>
]]></summary>
    <content type="html"><![CDATA[<p>操作系统 (Operating System，OS) 是软件的一部分，它是硬件基础上的第一层软件，是硬件和其它软件沟通的桥梁(或者说接口、中间人、中介等)。</p>

<p>操作系统会控制其他程序运行，管理系统资源，提供最基本的计算功能，如管理及配置内存、决定系统资源供需的优先次序等，同时还提供一些基本的服务程序，例如:</p>
<ol>
<li>
<p>文件系统</p>
<p>提供计算机存储信息的结构，信息存储在文件中，文件主要存储在计算机的内部硬盘里，在目录的分层结构中组织文件。文件系统为操作系统提供了组织管理数据的方式。</p>
</li>
<li>
<p>设备驱动程序</p>
<p>提供连接计算机的每个硬件设备的接口，设备驱动器使程序能够写入设备，而不需要了解执行每个硬件的细节。简单来说，就是让您能吃到鸡蛋，但不用养一只鸡。</p>
</li>
<li>
<p>用户接口</p>
<p>操作系统需要为用户提供一种运行程序和访问文件系统的方法。如常用的 Windows 图形界面，可以理解为一种用户与操作系统交互的方式；智能手机的 Android 或 iOS 系统，也是一种操作系统的交互方式。</p>
</li>
<li>
<p>系统服务程序</p>
<p>当计算机启动时，会自启动许多系统服务程序，执行安装文件系统、启动网络服务、运行预定任务等操作。</p>
</li>
</ol>
<p>打个比方，操作系统就好像是一个政府，其它软件都会被它管控；操作系统在给其他软件提供各种便利的同时，还会约束其他软件不能为所欲为。</p>
<p><img src="@source/code/basic/assets/OS.gif" alt="操作系统结构示意图"></p>
<p>目前流行的服务器和 PC 端操作系统有 Linux、Windows、UNIX 等，手机操作系统有 Android、iOS，嵌入式操作系统有 Windows CE、PalmOS、eCos、uClinux 等。</p>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-12-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">基础介绍</title>
    <id>https://github.com/MisterChen9527/code/basic/</id>
    <link href="https://github.com/MisterChen9527/code/basic/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>这些是一些最为基础的内容，是后来补充进博客中的，供访客查阅。</p>
]]></summary>
    <content type="html"><![CDATA[<p>这些是一些最为基础的内容，是后来补充进博客中的，供访客查阅。</p>

<ul>
<li>
<p><a href="/code/basic/computer.html">计算机</a></p>
</li>
<li>
<p><a href="/code/basic/OS.html">操作系统</a></p>
</li>
<li>
<p><a href="/code/basic/file-extension.html">文件扩展名</a></p>
</li>
<li>
<p><a href="/code/basic/encoding.html">文件编码</a></p>
</li>
<li>
<p><a href="/code/basic/path.html">路径</a></p>
</li>
<li>
<p><a href="/code/basic/debug.html">开发简介</a></p>
</li>
<li>
<p><a href="/code/basic/ci.html">持续集成</a></p>
</li>
<li>
<p><a href="/code/basic/open-source-and-free.html">开源与免费</a></p>
</li>
</ul>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-12-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">持续集成</title>
    <id>https://github.com/MisterChen9527/code/basic/ci.html</id>
    <link href="https://github.com/MisterChen9527/code/basic/ci.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>持续集成 (Continuous Integration) 指的是，频繁地 (一天多次) 将代码集成到主干，每次集成都通过自动化的构建 (包括编译，发布，自动化测试) 来验证，从而尽早地发现集成错误。</p>
<p>持续集成的目的让产品可以快速迭代，同时还能保持高质量。就是说每完成一个完整的部分，就向下个环节交付，发现问题可以马上调整，使得问题不会放大到其他部分和后面的环节。</p>
]]></summary>
    <content type="html"><![CDATA[<p>持续集成 (Continuous Integration) 指的是，频繁地 (一天多次) 将代码集成到主干，每次集成都通过自动化的构建 (包括编译，发布，自动化测试) 来验证，从而尽早地发现集成错误。</p>
<p>持续集成的目的让产品可以快速迭代，同时还能保持高质量。就是说每完成一个完整的部分，就向下个环节交付，发现问题可以马上调整，使得问题不会放大到其他部分和后面的环节。</p>

<h2 id="介绍" tabindex="-1"> 介绍</h2>
<p>持续集成 (CI) 是一种需要频繁提交代码到共享仓库的软件实践。频繁提交代码能较早检测到错误，减少在查找错误来源时开发者需要调试的代码量。 频繁的代码更新也更便于从软件开发团队的不同成员合并更改。 这对开发者非常有益，他们可以将更多时间用于编写代码，而减少在调试错误或解决合并冲突上所花的时间。</p>
<p>提交代码到仓库时，可以持续创建并测试代码，以确保提交未引入错误。 您的测试可以包括代码语法检查 (检查样式格式) 、安全性检查、代码覆盖率、功能测试及其他自定义检查。</p>
<p>创建和测试代码需要服务器。 您可以在推送代码到仓库之前在本地创建并测试更新，也可以使用 CI 服务器检查仓库中的新代码提交。</p>
<h3 id="要点" tabindex="-1"> 要点</h3>
<p>它的核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。</p>
<h3 id="优点" tabindex="-1"> 优点</h3>
<ol>
<li>
<p>提高开发效率</p>
</li>
<li>
<p>快速发现并定位 Bugs</p>
</li>
<li>
<p>更快速发布更新</p>
</li>
</ol>
<hr>
<p>与持续集成相关的，还有两个概念，分别是持续交付和持续部署。</p>
<h2 id="持续交付" tabindex="-1"> 持续交付</h2>
<p><strong>持续交付 (Continuous Delivery) 指的是，频繁地将软件的新版本，交付给质量团队或者用户，以供评审。</strong> 如果评审通过，代码就进入生产阶段。</p>
<p>持续交付可以看作持续集成的下一步。它强调的是，不管怎么更新，软件是随时随地可以交付的。</p>
<p>持续交付意味着所有的变更都可以被部署到生产环境中，如果代码没有问题，可以继续手动部署到生产环境中。</p>
<h2 id="持续部署" tabindex="-1"> 持续部署</h2>
<p><strong>持续部署 (Continuous Deployment) 是持续交付的下一步，指的是代码通过评审以后，自动部署到生产环境。</strong></p>
<p>持续部署的目标是，代码在任何时刻都是可部署的，可以进入生产阶段。</p>
<h2 id="流程" tabindex="-1"> 流程</h2>
<p>一个大型项目严格的流程如下:</p>
<ol>
<li>
<p>提交</p>
<p>流程的第一步，是开发者向代码仓库提交代码。所有后面的步骤都始于本地代码的一次提交 (commit)。</p>
</li>
<li>
<p>测试 (第一轮)</p>
<p>代码仓库对 commit 操作配置了钩子 (hook) ，只要提交代码或者合并进主干，就会跑自动化测试。</p>
<p>测试分为好几种,</p>
<ul>
<li>单元测试: 针对函数或模块的测试</li>
<li>集成测试: 针对整体产品的某个功能的测试，又称功能测试</li>
<li>端对端测试: 从用户界面直达数据库的全链路测试</li>
</ul>
<p>第一轮至少要跑单元测试。</p>
</li>
<li>
<p>构建</p>
<p>通过第一轮测试，代码就可以合并进主干，就算可以交付了。</p>
<p>交付后，就先进行构建 (build)，再进入第二轮测试。所谓构建，指的是将源码转换为可以运行的实际代码，比如安装依赖，配置各种资源 (样式表、JS 脚本、图片) 等等。</p>
<p>常用的构建工具如下,</p>
<ul>
<li>Jenkins</li>
<li>Travis</li>
<li>Codeship</li>
<li>Strider</li>
</ul>
<p>Jenkins 和 Strider 是开源软件， Travis 和 Codeship 对于开源项目可以免费使用。它们都会将构建和测试，在一次运行中执行完成。</p>
</li>
<li>
<p>测试 (第二轮)</p>
<p>构建完成，就要进行第二轮测试。如果第一轮已经涵盖了所有测试内容，第二轮可以省略，当然，这时构建步骤也要移到第一轮测试前面。</p>
<p>第二轮是全面测试，单元测试和集成测试都会跑，有条件的话，也要做端对端测试。所有测试以自动化为主，少数无法自动化的测试用例，就要人工跑。</p>
<p>需要强调的是，新版本的每一个更新点都必须测试到。如果测试的覆盖率不高，进入后面的部署阶段后，很可能会出现严重的问题。</p>
</li>
<li>
<p>部署</p>
<p>通过了第二轮测试，当前代码就是一个可以直接部署的版本 (artifact)。将这个版本的所有文件打包 (tar filename.tar *) 存档，发到生产服务器。</p>
<p>生产服务器将打包文件，解包成本地的一个目录，再将运行路径的符号链接 (symlink) 指向这个目录，然后重新启动应用。这方面的部署工具有 Ansible， Chef， Puppet 等。</p>
</li>
<li>
<p>回滚</p>
<p>一旦当前版本发生问题，就要回滚到上一个版本的构建结果。最简单的做法就是修改一下符号链接，指向上一个版本的目录。</p>
</li>
</ol>
]]></content>
    <category term="基础" scheme=""/>
    <published>2021-02-18T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">计算机</title>
    <id>https://github.com/MisterChen9527/code/basic/computer.html</id>
    <link href="https://github.com/MisterChen9527/code/basic/computer.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>计算机是一台机器，它按照用户的要求接收信息、存储数据、处理数据，然后再将处理结果输出(文字、图片、音频、视频等)。</p>
<p>计算机的核心就是: 接受使用者输入指令与资料，经由中央处理器的数学与逻辑单元运算处理后，以产生或储存成有用的资讯。</p>
]]></summary>
    <content type="html"><![CDATA[<p>计算机是一台机器，它按照用户的要求接收信息、存储数据、处理数据，然后再将处理结果输出(文字、图片、音频、视频等)。</p>
<p>计算机的核心就是: 接受使用者输入指令与资料，经由中央处理器的数学与逻辑单元运算处理后，以产生或储存成有用的资讯。</p>

<div><p>提示</p>
<p>也就是说一般商店用的简易型加减乘除计算机、手机、卫星定位系统(GPS)、提款机(ATM)、个人电脑、笔记本电脑(包括 notebook 与 netbook)，还有平板电脑与智能手机等，都叫计算机。</p>
</div>
<h2 id="组成" tabindex="-1"> 组成</h2>
<p>计算机由硬件和软件组成:</p>
<h3 id="硬件" tabindex="-1"> 硬件</h3>
<p>硬件是计算机赖以工作的实体，包括显示器、键盘、鼠标、硬盘、CPU、主板等；</p>
<p>严格意义上讲，硬件可以分为三个部分:</p>
<ul>
<li>输入单元: 包括键盘、鼠标、读卡器、扫描器、手写板、触控屏等等一堆；</li>
<li>主机部分: 这个就是系统单元，被主机机壳保护住了，里面含有主板、CPU 、内存、硬盘等；</li>
<li>输出单元: 例如显示器、打印机等等</li>
</ul>
<p>计算机的重点在于中央处理器 (Central Processing Unit, CPU)，CPU 为一个具有特定功能的晶片，里头含有微指令集，如果您想要让主机进行什么特异的功能，就得要参考这颗 CPU 是否有相关内建的微指令集才可以。由于 CPU 的工作主要在于管理与运算，因此在 CPU 内又可分为两个主要的单元，分别是: 算数逻辑单元与控制单元。其中算数逻辑单元主要负责程式运算与逻辑判断，控制单元则主要在协调各周边元件与各单元间的工作。</p>
<p>既然 CPU 的重点是在进行运算与判断，那么要被运算与判断的资料是从哪里来的? CPU 读取的资料都是从内存来的! 内存内的资料则是从输入单元所传输进来! 而 CPU 处理完毕的资料也必须要先写回内存中，最后资料才从内存传输到输出单元。</p>
<h3 id="软件" tabindex="-1"> 软件</h3>
<p>软件会按照用户的要求协调整台计算机的工作，比如 Windows、Linux、Mac OS、Android 等操作系统，以及 Office、QQ、迅雷、微信等应用程序。</p>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-12-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">开发简介</title>
    <id>https://github.com/MisterChen9527/code/basic/debug.html</id>
    <link href="https://github.com/MisterChen9527/code/basic/debug.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>开发是根据用户要求建造出合理程序的过程。过程一般是用某种程序设计语言来实现的。通常采用开发工具可以进行开发。</p>
]]></summary>
    <content type="html"><![CDATA[<p>开发是根据用户要求建造出合理程序的过程。过程一般是用某种程序设计语言来实现的。通常采用开发工具可以进行开发。</p>

<h2 id="小团队的具体分工" tabindex="-1"> 小团队的具体分工</h2>
<p>对于小团队而言，经典的划分主要还分为三个板块</p>
<h3 id="ui-设计" tabindex="-1"> UI 设计</h3>
<p>UI 即 User Interface (用户界面) 的简称。泛指用户的操作界面。UI 设计主要指界面的样式，美观程度。而使用上，对软件的人机交互、操作逻辑、界面美观的整体设计则是同样重要的另一个门道。</p>
<p>UI 可以让软件变得有个性有品味，还要让软件的操作变得舒适、简单、自由，充分体现软件的定位和特点。</p>
<div><p>提示</p>
<p>在开发中，UI 设计主要指<strong>界面元素设计</strong>和<strong>交互设计</strong>两部分。</p>
</div>
<h3 id="前端开发" tabindex="-1"> 前端开发</h3>
<p>前端开发是创建 Web 页面或 App 等前端界面呈现给用户的过程。前端开发通过 HTML，CSS 及 JavaScript 以及衍生出来的各种技术、框架、解决方案，来实现互联网产品的用户界面交互。</p>
<div><p>提示</p>
<p>在开发中，前端开发直接<strong>使用 UI 设计提供的素材</strong>并参照 UI 设计提供的<strong>界面图与交互逻辑</strong>对其设想进行<strong>实现</strong>。</p>
</div>
<h3 id="后端开发" tabindex="-1"> 后端开发</h3>
<p>根据正在处理的应用程序的大小和范围，后端开发人员要做的事情有很大的不同。在 Web 开发世界中，大多数后端开发人员从事于构建他们正在工作的应用程序背后的实际逻辑。其负责是网站后台逻辑的设计和实现还有用户及网站的数据的保存和读取。</p>
<div><p>提示</p>
<p>在开发中，后端开发提供与其他服务器<strong>交互数据</strong>，为用户<strong>检索或转换数据</strong>并<strong>对用户数据加以收集与储存</strong>。</p>
</div>
<h2 id="公司开发" tabindex="-1"> 公司开发</h2>
<div><p>注</p>
<p>如果从职位细分的话，可以分出产品、交互、设计、开发、测试、策划、运营、维护等。</p>
</div>
<h3 id="产品设计" tabindex="-1"> 产品设计</h3>
<p>产品设计对应产品经理，一般负责整体内容的构思，这一过程可能还包括用户和市场调研，确定要做的产品的功能、大致交互格式，也就是将成品的草稿设计出来，</p>
<h3 id="设计师" tabindex="-1"> 设计师</h3>
<p>设计师主要和产品设计合作，对一个 App 或者网站的大致页面布局、交互流程进行设计，并提供大致的页面切图，交互流程文档等。</p>
<h3 id="交互" tabindex="-1"> 交互</h3>
<p>交互一般负责具体交互流程的细节，会逐步细化，考虑用户习惯，操作的步骤以及长度。综合考量整个交互设计对用户体验以及流失率、活跃程度的影响。</p>
<h3 id="开发" tabindex="-1"> 开发</h3>
<p>在实际的大型公司发开产品的过程中，开发直接就可以拿到页面的设计图以及完善的交互流程文档，开发的工作就是去实现相应的页面与动画。</p>
<p>在这一过程中，前端和后端约定接口和参数，前端负责 App 或网站，后端负责服务器上的数据存储与服务。</p>
<h3 id="测试" tabindex="-1"> 测试</h3>
<p>通常情况下，测试和开发会完全分开，测试人员在未参与开发的情况下模拟用户，在不同情况下进行测试，以确保产品不会出现问题。</p>
<p>这里常见的测试有风险测试、压力测试与异常行为测试等。测试软件是否有安全漏洞，是否可承担大量的访问以及是否在一些非常规交互下可以正常工作。</p>
<h3 id="运营" tabindex="-1"> 运营</h3>
<p>一般一款产品需要宣发和后续的持续运营，一般就通过偏市场方向的策划和运营进行相关设计，并指导开发进行相关活动的编写与上线。</p>
<h3 id="运维" tabindex="-1"> 运维</h3>
<p>一款产品的后端存储可能需要定期的备份与维护，同时软件后端部署的服务器可能要定期的修复漏洞与升级，就需要有专门的人员来进行这一工作，</p>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-12-27T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">计算机编码介绍</title>
    <id>https://github.com/MisterChen9527/code/basic/encoding.html</id>
    <link href="https://github.com/MisterChen9527/code/basic/encoding.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>计算机，不能直接存储文字，存储的是编码。</p>
<p>计算机只能处理二进制的数据，也就是说计算机只能处理数字。如果要处理文本，比如: <code>0-9</code>、<code>a-z</code>、<code>A-Z</code>，就必须先把文本转换为数字才能处理。对于这些字符，可以定义一套规则来显示，比如: <code>A</code> 用 <code>110</code> 表示，<code>B</code> 用 <code>111</code> 表示等。</p>
]]></summary>
    <content type="html"><![CDATA[<p>计算机，不能直接存储文字，存储的是编码。</p>
<p>计算机只能处理二进制的数据，也就是说计算机只能处理数字。如果要处理文本，比如: <code>0-9</code>、<code>a-z</code>、<code>A-Z</code>，就必须先把文本转换为数字才能处理。对于这些字符，可以定义一套规则来显示，比如: <code>A</code> 用 <code>110</code> 表示，<code>B</code> 用 <code>111</code> 表示等。</p>

<h2 id="字符编码" tabindex="-1"> 字符编码</h2>
<p>最早的计算机在设计时采用 8 个比特(bit)作为一个字节(byte)，所以，一个字节能表示的最大的整数就是 255(二进制 11111111=十进制 255)，如果要表示更大的整数，就必须用更多的字节。比如两个字节可以表示的最大整数是 <code>65535</code>，4 个字节可以表示的最大整数是 <code>4294967295</code>。</p>
<p>由于计算机是美国人发明的，因此，最早只有 127 个字符被编码到计算机里，也就是大小写英文字母、数字和一些符号，这个编码表被称为 ASCII 编码，比如大写字母 A 的编码是 65，小写字母 z 的编码是 122。</p>
<p>但是要处理中文显然一个字节是不够的，至少需要两个字节，而且还不能和 ASCII 编码冲突，所以，中国制定了 GB2312 编码，用来把中文编进去。</p>
<p>您可以想得到的是，全世界有上百种语言，日本把日文编到 Shift_JIS 里，韩国把韩文编到 Euc-kr 里，各国有各国的标准，就会不可避免地出现冲突，结果就是，在多语言混合的文本中，显示出来会有乱码。</p>
<p>因此，Unicode 应运而生。Unicode 把所有语言都统一到一套编码里，这样就不会再有乱码问题了。</p>
<p>Unicode 标准也在不断发展，但最常用的是用两个字节表示一个字符(如果要用到非常偏僻的字符，就需要 4 个字节)。现代操作系统和大多数编程语言都直接支持 Unicode。</p>
<p>现在，捋一捋 ASCII 编码和 Unicode 编码的区别: ASCII 编码是 1 个字节，而 Unicode 编码通常是 2 个字节。</p>
<p>字母 A 用 ASCII 编码是十进制的 65，二进制的 01000001；</p>
<p>字符 0 用 ASCII 编码是十进制的 48，二进制的 00110000，注意字符 <code>'0'</code> 和整数 <code>0</code> 是不同的；</p>
<p>汉字中已经超出了 ASCII 编码的范围，用 Unicode 编码是十进制的 20013，二进制的 01001110 00101101。</p>
<p>您可以猜测，如果把 ASCII 编码的 A 用 Unicode 编码，只需要在前面补 0 就可以，因此，A 的 Unicode 编码是 00000000 01000001。</p>
<p>新的问题又出现了: 如果统一成 Unicode 编码，乱码问题从此消失了。但是，如果您写的文本基本上全部是英文的话，用 Unicode 编码比 ASCII 编码需要多一倍的存储空间，在存储和传输上就十分不划算。</p>
<p>所以，本着节约的精神，又出现了把 Unicode 编码转化为“可变长编码”的 UTF-8 编码。UTF-8 编码把一个 Unicode 字符根据不同的数字大小编码成 1-6 个字节，常用的英文字母被编码成 1 个字节，汉字通常是 3 个字节，只有很生僻的字符才会被编码成 4-6 个字节。如果您要传输的文本包含大量英文字符，用 UTF-8 编码就能节省空间:</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>ASCII</th>
<th>Unicode</th>
<th>UTF-8</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>01000001</td>
<td>00000000 01000001</td>
<td>01000001</td>
</tr>
<tr>
<td>中</td>
<td>x</td>
<td>01001110 00101101</td>
<td>11100100 10111000 10101101</td>
</tr>
</tbody>
</table>
<p>从上面的表格还可以发现，UTF-8 编码有一个额外的好处，就是 ASCII 编码实际上可以被看成是 UTF-8 编码的一部分，所以，大量只支持 ASCII 编码的历史遗留软件可以在 UTF-8 编码下继续工作。</p>
<p>搞清楚 ASCII、Unicode 和 UTF-8 的关系，现在可以总结计算机系统通用的字符编码工作方式:</p>
<p>在计算机内存中，统一使用 Unicode 编码，当需要保存到硬盘或者需要传输的时候，就转换为 UTF-8 编码。</p>
<p>用编辑器编辑的时候，从文件读取的 UTF-8 字符被转换为 Unicode 字符到内存里，编辑完成后，保存的时候再把 Unicode 转换为 UTF-8 保存到文件:</p>

<p>浏览网页的时候，服务器会把动态生成的 Unicode 内容转换为 UTF-8 再传输到浏览器:</p>
<p>所以您看到很多网页的源码上会有类似 <code>&lt;meta charset=&quot;UTF-8&quot; /&gt;</code> 的信息，表示该网页正是用的 UTF-8 编码。</p>
<h2 id="ascii-码" tabindex="-1"> ASCII 码</h2>
<p>美国发布的，用 1 个字节 (8 位二进制) 来表示一个字符，共可以表示 2<sup>8</sup>=256 个字符。</p>
<p>美国的国家语言是英语，只要能表示 0-9、a-z、A-Z、特殊符号。</p>
<h2 id="ansi-编码" tabindex="-1"> ANSI 编码</h2>
<p><strong>每个国家为了显示本国的语言，都对 ASCII 码进行了扩展</strong>。用 2 个字节 (16 位二进制) 来表示一个汉字，共可以表示 <span><span><i>Content not supported</i></span><span aria-hidden="true"><span><span style="height:0.8141em;"></span><span><span>2</span><span><span><span><span style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span style="height:2.7em;"></span><span><span><span>16</span></span></span></span></span></span></span></span></span><span style="margin-right:0.2778em;"></span><span>=</span><span style="margin-right:0.2778em;"></span></span><span><span style="height:0.6444em;"></span><span>65536</span></span></span></span> 个汉字。例如:</p>
<ul>
<li>中国的 ANSI 编码是 GB2312 编码(简体)，对 6763 汉字进行编码，含 600 多特殊字符。另外还有 GBK(简体)。</li>
<li>日本的 ANSI 编码是 JIS 编码。</li>
<li>台湾的 ANSI 编码是 BIG5 编码(繁体)。</li>
</ul>
<h3 id="gbk" tabindex="-1"> GBK</h3>
<p>对 GB2312 进行了扩展，用来显示罕见的、古汉语的汉字。现在已经收录了 2.1 万左右。并提供了 1890 个汉字码位。<code>K</code> 的含义就是“扩展”。</p>
<h2 id="unicode-编码-统一编码" tabindex="-1"> Unicode 编码(统一编码)</h2>
<p>用 4 个字节 (32 位二进制) 来表示一个字符，想法不错，但效率太低。例如，字母 A 用 ASCII 表示的话一个字节就够，可用 Unicode 编码的话，得用 4 个字节表示，造成了空间的极大浪费。A 的 Unicode 编码是 <code>0000 0000 0000 0000 0000 0000 0100 0000</code></p>
<h2 id="utf-8-unicode-transform-format-编码" tabindex="-1"> UTF-8 (Unicode Transform Format)编码</h2>
<p>根据字符的不同，选择其编码的长度。比如:一个字符 A 用 1 个字节表示，一个汉字用 2 个字节表示。</p>
<p>毫无疑问，开发中，都用 <strong>UTF-8</strong> 编码吧，准没错。</p>
<div><p>提示</p>
<p><strong>中文能够使用的字符集两种:</strong></p>
<ul>
<li>
<p>第一种:UTF-8。UTF-8 是国际通用字库，里面涵盖了所有地球上所有人类的语言文字，比如阿拉伯文、汉语、老挝语……</p>
</li>
<li>
<p>第二种:GBK (对 GB2312 进行了扩展)。gb2312 是国标，是中国的字库，里面<strong>仅</strong>涵盖了汉字和一些常用外文，比如日文片假名，和常见的符号。</p>
</li>
</ul>
<p>字库规模: UTF-8 (字全) &gt; gb2312 (只有汉字)</p>
<p>保存大小: UTF-8 (更臃肿、加载更慢) &gt; gb2312 (更小巧，加载更快)</p>
</div>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-12-27T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">文件名与文件扩展名</title>
    <id>https://github.com/MisterChen9527/code/basic/file-extension.html</id>
    <link href="https://github.com/MisterChen9527/code/basic/file-extension.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="文件名" tabindex="-1"> 文件名</h2>
<p>文件名就是文件的名称，是为了方便人们区分计算机中的不同文件，而给每个文件设定一个指定的名称。</p>
<p>文件名不能包含控制字符: <code>&lt;</code> <code>&gt;</code> <code>/</code> <code>\</code> <code>|</code> <code>:</code> <code>&quot;</code> <code>*</code> <code>?</code></p>
<h2 id="文件扩展名" tabindex="-1"> 文件扩展名</h2>
<p>文件扩展名 (filename extension) 也称为文件的延伸文件名、后缀名，是操作系统用来标记文件类型的一种机制。通常来说，一个扩展名是跟在主文件名后面的，由一个分隔符分隔。</p>
<p>文件扩展名是早期操作系统 (如 VMS / CP / M / DOS 等) 用来标志文件格式的一种机制，其更重要的作用是让系统决定当用户想打开这个文件的时候用哪种软件运行，如 Windows 系统中 exe 文件是可执行文件，doc 文件默认用 Microsoft Word 打开的 Word 文件。</p>
<div><p>误区</p>
<ol>
<li>
<p>文件扩展名是一个文件的必要构成部分。❌</p>
<p>任何一个文件可以有或没有扩展名。对于打开文件操作，没有扩展名的文件需要选择程序去打开它，有扩展名的文件会自动用设置好的程序(如有)去尝试打开，文件扩展名是一个常规文件的构成部分，但一个文件并不一定需要一个扩展名。</p>
</li>
<li>
<p>文件扩展名表明了该文件是何种类型。❌</p>
<p>文件扩展名可以人为设定，扩展名为 TXT 的文件有可能是一张图片，同样，扩展名为 MP3 的文件，依然可能是一个视频。</p>
</li>
</ol>
</div>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-12-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">开源与免费</title>
    <id>https://github.com/MisterChen9527/code/basic/open-source-and-free.html</id>
    <link href="https://github.com/MisterChen9527/code/basic/open-source-and-free.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>开源软件和免费软件是两个概念:</p>
<ul>
<li>
<p>开源软件是指公开源代码的软件。开源软件在发行的时候会附上软件的源代码，并授权允许用户更改、传播或者二次开发。</p>
</li>
<li>
<p>免费软件就是免费提供给用户使用的软件，但是在免费的同时，通常也会有一些限制，比如源代码不公开，用户不能随意修改、不能二次发布等。</p>
</li>
</ul>
]]></summary>
    <content type="html"><![CDATA[<p>开源软件和免费软件是两个概念:</p>
<ul>
<li>
<p>开源软件是指公开源代码的软件。开源软件在发行的时候会附上软件的源代码，并授权允许用户更改、传播或者二次开发。</p>
</li>
<li>
<p>免费软件就是免费提供给用户使用的软件，但是在免费的同时，通常也会有一些限制，比如源代码不公开，用户不能随意修改、不能二次发布等。</p>
</li>
</ul>

<h2 id="免费软件" tabindex="-1"> 免费软件</h2>
<p>免费软件的例子比比皆是，QQ、微信、迅雷、酷狗、360 等都是免费软件，您可以随意使用，尽情蹂躏；但是，如果您嫌弃它们复杂，自己删除了一些无用的功能，然后在网上发布了一个精简版本供大家下载，那么您就离法院的传票不远了。</p>
<h2 id="开源软件" tabindex="-1"> 开源软件</h2>
<p>开源软件是不抵触商业的，开源的目的也不是做慈善事业，而是通过更多人的参与，减少软件的缺陷，丰富软件的功能，同时也避免了少数人在软件里留一些不正当的后门。开源软件最终还会反哺商业，让商业公司为用户提供更好的产品。</p>
<p>Android 就是大众最熟知的一款开源操作系统，它除了用在手机上，还用在汽车、平板电脑、电视、智能手表等其它硬件平台，小米、华为、OPPO、三星等都是 Android 的受益者，他们都赚得盆满钵满。</p>
<p>很多著名的开源项目背后都有商业公司支撑，它们的开发者也都有正式的工作，享受和我们一样的社会福利；如果一个成功的开源项目背后没有商业公司，这反而是不健康的，社会需要开源和商业之间的互补来促进技术的革新。</p>
<p>开源软件和商业公司的裙带关系:</p>
<ul>
<li>
<p>Android 由全球最大的互联网公司 Google 支持；</p>
</li>
<li>
<p>市场占有率最高的关系型数据库 mysql 已经被上市公司 Oracle 收购；</p>
</li>
<li>
<p>linux 不但被 Microsoft、IBM、Intel、SAMSUNG 等巨头免费赞助，还接收它们贡献的源代码；</p>
</li>
<li>
<p>Python 目前属于 python.org 开源组织，它收到了 Facebook、Google、Amazon、Redhat、Microsoft 等商业公司的赞助。</p>
</li>
</ul>
<h2 id="开源软件的盈利模式" tabindex="-1"> 开源软件的盈利模式</h2>
<p>伟大的开源软件的背后都有巨量的资金流入，没有资金支撑的开源软件是无法长久的。那么，开源软件究竟是如何盈利的呢?</p>
<ol>
<li>
<p>双重许可</p>
<p>有些开源软件不但有一个免费的基础版本，还有一个收费的商业版本。免费版本能够促进传播，让用户爱上该软件；收费版本功能更加丰富，还提供技术支持。这种情况在开源界非常普遍。</p>
<p>例如 MySQL 就同时推出面向个人和企业的两种版本，即开源版本和专业版本，分别采用不同的授权方式: 开源版本完全免费以便更好的推广，而从专业版的许可销售和支持服务获得收入。</p>
</li>
<li>
<p>技术支持</p>
<p>很多软件在使用上不收取费用，但当用户在使用产品遇到困难，需要技术支持的时候，就需要付费了。技术支持收费的这项服务，也是一些开源公司的生计之路。</p>
<p>例如，最大的开源软件公司 Redhat 被 IBM 收购，卖了 340 亿美元。Redhat 虽然提供免费的 Linux 发行版(当然也有收费的版本)，但是当使用者遇到技术障碍，或者想升级硬件的时候，Redhat 可以提供付费支持。</p>
<p>举个例子，纽交所在用免费的红帽 Linux 系统交易股票。英特尔最近升级了处理器，纽交所想用新处理器提高效率，但这需要有人为新硬件部署新的系统和应用程序。同样的事每隔几年会发生一次。纽交所可以养一个团队自己完成所有系统维护、开发工作，也可以花钱请红帽的工程师来做。相当数量的企业用户都选择了后者。</p>
</li>
<li>
<p>附加服务</p>
<p>JBoss 就是这种模式的典型代表。JBoss 应用服务器完全免费，而通过提供技术文档、培训、二次开发支持等技术服务而获得收入。</p>
<p>开源软件出版商 O’Reilly 公司也是这种模式，它不遗余力地联系开源软件的权威人士，组织各种开源软件的会议，虽然知识是免费的，但承载知识的书籍却是收费的。</p>
</li>
<li>
<p>应用服务托管(ASP)</p>
<p>例如 PHP Live ! 就是一种构架于 PHP、MySQL 之上的开源软件，它可为企业用户提供实时交谈服务。目前已经有数十家公开提供 PHP Live! 托管服务的应用服务提供商。</p>
</li>
<li>
<p>软硬件一体化</p>
<p>比如 IBM、HP 等服务器供应商巨头，通过捆绑免费的 Linux 操作系统销售硬件服务器。SUN 公司近期将其 Solaris 操作系统开放源码，以确保服务器硬件的销售收入，也是这种模式的体现。</p>
<p>这些巨头每年在开源软件领域的投入巨大，但这一切并非是做善事，它们可以从配置了开源软件的硬件中获得巨额回报。</p>
</li>
<li>
<p>部分组件收费</p>
<p>开源免费的软件可以满足大部分用户的需求，但是也有很多用户需要一些特殊的定制服务，这个时候软件公司就会收取一定的费用。</p>
</li>
<li>
<p>版权收费</p>
<p>虽然代码是开源的，但很多作者会采用一些开源协议来限制自己版权问题，如果用户想要去版权，是需要另外付费的。</p>
</li>
<li>
<p>捐款/赞助</p>
<p>很多开源软件都有一些捐款渠道，喜爱该软件的用户，或者该软件的受益者都可以进行资金支持。</p>
<p>例如，Python 就有一个软件基金协会，它收到了来自 Facebook、Amazon、Google、Redhat、Microsoft 等巨头的赞助。</p>
<p>这些公司也不傻，他们为什么会赞助 Python 呢? 因为这些公司大量使用了 Python 语言，他们希望 Python 能够持续发展，如果 Python 倒了，他们也会跟着倒霉。</p>
</li>
</ol>
]]></content>
    <category term="基础" scheme=""/>
    <published>2020-06-05T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">路径</title>
    <id>https://github.com/MisterChen9527/code/basic/path.html</id>
    <link href="https://github.com/MisterChen9527/code/basic/path.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>无论是我们想直接访问一个文件，还是在一个文件中希望访问另一个文件，都涉及到一个获取文件的操作。而无论是在 Windows 中还是在 Linux 中，文件的具体位置都用文档的路径标注。</p>
<p>路径常常涉及到物理路径，相对路径，绝对路径，根目录的概念，现加以说明。</p>
]]></summary>
    <content type="html"><![CDATA[<p>无论是我们想直接访问一个文件，还是在一个文件中希望访问另一个文件，都涉及到一个获取文件的操作。而无论是在 Windows 中还是在 Linux 中，文件的具体位置都用文档的路径标注。</p>
<p>路径常常涉及到物理路径，相对路径，绝对路径，根目录的概念，现加以说明。</p>

<h2 id="物理路径" tabindex="-1"> 物理路径</h2>
<p>物理路径的英文全称是: Physical path，它就是指硬盘上文件的路径，比如下面的文件位置表示方法:</p>
<div><pre><code>d:\wwwroot\html\a.html
d:\wwwroot\html\photo\b.html
d:\wwwroot\html\photo\c.html
d:\wwwroot\html\photo\ours\d.html
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><blockquote>
<p><code>D:</code> 与 <code>d:</code> 均可。盘符不分大小写。</p>
</blockquote>
<p>一般来说物理路径可用于访问本地文件，即不通过 WEB 服务器(如: 本地调试)等的情况下。</p>
<h2 id="相对路径" tabindex="-1"> 相对路径</h2>
<p>相对路径的英文全称是 Relative Path，我们可以从以下三个方面来了解它的用法 (以“物理路径”中的位置情况为例):</p>
<ul>
<li>
<p>如何表示同级目录的文件</p>
<p>b.html 和 c.html 在同一个文件夹下，如果 b.html 需要链接到 c.html，可以在 b.html 中这样写:</p>
<div><pre><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>./c.html<span>"</span></span><span>></span></span>同目录下文件间互相链接<span><span><span>&lt;/</span>a</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>代码中的 <code>./</code> 代表同级目录。</p>
<p><code>./</code>是相对路径，也可以省略不写，省略不写，即直接以文件夹或文件名称开头的路径也是相对路径。</p>
<div><pre><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>./c.html<span>"</span></span><span>></span></span>同目录下文件间互相链接<span><span><span>&lt;/</span>a</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div></div></div></li>
<li>
<p>如何表示上级目录的文件</p>
<p>a.html 是 b.html 和 c.html 的上级目录中的文件，如果 b.html 或 c.html 链接到 a.html，可以在 b.html 或 c.html 中这样写:</p>
<div><pre><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>../a.html<span>"</span></span><span>></span></span>链接到上级目录中的文件<span><span><span>&lt;/</span>a</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>代码中的 <code>../</code> 代表一级上级目录(间隔一个目录)。</p>
<p>需要注意的是: “<code>../../</code>”代表二级上级目录(间隔两个目录)，比如 a.html 是 d.html 的前两级目录，同时 d.html 需要链接到 a.html，可以在 d.html 中这样写:</p>
<div><pre><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>../../a.html<span>"</span></span><span>></span></span>链接到上级目录的上级目录中的文件<span><span><span>&lt;/</span>a</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div></div></div></li>
<li>
<p>如何表示子目录的文件</p>
<p>b.html 和 c.html 是 a.html 的子目录中的文件，如果需要在 a.html 中链接到 b.html， 可以在 a.html 中这样写:</p>
<div><pre><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>photo/b.html<span>"</span></span><span>></span></span>链接到子目录(photo)中的文件<span><span><span>&lt;/</span>a</span><span>></span></span>
如果需要在a.html中链接到d.html，可以在a.html中这样写
<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>photo/ours/d.html<span>"</span></span><span>></span></span>链接到子目录(photo/ourd/)中的文件<span><span><span>&lt;/</span>a</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div></li>
</ul>
<h2 id="绝对路径" tabindex="-1"> 绝对路径</h2>
<p>绝对路径的英文全称是 Absolute Path，它就是带有网址的路径。比如您有一个域名 www.deerol.com，其域名指向 d:\wwwroot，那么上面的四个文件就可以这么表示:</p>
<div><pre><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>http://www.deerol.com/html/a.html<span>"</span></span><span>></span></span>链接到a.html<span><span><span>&lt;/</span>a</span><span>></span></span>
<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>http://www.deerol.com/html/photo/b.html<span>"</span></span><span>></span></span>链接到b.html<span><span><span>&lt;/</span>a</span><span>></span></span>
<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>http://www.deerol.com/html/photo/c.html<span>"</span></span><span>></span></span>链接到c.html<span><span><span>&lt;/</span>a</span><span>></span></span>
<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>http://www.deerol.com/html/photo/ours/d.html<span>"</span></span><span>></span></span>链接到d.html<span><span><span>&lt;/</span>a</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><h2 id="根目录" tabindex="-1"> 根目录</h2>
<p>根目录的英文全称是 Root directory，去掉绝对路径前面的域名就是根目录，所以它可以理解为是网站的最上层目录。它的表示方法如下:</p>
<div><pre><code><span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/html/a.html<span>"</span></span><span>></span></span>链接到a.html<span><span><span>&lt;/</span>a</span><span>></span></span>
<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/html/photo/b.html<span>"</span></span><span>></span></span>链接到b.html<span><span><span>&lt;/</span>a</span><span>></span></span>
<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/html/photo/c.html<span>"</span></span><span>></span></span>链接到c.html<span><span><span>&lt;/</span>a</span><span>></span></span>
<span><span><span>&lt;</span>a</span> <span>href</span><span><span>=</span><span>"</span>/html/photo/ours/d.html<span>"</span></span><span>></span></span>链接到d.html<span><span><span>&lt;/</span>a</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><p>在服务器上，根目录即代表网站主页所在的目录。网站服务器一般只能访问网站主页所在文件夹内的文件与文件夹。</p>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-09-20T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">GitHub</title>
    <id>https://github.com/MisterChen9527/code/github/</id>
    <link href="https://github.com/MisterChen9527/code/github/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="快速上手" tabindex="-1"> 快速上手</h2>
<ul>
<li>
<p><a href="/code/github/intro.html">GitHub 介绍</a></p>
</li>
<li>
<p><a href="/code/github/semantic.html">语义化提交</a></p>
</li>
<li>
<p><a href="/code/github/pages.html">GitHub Pages</a></p>
</li>
<li>
<p><a href="/code/github/speedup.html">利用 Gitee 加速 GitHub 克隆</a></p>
</li>
</ul>
<h2 id="官方文档" tabindex="-1"> 官方文档</h2>
<ul>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github" target="_blank" rel="noopener noreferrer">全部文档</a></li>
</ul>
<h3 id="入门指南" tabindex="-1"> 入门指南</h3>
<ul>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github/getting-started-with-github" target="_blank" rel="noopener noreferrer">查看详情</a></li>
</ul>
<h3 id="快速入门" tabindex="-1"> 快速入门</h3>
<ul>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github/getting-started-with-github/set-up-git" target="_blank" rel="noopener noreferrer">设置 Git</a></li>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github/getting-started-with-github/create-a-repo" target="_blank" rel="noopener noreferrer">创建仓库</a></li>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github/getting-started-with-github/fork-a-repo" target="_blank" rel="noopener noreferrer">复刻仓库</a></li>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github/getting-started-with-github/be-social" target="_blank" rel="noopener noreferrer">社交化</a></li>
</ul>
<h3 id="了解-github" tabindex="-1"> 了解 GitHub</h3>
<ul>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github/getting-started-with-github/types-of-github-accounts" target="_blank" rel="noopener noreferrer">账户类型</a></li>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github/getting-started-with-github/access-permissions-on-github#%E4%B8%AA%E4%BA%BA%E7%94%A8%E6%88%B7%E5%B8%90%E6%88%B7" target="_blank" rel="noopener noreferrer">GitHub 上的访问权限</a></li>
<li><a href="https://docs.github.com/cn/free-pro-team@latest/github/getting-started-with-github/github-glossary" target="_blank" rel="noopener noreferrer">GitHub 词汇表</a></li>
</ul>
<h2 id="生态系统" tabindex="-1"> 生态系统</h2>
<h3 id="github-cli" tabindex="-1"> GitHub Cli</h3>
<p>GitHub CLI 是用于在计算机上使用 GitHub 功能的命令行工具。</p>
<p>GitHub CLI 是用于从计算机的命令行使用 GitHub 的开源工具。从命令行操作时，您可以使用 GitHub CLI 来节省时间并避免切换上下文。</p>
<p>您可以将以下 GitHub 功能与 GitHub CLI 结合使用。</p>
<ul>
<li>查看、创建、克隆和复刻仓库</li>
<li>创建、关闭和列出议题和拉取请求</li>
<li>审查、差异和合并拉取请求</li>
<li>创建、编辑、列出和查看 Gist</li>
</ul>
<p>有关 GitHub CLI 用途的更多信息，请参阅 <a href="https://cli.github.com/manual" target="_blank" rel="noopener noreferrer">GitHub CLI 手册</a>。</p>
<h3 id="github-desktop" tabindex="-1"> GitHub Desktop</h3>
<p>GitHub Desktop 使用可视界面扩展并简化您的 Git 和 GitHub 工作流程。</p>
<p>GitHub Desktop 是一种开源工具，可帮助您提高工作效率。GitHub Desktop 鼓励您和您的团队使用最佳实践协作处理 Git 和 GitHub。</p>
<p>您可以使用 GitHub Desktop 执行许多任务，包括:</p>
<ul>
<li>以交互方式将更改添加到提交中</li>
<li>快速将合作作者提交到提交中</li>
<li>检出具有拉取请求的分支并查看 CI 状态</li>
<li>比较更改的图像</li>
</ul>
<p>有关 GitHub Desktop 的更多信息，请参阅 GitHub Desktop 文档中的 <a href="https://docs.github.com/cn/free-pro-team@latest/desktop/installing-and-configuring-github-desktop" target="_blank" rel="noopener noreferrer">安装和配置 GitHub Desktop</a>。</p>
<h3 id="手机版-github" tabindex="-1"> 手机版 GitHub</h3>
<p>从移动设备对 GitHub 上的工作进行分类、协作和管理。</p>
<p>手机版 GitHub 目前作为 Android 和 iOS app 提供给 GitHub.com 用户。</p>
<p>手机版 GitHub 为您提供随时随地快速高效使用 GitHub 的方式。手机版 GitHub 是通过可信的第一方客户端应用程序访问 GitHub 数据的安全可靠方式。</p>
<p>通过 手机版 GitHub，您可以:</p>
<ul>
<li>管理、分类和清除通知</li>
<li>阅读、审查及协作处理问题和拉取请求</li>
<li>搜索、浏览用户、仓库和组织以及与之交互</li>
<li>当有人提及您的用户名时收到推送通知</li>
</ul>
<h4 id="安装-手机版-github" tabindex="-1"> 安装 手机版 GitHub</h4>
<p>要安装 Android 或 iOS 版 手机版 GitHub，请参阅 <a href="https://github.com/mobile" target="_blank" rel="noopener noreferrer">手机版 GitHub</a>。</p>
]]></content>
    <category term="GitHub" scheme=""/>
    <published>2019-11-20T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">自动部署</title>
    <id>https://github.com/MisterChen9527/code/github/deploy.html</id>
    <link href="https://github.com/MisterChen9527/code/github/deploy.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>本文介绍如何利用 Git 和 GitHub Action，自动部署代码到服务器。</p>
]]></summary>
    <content type="html"><![CDATA[<p>本文介绍如何利用 Git 和 GitHub Action，自动部署代码到服务器。</p>

<div><p>提示</p>
<p>由于 Centos 仍然是用 GitV1，本教程使用 Ubuntu 20.04 进行教学。</p>
</div>
<h2 id="服务器" tabindex="-1"> 服务器</h2>
<p>为了能供自动部署到服务器，我们需要让服务器的网站目录成为一个 Git 仓库，这样我们可以在 GitHub Actions 中，通过向服务器对应 GitHub 仓库推送网站内容，使服务器网站获得自动更新。下面是服务器侧的部署配置</p>
<h3 id="添加账户" tabindex="-1"> 添加账户</h3>
<p>为了安全，首先需要使用命令创建 Git 用户，为了安全请务必设置密码。</p>
<div><pre><code><span>sudo</span> adduser <span>git</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>之后，查看部署目录所在组，git 用户添加到组中。</p>
<div><pre><code><span>usermod</span> -a -G <span>&lt;</span>目录所在组<span>></span> <span>git</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>然后将部署目录的权限设置为 <code>775</code>，即允许同组访问。这样 git 就有权限访问部署目录。</p>
<h3 id="添加权限" tabindex="-1"> 添加权限</h3>
<p>创建 <code>~/.ssh/</code> 文件夹，生成 <code>authorized_keys</code> 文件，并设置其权限为 <code>600</code>。</p>
<div><pre><code><span>mkdir</span> -p ~/.ssh/

<span>touch</span> ~/.ssh/authorized_keys

<span>chmod</span> <span>600</span> ~/.ssh/authorized_keys
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p>之后将需要赋予权限的用户公钥依次粘贴至该文件，这样相关用户即可以使用对应私钥，向服务器相关仓库推送代码。</p>
<h3 id="创建仓库" tabindex="-1"> 创建仓库</h3>
<p>回到 <code>/home/git/</code>，创建所需的文件夹:</p>
<div><pre><code><span>cd</span> ~
<span>mkdir</span> <span>&lt;</span>仓库名<span>></span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>进入文件夹，使用</p>
<div><pre><code><span>git</span> init --separate-git-dir<span>=</span>. <span>&lt;</span>部署位置<span>></span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>这会将 git 库保持在 <code>/home/git/&lt;仓库名&gt;</code> 下，同时将工作区设置到部署文件夹中。</p>
<p>接下来执行:</p>
<div><pre><code><span>git</span> config receive.denyCurrentBranch ignore
<span>git</span> config --global --add safe.directory <span>&lt;</span>部署文件夹<span>></span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><div><p>注</p>
<p>Git 默认拒绝外部对当前分支的推送操作，因为这可能会覆盖或变更工作区文件。所以我们需要显式通知 Git 不要拒绝当前分支的推送操作。</p>
<p>另外在新版本 Git 中，考虑到安全因素，Git 会在检出时检测项目文件夹是否属于其他组成员，如果检测到会默认拒绝相关操作以防止其他用于获取到本不应该获取到的代码信息。因为部署文件夹的所有者通常不会是 git，所以我们需要标记对应的部署文件夹“安全”。</p>
</div>
<h2 id="github-actions" tabindex="-1"> GitHub Actions</h2>
<p>在 GitHub 一侧，我们需要通过 GitHub Action，在新代码推送时自动构建网站，并部署到 GitHub 的 gh-pages 分支。之后，GitHub Action 将该分支的变动推送服务器的对应仓库，完成网站的自动部署。</p>
<p>之后只需要使用 GitHub Action 通过 Git 推送到 <code>git@&lt;domain&gt;:&lt;部署目录&gt; gh-pages</code> 即可。</p>
<div><pre><code><span># 自动部署的名称</span>
<span>name</span><span>:</span> GitHub pages deploy

<span># 自动部署的条件</span>
<span>on</span><span>:</span>
  <span>push</span><span>:</span>
    <span>branches</span><span>:</span>
      <span>-</span> master

<span>jobs</span><span>:</span>
  <span># 构建网站并部署到 GitHub Pages</span>
  <span>deploy-gh-pages</span><span>:</span>
    <span># 运行环境</span>
    <span>runs-on</span><span>:</span> ubuntu<span>-</span>latest

    <span># 步骤</span>
    <span>steps</span><span>:</span>
      <span># 第一步: 下载源码</span>
      <span>-</span> <span>name</span><span>:</span> Checkout
        <span># action 配置详见 https://github.com/actions/checkout</span>
        <span>uses</span><span>:</span> actions/checkout@v3
        <span>with</span><span>:</span>
          <span># 如果本项目包含了子模块 (git submodules)，需要将此项设置为 true</span>
          <span># submodules: true</span>

          <span># 这是获取历史 commit 的深度，默认为 1，即只拉取最后一个 commit</span>
          <span># 这样可以加快拉取速度</span>
          <span>#</span>
          <span># 如果项目使用 VuePress，为了正确通过 Git 历史提交记录生成页面的最后更新时间</span>
          <span># 需要设置为 0 以拉取完整的 git 历史提交</span>
          <span># fetch-depth: 0</span>

          <span># 如果子模块包含私有仓库，需要设置 ssh key 或 token 以保证拥有拉取相应仓库的权限</span>
          <span># 您可以将 ssh-key 设置为 github 绑定公钥对应的私钥</span>
          <span># 也可以新建一个具有相关仓库访问权限的 github token</span>
          <span># token:</span>

      <span># 缓存 node_modules 以避免重复安装</span>
      <span>-</span> <span>uses</span><span>:</span> actions/cache@v3
        <span>id</span><span>:</span> node<span>-</span>modules
        <span>with</span><span>:</span>
          <span># 需要缓存的路径</span>
          <span>path</span><span>:</span> node_modules/
          <span># 缓存的 key</span>
          <span>key</span><span>:</span> $<span>{</span><span>{</span> runner.os <span>}</span><span>}</span><span>-</span>node<span>-</span>modules<span>-</span>$<span>{</span><span>{</span> hashFiles('yarn.lock') <span>}</span><span>}</span>
          <span># 恢复 key</span>
          <span>restore-keys</span><span>:</span> <span>|</span><span>
            ${{ runner.os }}-node-modules-</span>

      <span># 安装依赖</span>
      <span>-</span> <span>name</span><span>:</span> Install Deps
        <span># 只有没有命中缓存才会执行</span>
        <span>if</span><span>:</span> steps.node<span>-</span>modules.outputs.cache<span>-</span>hit <span>!=</span> 'true'
        <span># 严格按照 yarn.lock 安装依赖</span>
        <span>run</span><span>:</span> yarn install <span>-</span><span>-</span>frozen<span>-</span>lockfile

      <span># 构建项目</span>
      <span>-</span> <span>name</span><span>:</span> Build
        <span># 项目的构建命令</span>
        <span>run</span><span>:</span> yarn run build

      <span># 第四步，部署</span>
      <span>-</span> <span>name</span><span>:</span> Deploy
        <span># action 配置详见 https://github.com/JamesIves/github-pages-deploy-action</span>
        <span>uses</span><span>:</span> JamesIves/github<span>-</span>pages<span>-</span>deploy<span>-</span>action@v4
        <span>with</span><span>:</span>
          <span># 部署到的分支</span>
          <span>branch</span><span>:</span> gh<span>-</span>pages
          <span># 需要部署的文件夹</span>
          <span>folder</span><span>:</span> dist

  <span># 部署到服务器</span>
  <span>deploy-server</span><span>:</span>
    <span>runs-on</span><span>:</span> ubuntu<span>-</span>latest
    <span># 确保在部署到 GitHub Pages 之后执行</span>
    <span>needs</span><span>:</span> deploy<span>-</span>gh<span>-</span>pages
    <span>steps</span><span>:</span>
      <span># 检出网站代码</span>
      <span>-</span> <span>name</span><span>:</span> Checkout
        <span>uses</span><span>:</span> actions/checkout@v3
        <span>with</span><span>:</span>
          <span># 检出 gh-pages 分支</span>
          <span>ref</span><span>:</span> gh<span>-</span>pages
          <span># 获取全部的历史提交</span>
          <span>fetch-depth</span><span>:</span> <span>0</span>

      <span># 配置环境</span>
      <span>-</span> <span>name</span><span>:</span> Configuration environment
        <span># 写入私钥、配置 Git 用户名，写入服务器地址</span>
        <span># 您需要自行将服务器的私钥写入 secrets 的 SSH_PRIVATE_KEY</span>
        <span>run</span><span>:</span> <span>|</span><span>
          mkdir -p ~/.ssh/
          echo "${{ secrets.SSH_PRIVATE_KEY }}" > ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          ssh-keyscan &lt;your domain> >> ~/.ssh/known_hosts
          git config --global user.name 'Your Name'
          git config --global user.email 'You email'</span>

      <span># 部署到服务器</span>
      <span>-</span> <span>name</span><span>:</span> Deploy
        <span># 使用 Git 将网站代码强制推送到远程的网站目录</span>
        <span># 并使用 SSH 连接服务器进入网站目录手动切换到最新提交</span>
        <span>run</span><span>:</span> <span>|</span><span>
          git push -f git@&lt;your domain>:&lt;deploy dir> gh-pages
          ssh git@&lt;your domain> "cd &lt;deploy dir> &amp;&amp; git reset --hard HEAD"</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="GitHub" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">GitHub 简介</title>
    <id>https://github.com/MisterChen9527/code/github/intro.html</id>
    <link href="https://github.com/MisterChen9527/code/github/intro.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="gayhub-github-是世界上最大的-同性交友-代码托管网站" tabindex="-1"> <s>Gayhub</s> GitHub 是世界上最大的 <s>同性交友</s> 代码托管网站</h2>
<p>😋当然在上面交友也是极好的(这是重点，圈起来要考的😎)。</p>
<h2 id="基本概念" tabindex="-1"> 基本概念</h2>
<h3 id="repository" tabindex="-1"> Repository</h3>
<p>仓库。一个仓库即是一个项目。仓库是 GitHub 上的主要内容。每当您新建一个项目并想要在 GitHub。</p>
<h3 id="star" tabindex="-1"> Star</h3>
<p>收藏。在每一个仓库主页的上方可以看到 star 按钮。其上的数值为收藏该项目的人数。点击星星即可将当前仓库收藏到您的账号上。您可以收藏一些您比较喜欢，或者项目对您来说有很大价值的项目。同时，点击数字可以看到哪些人收藏了这个项目。</p>
<h3 id="fork" tabindex="-1"> Fork</h3>
<p>复刻。在每一个仓库主页的上方可以看到 Fork 按钮。点击该按钮的作用是将当前项目复刻一份到自己的仓库中，这样，您就可以在此仓库仓库上查看当前、历史的版本，切换分支、或者是随心所欲的进行修改。原项目的新的推送、对历史版本的修改、甚至原作者删除了他的 repo，都不会对您 fork 的项目产生任何影响。</p>
<h3 id="issue" tabindex="-1"> Issue</h3>
<p>议题。你可将这里理解为 Bug 汇报区与新功能提交区。</p>
<p>如果您在使用该项目的过程中遇到了问题，可以在相应项目的 Issue 板块按照项目的要求提出 Issue。在 Issue 中可以汇报一个 bug，或者是提出一个 Feature Request (功能请求)。项目的拥有者可以针对您汇报的情况对您做出回复。</p>
<p>同时，项目拥有者还可以:</p>
<ul>
<li>为此 issue 增加 label (标签)，以帮助项目成员或是项目的其他使用者更好的理解这个 issue 的分类</li>
<li>将此 issue assign (分派) 给特定的项目成员解决。</li>
<li>将此 issue 加入特定的 project (项目) 以安排处理日期与进度。</li>
</ul>
<div><p>提示</p>
<p>为了 GitHub 的友好交流环境，请在汇报 bug 时永远带上 bug 的一个简易的复现流程，可以直接建立一个简单的 reproduction repo 并把链接放置在您提出的 issue 中。</p>
</div>
<h3 id="dicussion" tabindex="-1"> Dicussion</h3>
<p>GitHub 的讨论区，和 Issue 区主要用于 Bug 和 Feature Request 的追踪不同，通常情况下，你可以在讨论区开帖子询问使用中遇到的问题，以便其他人进行答复。你也可以在 Dicussion 区提供项目的看法与建议，比如对某个功能进行改进的方式以及相关理由。你也可以展示你自己使用项目的一些新的或是与项目相关的一些内容。</p>
<h3 id="watch" tabindex="-1"> Watch</h3>
<p>关注，在每一个仓库主页的上方可以看到 Watch 按钮。如果您关注了某个项目,那么这个项目有了变化的时候,您就会得到通知.在您点击关注后，您还可以点击下拉列表进一步设置关注级别。您可以选择接受 Release (新发布) 通知，也可以选择 Watching 来监听所有的通知。当您选择 Ignore 的话，即使有人在这个仓库中 metion (提到) 了您，您也不会得到通知。</p>
<h3 id="review" tabindex="-1"> Review</h3>
<p>审查。当项目收到 PR 时，项目的拥有成员可以对这份 PR 的代码改动进行审查，在 Review 的过程中，可以对代码的特定行或特定几行通过 comment(评论) 的方式来提出自己对代码改动的意见。</p>
<h2 id="主页" tabindex="-1"> 主页</h2>
<p><img src="@source/code/github/assets/mainPage.png" alt="个人主页"></p>
<p><a href="https://github.com" target="_blank" rel="noopener noreferrer">https://github.com</a></p>
<p>主页，在您登陆后，屏幕的左侧会展示您和您加入团队的项目，以及您的团队详情。中部会显示您关注的项目、人的动态，右侧会根据算法展示一些您可能会感兴趣的 repo。</p>
<h2 id="个人主页" tabindex="-1"> 个人主页</h2>
<p><img src="@source/code/github/assets/profile.png" alt="个人主页"></p>
<p><strong>地址:</strong> <code>https://github.com/&lt;您的用户名&gt;</code></p>
<p>个人主页会有几个主要面板:</p>
<h3 id="overview" tabindex="-1"> Overview</h3>
<p>个人概览，您可以在上方 pin(固定) 最多六个您想要展示给他人的仓库。</p>
<p>下方就是您过去一年里向 GitHub 的提交数量分布图，以及您在 GitHub 上的活动比例。</p>
<p>最下方是近几年您在 GitHub 上的活动记录。</p>
<h3 id="repositories" tabindex="-1"> Repositories</h3>
<p><img src="@source/code/github/assets/personalRepo.png" alt="个人仓库"></p>
<p>仓库列表，该面板会按照最后更新时间的倒序，展示该用户拥有的所有 reo，同时也会在面板上展示项目的 Descript(描述)、Star 数、Fork 数、语言、协议、标签，以及过去一年内项目的 commit 分布数量。这些都能够帮助浏览者在不进入具体仓库页面的情况下大致了解每一个仓库的内容、欢迎程度与维护情况。</p>
<h3 id="projects" tabindex="-1"> Projects</h3>
<p>个人拥有的项目，在管理自己与团队跨仓库的活动日程时很有用。可以设置涉及到的仓库，提出任务、代办、时间表等。</p>
<h3 id="packages" tabindex="-1"> Packages</h3>
<p>个人在 GitHub 上拥有的包。目前较少人在 GitHub 上发布相关的包。</p>
<h3 id="stars" tabindex="-1"> Stars</h3>
<p>和仓库列表完全相同，只不过展示该用户收藏的 repo。</p>
<h3 id="followers-following" tabindex="-1"> Followers / Following</h3>
<p>关注您的人 / 关注的人。在个人主页的左侧就有 follow 按钮，follow 一个人意味着这个人在 GitHub 的的活动会出现在 GitHub 主页的 Activity List 上。</p>
<h2 id="仓库主页" tabindex="-1"> 仓库主页</h2>
<p><img src="@source/code/github/assets/repo.png" alt="仓库主页"></p>
<p>仓库主页主要显示项目的信息。从左到右的面板依次是: Code(代码)，Issues (问题)、Pull Requests (提交请求)、Actions (自动流程)、 Projects (项目)、 Wiki (项目介绍)、 Security (项目安全)、 Insights (项目数据统计) 与 Settings (项目设置)。</p>
<p>在下方会展示代码文件以及项目说明 README.md 文件。</p>
]]></content>
    <category term="GitHub" scheme=""/>
    <published>2019-11-20T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">GitHub Pages</title>
    <id>https://github.com/MisterChen9527/code/github/pages.html</id>
    <link href="https://github.com/MisterChen9527/code/github/pages.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>GitHub Pages 是静态站点托管服务，可直接从 GitHub 上的存储库中获取 HTML，CSS 和 JavaScript 文件，还可以选择在构建过程中运行这些文件并发布网站。</p>
<p>您可以将站点托管在 GitHub 的 <code>github.io</code> 域名或您自己的自定义域名上。</p>
]]></summary>
    <content type="html"><![CDATA[<p>GitHub Pages 是静态站点托管服务，可直接从 GitHub 上的存储库中获取 HTML，CSS 和 JavaScript 文件，还可以选择在构建过程中运行这些文件并发布网站。</p>
<p>您可以将站点托管在 GitHub 的 <code>github.io</code> 域名或您自己的自定义域名上。</p>

<h2 id="简介" tabindex="-1"> 简介</h2>
<p>GitHub Pages 站点共有三种类型: 项目，用户和组织。</p>
<p>项目站点连接到 GitHub 上托管的特定项目，而用户和组织站点已连接到特定的 GitHub 帐户。</p>
<ul>
<li>要发布用户站点，您必须创建一个名为的用户帐户拥有的存储库 <code>&lt;username&gt;.github.io</code>。</li>
<li>要发布组织站点，您必须创建一个名为的组织所拥有的存储库 <code>&lt;organization&gt;.github.io</code>。</li>
</ul>
<p>除非您使用自定义域名，否则用户站点和组织站点均位于 <code>http(s)://&lt;username&gt;.github.io</code> 或 <code>http(s)://&lt;organization&gt;.github.io</code>。</p>
<p>项目站点的源文件与其项目存储在同一存储库中。除非您使用自定义域，否则项目站点可在 <code>http(s)://&lt;username&gt;.github.io/&lt;repository&gt;</code> 或 <code>http(s)://&lt;organization&gt;.github.io/&lt;repository&gt;</code> 访问。</p>
<p>虽然您只能在 GitHub 上为每个帐户创建一个用户或组织站点。但无论是组织还是用户帐户拥有的项目站点都是无限的。</p>
<h2 id="发布源文件到-github-pages" tabindex="-1"> 发布源文件到 GitHub Pages</h2>
<div><p>警告</p>
<p>GitHub Pages 站点 默认在互联网上公开，即使站点的仓库是私有的。</p>
</div>
<p>如果您的存储库中存在默认发布源，则 GitHub Pages 将自动从该源发布网站。用户和组织站点的默认发布源是存储库的默认分支的根目录。项目站点的默认发布源是 gh-pages 分支的根目录。</p>
<p>您需要跳转到 Settings (设置) 选项卡，下来找到 GitHub Pages 的配置部分。</p>
<div><p>提示</p>
<p>您只能在根目录 (<code>/</code>) 和 文档目录 (<code>/docs</code>) 之间进行选择，而不能将仓库内的任意文件夹作为发布源。</p>
</div>
<h3 id="静态站点" tabindex="-1"> 静态站点</h3>
<p>GitHub Pages 发布您推送到存储库的所有静态文件，这意味它不支持服务器端语言，例如 PHP，Ruby 或 Python。也就是您只能通过 GitHub Pages 发布 “无后端” 的纯静态站点。</p>
<h3 id="限制" tabindex="-1"> 限制</h3>
<ul>
<li>
<p>GitHub Pages 网站不得超过 1 GB。</p>
</li>
<li>
<p>GitHub Pages 站点的带宽限制为每月 100GB。</p>
</li>
<li>
<p>GitHub Pages 站点限制为每小时最多构建 10 次。</p>
</li>
</ul>
<h3 id="子模块" tabindex="-1"> 子模块</h3>
<p>如果 GitHub Pages 站点的仓库包含子模块，则在构建站点时会自动拉取其内容。</p>
<p>只能使用指向公共仓库的子模块，因为 GitHub Pages 服务器无法访问私有仓库。</p>
<p>对子模块 (包括嵌套子模块) 使用 <code>https://</code> 只读 URL。 您可以在 .gitmodules 文件中进行此更改。</p>
<h2 id="取消发布" tabindex="-1"> 取消发布</h2>
<h3 id="取消发布项目站点" tabindex="-1"> 取消发布项目站点</h3>
<ol>
<li>在 GitHub 上，导航到仓库的主页面。</li>
<li>如果仓库中存在 gh-pages 分支，请删除 gh-pages 分支。</li>
<li>在仓库名称下，单击 Settings (设置) 。</li>
<li>在“ GitHub Pages”下，使用 Source (源) 下拉菜单并选择 None (无) 。</li>
</ol>
<h3 id="取消发布用户或组织站点" tabindex="-1"> 取消发布用户或组织站点</h3>
<ol>
<li>在 GitHub 上，导航到仓库的主页面。</li>
<li>删除用作发布源的分支，或删除整个仓库。</li>
</ol>
<h2 id="自定义域名" tabindex="-1"> 自定义域名</h2>
<p>您可以在对应仓库的 Settings (设置) 选项卡设置自定义域名，同时您需要将自定义域名的 CNAME 记录指向 <code>&lt;用户名&gt;.github.io</code>。</p>
<div><p>提示</p>
<p>自定义域名的控制是由发布源文件夹下的 CNAME 文件控制的，您可以直接创建这个文件写入链接。</p>
<p>同时，GitHub Pages 要求这个文件一直存在，否则自定义域名会失效。</p>
</div>
]]></content>
    <category term="GitHub" scheme=""/>
    <published>2021-02-20T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">语义化提交</title>
    <id>https://github.com/MisterChen9527/code/github/semantic.html</id>
    <link href="https://github.com/MisterChen9527/code/github/semantic.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="semantic" tabindex="-1"> Semantic</h2>
<p>对于一个大型项目，几千个 commit 是很常见的，这些 commit 部分是项目维护者提交的 commit，部分是一些热心的开发者通过 PR 贡献的。</p>
<p>无论是对于项目维护者，还是想要贡献代码的热心开发者来说，一个简洁明了的 commit 描述都是必不可少的。也就是说我们需要用尽可能简短的备注信息，备注每一个 commit 的作用，以便大家查看。所以我们需要一种规范的，语义化的备注格式，很快由知名项目牵头，全球接收并统一了一种语义化的备注格式，这就是 semantic 规范的来源。</p>
<h2 id="优势" tabindex="-1"> 优势</h2>
<p>当一个仓库所有的 commit 信息都是用标准的 semantic 格式时，用户可以很方便的理解每一个 commit 的作用。</p>
<p>同时，senmantic 支持直接将某个提交或 PR 与特定 issue 链接，并自动关闭或引用这些 issue。</p>
<p>通过一些第三方工具，大家可以基于这些备注信息进行过滤查找，更新日志生成等操作。</p>
<h2 id="格式" tabindex="-1"> 格式</h2>
<div><pre><code>&lt;type>(&lt;scope>): &lt;subject>
&lt;body>

&lt;footer>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><h3 id="header" tabindex="-1"> header</h3>
<p>第一行被称为 <code>header</code>，它必须只有一行，包括三个字段: <code>&lt;type&gt;</code>(必需)、<code>&lt;scope&gt;</code>(可选)和 <code>&lt;subject&gt;</code>(必需)</p>
<h3 id="type" tabindex="-1"> type</h3>
<p>commit 的类型。</p>
<p>规范中规定了如下类型:</p>
<ul>
<li><code>feat</code>: feature, 新增功能</li>
<li><code>fix</code> : bug fix, 修复 bug</li>
<li><code>docs</code>: documentation, 仅仅修改了文档，如 <code>README.md</code></li>
<li><code>style</code>: style, 仅仅是对格式进行修改，如逗号、缩进、空格等，不改变代码逻辑</li>
<li><code>refactor</code>: refactor, 代码重构，一般更改了源文件或测试文件，但没有新增功能或修复 bug</li>
<li><code>perf</code>: preformance, 优化相关，如提升性能、用户体验等</li>
<li><code>test</code>: test, 测试用例，包括单元测试，集成测试</li>
<li><code>chore</code>: chore, 对于库的其他内容的改变，一般不涉及到源文件或测试文件，比如更改 CI 设置，提升仓库以来等</li>
<li><code>revert</code>: 版本回滚</li>
</ul>
<h3 id="scope" tabindex="-1"> scope</h3>
<p>用于说明 commit 影响的范围，比如: <code>views</code> , <code>component</code>, <code>utils</code>, <code>test</code>。这个是由项目的内容与结构决定的。</p>
<h3 id="subject" tabindex="-1"> subject</h3>
<p>commit 目的的简短描述，最好小于 50 字符，一般不超过 65 个字符，最长不超过 80 字符。</p>
<p>当 subject 限制的字符数无法详细说明此 commit 的变动时，将 commit 的具体变动放置在 body 中</p>
<h3 id="body" tabindex="-1"> body</h3>
<p>对本次 commit 修改内容的具体描述，可以分为多行。<code>body</code> 是可选的，而且 <code>body</code> 可以有多行。</p>
<h3 id="footer" tabindex="-1"> footer</h3>
<p>可选的，前面有一空行。可以添加一些备注，一般放置 <code>BREAKING CHANGE</code>(一些破坏性的变动) 或修复的 bug(涉及的 issue)的链接。</p>
<h2 id="semantic-commit-与-changelog-生成" tabindex="-1"> Semantic commit 与 Changelog 生成</h2>
<p>不同语言环境都有很多种工具来帮助您创建一个 semantic commit 或者自动生成 changelog。</p>
<div><p>案例</p>
<p>Node.js 环境下可以使用:</p>
<ul>
<li>
<p><a href="https://github.com/commitizen/cz-conventional-changelog" target="_blank" rel="noopener noreferrer"><code>cz-conventional-changelog</code></a> 提供 <code>git cz</code> 命令辅助创建 semantic commit。</p>
</li>
<li>
<p><a href="https://github.com/conventional-changelog/conventional-changelog" target="_blank" rel="noopener noreferrer"><code>conventional-changelog-cli</code></a> 来快速生成更新日志</p>
</li>
</ul>
</div>
]]></content>
    <category term="GitHub" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">加速 GitHub 克隆</title>
    <id>https://github.com/MisterChen9527/code/github/speedup.html</id>
    <link href="https://github.com/MisterChen9527/code/github/speedup.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>由于天朝墙的存在，GitHub 的访问速度在大部分国内地区都很慢。如果需要克隆体积比较大的项目，可能需要很长时间，也很大概率会在中途因为网络波动、终端问题导致克隆失败。</p>
<p>本文介绍如何使用 Gitee 加快 GitHub 项目克隆。</p>
<h2 id="gitee" tabindex="-1"> Gitee</h2>
<p>Gitee 又称码云，是一个国内的代码托管商，国内访问 Gitee 的速度是十分 Amazing 的。</p>
<h3 id="注册" tabindex="-1"> 注册</h3>
<p>Gitee 账户可以很方便的通过 GitHub 账户 + 绑定手机号注册。</p>
<h3 id="添加公钥" tabindex="-1"> 添加公钥</h3>
<p>完成注册后，您需要上传本地公钥，以保证可以从 Gitee 上拉取或克隆，其步骤与 GitHub 大致相同。</p>
<h3 id="导入-github-仓库" tabindex="-1"> 导入 GitHub 仓库</h3>
<p>码云的企业专线访问 GitHub 的速度很快，而码云在新建仓库的时候提供了导入选项，这就给我们的加速提供了方式。</p>
<p>我们只需要在码云上新建仓库，选择导入，然后输入自己想要克隆的 GitHub 仓库地址，交给码云完成导入即可。</p>
<p>稍等片刻后，码云即会将 GitHub 的仓库同步到自己的服务器上，此时我们只需要克隆码云上的这个仓库地址，就可以高速克隆这个项目。</p>
<h3 id="远程库地址修改" tabindex="-1"> 远程库地址修改</h3>
<p>在克隆完毕后，本地的 origin 远程库会默认为 Gitee 的仓库，此时我们需要使用 <code>git remote rename origin gitee</code> 命令，将码云的远程仓库重命名为 <code>gitee</code>，并使用 <code>git remote add origin &lt;github url&gt;</code> 命令重新添加 GitHub 的远程仓库为 origin。</p>
<p>这样我们稍后在做出本地提交后，即可直接推送到 GitHub 仓库。</p>
<h3 id="同步仓库" tabindex="-1"> 同步仓库</h3>
<p>如果以导入的形式创建码云仓库。则可以随时点击仓库页面上的同步图标，让码云随时拉取最新的 gitee 代码，以便在本地通过 <code>git fetch gitee</code>，通过码云服务器高速拉取最新代码。</p>
]]></content>
    <category term="GitHub" scheme=""/>
    <published>2021-02-18T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">GitHub Token</title>
    <id>https://github.com/MisterChen9527/code/github/token.html</id>
    <link href="https://github.com/MisterChen9527/code/github/token.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>Personal Access Token (PAT)，又称个人访问令牌，是一种代替密码进行 GitHub 身份认证的方式。</p>
]]></summary>
    <content type="html"><![CDATA[<p>Personal Access Token (PAT)，又称个人访问令牌，是一种代替密码进行 GitHub 身份认证的方式。</p>

<h2 id="创建个人访问令牌" tabindex="-1"> 创建个人访问令牌</h2>
<ol>
<li>
<p>访问 <a href="https://github.com/settings/tokens/new" target="_blank" rel="noopener noreferrer">新建 Token 页面</a> (当然您需要先登陆 GitHub)</p>
<blockquote>
<p>或者可以点击头像 → Settings → Developer settings → Personal access tokens → Generate new Token</p>
</blockquote>
</li>
<li>
<p>输入一个备注，选择您需要授权 Token 访问的内容，之后点击页面底部的 &quot;Generate Token&quot;</p>
</li>
<li>
<p>妥善保存该 Token (因为您无法再次查看它)</p>
</li>
</ol>
<p>详见 <a href="https://docs.github.com/cn/github/authenticating-to-github/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">创建个人访问令牌</a></p>
]]></content>
    <category term="GitHub" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">代码学习教程</title>
    <id>https://github.com/MisterChen9527/code/language/</id>
    <link href="https://github.com/MisterChen9527/code/language/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<ul>
<li><a href="/code/language/learning.html">如何学习一门语言</a></li>
</ul>
<h2 id="教程目录" tabindex="-1"> 教程目录</h2>
<ul>
<li>
<p><a href="/code/language/js/">JavaScript 教程</a></p>
</li>
<li>
<p><a href="/code/language/typescript/">TypeScript 教程</a></p>
</li>
<li>
<p><a href="/code/language/python/">Python 教程</a> (编写中...)</p>
</li>
<li>
<p><a href="https://www.liaoxuefeng.com/wiki/1252599548343744" target="_blank" rel="noopener noreferrer">Java 教程</a>(廖雪峰的博客)</p>
</li>
<li>
<p><a href="/code/language/markdown/">Markdown 教程</a></p>
</li>
<li>
<p><a href="/code/language/yaml/">YAML 教程</a></p>
</li>
<li>
<p><a href="/code/language/json/">JSON 教程</a></p>
</li>
</ul>
<h2 id="linter" tabindex="-1"> Linter</h2>
<ul>
<li><a href="/code/language/linter/">Linter 介绍</a></li>
</ul>
<div><p>提示</p>
<p>C 、C++、Java、PHP 正在编写中...</p>
</div>
]]></content>
    <category term="教程" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">如何学习一门计算机语言</title>
    <id>https://github.com/MisterChen9527/code/language/learning.html</id>
    <link href="https://github.com/MisterChen9527/code/language/learning.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h1 id="如何学习一门计算机语言" tabindex="-1"> 如何学习一门计算机语言</h1>
<div><p>提示</p>
<p>学习一门语言的基本顺序是:</p>
<ul>
<li>了解数据结构</li>
<li>了解变量声明与赋值</li>
<li>了解判断和循环体结构</li>
<li>了解函数声明</li>
<li>了解输入输出</li>
</ul>
<p>本部分将以 JS 作为示例，展示什么是一门计算机语言，应该如何学习它们。</p>
</div>
<h2 id="基础" tabindex="-1"> 基础</h2>
<p>首先，任何语言都是由一些基本结构组成的，下面介绍几乎所有语言共有的一些概念:</p>
<h3 id="语句" tabindex="-1"> 语句</h3>
<p>语句可以简单理解为一个操作，它可以是赋值，也可以是执行，还可以是介于或者是可以归类到两者上的判断、声明、标记等。</p>
<p>请注意一条语句通常是一个计算机语言描述的最小操作。</p>
<p>比如:</p>
<div><pre><code><span>let</span> a <span>=</span> <span>1</span><span>;</span> <span>// 赋值</span>
<span>alert</span><span>(</span><span>"Hello word"</span><span>)</span><span>;</span> <span>// 调用函数 执行操作</span>
<span>if</span> <span>(</span>a <span>></span> <span>2</span><span>)</span> <span>{</span>
  <span>// 判断</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="代码块" tabindex="-1"> 代码块</h3>
<p>通常情况下，在有了语句概念后，我们就要使用不同的语句顺序，完成不同的操作，但是某些操作总是固定的。</p>
<p>比如回家，总是 “掏出钥匙”-“插入钥匙”-“转动钥匙”-“开启房门”-“拔出钥匙”-“进入”-“关闭房门” 。</p>
<p>这些步骤每一步都可以理解为一个语句，但是由于其顺序基本是固定的，我们就可以设计一个代码块，来约束它们。</p>
<div><pre><code>{
  “掏出钥匙”;
  “插入钥匙”;
  “转动钥匙”;
  “开启房门”;
  “拔出钥匙”;
  “进入”;
  “关闭房门”;
}
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>大多数语言会使用 <code>{ }</code> 的形式，少数语言会使用统一的缩进进行表达。</p>
<h2 id="数据结构" tabindex="-1"> 数据结构</h2>
<p>计算机顾名思义就是可以做数学计算的机器，因此，计算机程序理所当然地可以处理各种数值。</p>
<p>任何语言都是操作、计算(处理)、生成数据的。数据结构是一门语言存放数据的方式。不同的数据，需要定义不同的数据类型。了解了数据结构就了解了一门语言可以存储或处理何种数据。</p>
<p>大多数语言都包含了以下的一种或多种内容:</p>
<ul>
<li>
<p>数字:</p>
<p>不同语言对数字有不同的处理方式，少数语言可能只有数字这一种类型，一些语言可能会拆分成整数与浮点数。一些底层语言(涉及到内存)可能会魔鬼的将数字拆分为: 整型、浮点数、无符号整型、长整型、无符号长整形、长浮点数。(说的就是您，C 语言)</p>
</li>
<li>
<p>字符串:</p>
<p>一些语言只有字符串这个概念，一些语言分为字符和字符串这个概念。</p>
</li>
<li>
<p>布尔值:</p>
<p>几乎所有语言都有布尔值，布尔值只有真和假两种类型。大多数会表示为 <code>true</code> 和 <code>false</code>，少数会表示为 <code>True</code> 和 <code>False</code>。</p>
</li>
<li>
<p>数组:</p>
<p>大部分语言都有数组 (Array) 这个概念，它是一个有序的元素集合。很多底层语言就是靠数组实现的字符串 (因为字符串长度不固定)。在数组中，每个元素具有标号，从 0 开始依次递增。</p>
<p>一些语言还有 Set 这个概念，Set 表示的是无序元素集合，所有元素没有先后与标号的概念，自然 Set 也无法存入相同的元素。</p>
</li>
<li>
<p>对象:</p>
<p>大部分语言的对象 (Object) 都是由键值对组成的，它是一个由键标记的元素集合，可以使用特定的键名写入或读取其对应的值。</p>
<p>一些产生较晚的语言，将对象改为 Map，Map 表达一个映射，将对应的键映射到对应的值上。</p>
</li>
<li>
<p>类:</p>
<p>类 (Class) 是一个内容集合，它包含了自己的构造器、变量与方法。类在声明后，可以很轻松的使用构造器创建一个新的实例。每个实例可以用其内部的变量维护或表达一个状态，并可以使用它自身的方法来读取或是改变自己的状态。不同的类之间还可以进行继承。</p>
</li>
</ul>
<h2 id="变量" tabindex="-1"> 变量</h2>
<p>一个<strong>变量</strong>是数据的“命名存储”。我们可以使用变量来保存商品、访客和其他信息。</p>
<p>下面的语句创建(换句话说，<strong>声明</strong>或者<strong>定义</strong>)了一个名称为“message”的变量:</p>
<div><pre><code><span>let</span> message<span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>在有了变量之后，我们就可以将刚了解的数据结构赋值给变量，以变量来代替这些数据。</p>
<div><pre><code><span>let</span> user <span>=</span> <span>"John"</span><span>;</span>
<span>let</span> age <span>=</span> <span>25</span><span>;</span>
<span>let</span> message <span>=</span> <span>"Hello"</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><h2 id="条件" tabindex="-1"> 条件</h2>
<p>条件运算符用于判断，通过判断一个条件的真假，来执行不同的逻辑。这是每一门语言逻辑结构的基础。</p>
<div><pre><code><span>let</span> year <span>=</span> <span>2015</span><span>;</span>
<span>if</span> <span>(</span>year <span>&lt;</span> <span>2015</span><span>)</span> <span>{</span>
  <span>alert</span><span>(</span><span>"Too early..."</span><span>)</span><span>;</span>
<span>}</span> <span>else</span> <span>if</span> <span>(</span>year <span>></span> <span>2015</span><span>)</span> <span>{</span>
  <span>alert</span><span>(</span><span>"Too late"</span><span>)</span><span>;</span>
<span>}</span> <span>else</span> <span>{</span>
  <span>alert</span><span>(</span><span>"Exactly!"</span><span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="循环" tabindex="-1"> 循环</h2>
<p>循环运算符的作用，是在条件控制下，零次或多次执行特定代码块。它使得重复执行成为了可能。</p>
<div><pre><code><span>let</span> result <span>=</span> <span>0</span><span>;</span>
<span>let</span> i <span>=</span> <span>1</span><span>;</span>

<span>while</span> <span>(</span>i <span>&lt;=</span> <span>100</span><span>)</span> <span>{</span>
  <span>// 计算1+2+3+...+100的结果</span>
  i <span>=</span> i <span>+</span> <span>1</span><span>;</span>
  result <span>=</span> result <span>+</span> i<span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div><pre><code><span>for</span> <span>(</span><span>let</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>3</span><span>;</span> i<span>++</span><span>)</span> <span>{</span>
  <span>// 结果为 0、1、2</span>
  <span>alert</span><span>(</span>i<span>)</span><span>;</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><h2 id="函数" tabindex="-1"> 函数</h2>
<p>函数是程序的主要“构建模块”，</p>
<p>创建函数时，需要声明函数内容，函数内容由一系列语句(代码块) 构成。在声明函数后，使用函数即可多次调用一段代码。</p>
<p>例如:</p>
<div><pre><code><span>function</span> <span>showMessage</span><span>(</span><span>)</span> <span>{</span>
  <span>alert</span><span>(</span><span>"Hello everyone!"</span><span>)</span><span>;</span>
<span>}</span> <span>// 声明一个函数</span>

<span>showMessage</span><span>(</span><span>)</span><span>;</span> <span>// 调用它</span>
<span>showMessage</span><span>(</span><span>)</span><span>;</span> <span>// 可以在任意时刻调用它</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>同时函数可以通过接受参数的形式来根据情况返回不同的结果，比如这是一个简单的求和函数。</p>
<div><pre><code><span>function</span> <span>sum</span><span>(</span><span>sum1<span>,</span> sum2</span><span>)</span> <span>{</span>
  <span>return</span> sum1 <span>+</span> sum2<span>;</span>
<span>}</span>

<span>sum</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>)</span><span>;</span> <span>// return 3</span>
<span>sum</span><span>(</span><span>5</span><span>,</span> <span>6</span><span>)</span><span>;</span> <span>// return 11</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="教程" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">小程序</title>
    <id>https://github.com/MisterChen9527/code/mini-app/</id>
    <link href="https://github.com/MisterChen9527/code/mini-app/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<div><p>提示</p>
<p>在开发小程序之前。应当掌握 <a href="/code/website/html/">HTML</a>、<a href="/code/website/css/">CSS</a>、<a href="/code/language/js/guide/">JavaScript 基础</a> 以及 <a href="/code/language/js/es6/">ES6</a>。</p>
</div>
]]></summary>
    <content type="html"><![CDATA[<div><p>提示</p>
<p>在开发小程序之前。应当掌握 <a href="/code/website/html/">HTML</a>、<a href="/code/website/css/">CSS</a>、<a href="/code/language/js/guide/">JavaScript 基础</a> 以及 <a href="/code/language/js/es6/">ES6</a>。</p>
</div>

<h2 id="小程序基础简介" tabindex="-1"> 小程序基础简介</h2>
<p>在微信小程序中主要有四种文件结构: <code>wxml</code>、<code>wxss</code>、<code>js</code> 和 <code>json</code>。其中 <code>wxml</code> 对应带有 vue.js 特征的 html5，<code>wxss</code> 对应 css3，<code>js</code> 对应 ES6 标准的的 javaScript。</p>
<p>对于 QQ 小程序，其文件结构为 <code>QML</code>、<code>qss</code>、<code>js</code> 和 <code>json</code>。</p>
<div><p>提示</p>
<p>QQ 小程序本质还是换汤不换药的，且 QQ 开发者工具兼容 <code>wxml</code> 与 <code>wss</code>)</p>
</div>
<p>小程序开发与网页开发极其相似。所以必须有适当的网页开发基础。零基础的人可能很难直接上手小程序开发。</p>
<h2 id="教程目录" tabindex="-1"> 教程目录</h2>
<ul>
<li>
<p><a href="/code/mini-app/guide/file-structure.html">文件结构</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/env.html">运行环境</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/config/">小程序配置</a></p>
<ul>
<li>
<p><a href="/code/mini-app/guide/config/app-config.html">全局配置</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/config/page-config.html">页面配置</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/config/sitemap-config.html">sitemap 配置</a></p>
</li>
</ul>
</li>
<li>
<p><a href="/code/mini-app/guide/frame/">小程序框架</a></p>
<ul>
<li>
<p><a href="/code/mini-app/guide/frame/intro.html">框架介绍</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/frame/scene.html">场景值</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/frame/env.html">运行环境</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/frame/mechanism.html">运行机制</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/frame/update.html">更新机制</a> <i>Content not supported</i></p>
</li>
</ul>
</li>
<li>
<p><a href="/code/mini-app/guide/service/">逻辑层</a></p>
<ul>
<li>
<p><a href="/code/mini-app/guide/service/lifetime.html">生命周期</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/service/route.html">路由</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/service/register.html">注册</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/service/app.html">App()</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/service/page.html">Page()</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/service/run.html">运行</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/service/module.html">模块化</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/service/api/">API</a></p>
</li>
</ul>
</li>
<li>
<p><a href="/code/mini-app/guide/view/">视图层</a></p>
<ul>
<li>
<p><a href="/code/mini-app/guide/view/wxml.html">WXML</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/wxss.html">WXSS</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/wxs.html">WXS</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/event.html">事件</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/component.html">基础组件</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/animation.html">动画</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/wxs.html">WXS</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/wxs-event.html">WXS 事件</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/model.html">建议双向绑定</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/selector.html">获取界面上的节点信息</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/selector.html">相应显示区域变化</a> <i>Content not supported</i></p>
</li>
<li>
<p><a href="/code/mini-app/guide/view/rendering-cache.html">初始渲染缓存</a> <i>Content not supported</i></p>
</li>
</ul>
</li>
<li>
<p><a href="/code/mini-app/guide/ability/">小程序能力</a></p>
<ul>
<li>
<p><a href="/code/mini-app/guide/ability/network.html">网络请求</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/ability/storage.html">存储</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/ability/file-system.html">文件系统</a></p>
</li>
<li>
<p><a href="/code/mini-app/guide/ability/debug.html">调试</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="开发者工具" tabindex="-1"> 开发者工具</h2>
<ul>
<li>
<p><a href="/code/mini-app/tools/interface.html">工具界面简介</a></p>
</li>
<li>
<p><a href="/code/mini-app/tools/debug.html">调试</a></p>
</li>
<li>
<p><a href="/code/mini-app/tools/npm.html">npm</a></p>
</li>
<li>
<p><a href="/code/mini-app/tools/audit.html">体验评分</a></p>
</li>
</ul>
<h2 id="官方教程" tabindex="-1"> 官方教程</h2>
<ul>
<li><a href="https://developers.weixin.qq.com/ebook?action=get_post_info&amp;docid=0008aeea9a8978ab0086a685851c0a" target="_blank" rel="noopener noreferrer">点击前往</a></li>
</ul>
<h2 id="案例" tabindex="-1"> 案例</h2>
<ul>
<li><a href="https://github.com/Hope-Studio/wxminiappdemo" target="_blank" rel="noopener noreferrer">GitHub repository</a></li>
</ul>
<h2 id="mr-chen-框架说明" tabindex="-1"> Mr.Chen 框架说明</h2>
<ul>
<li>
<p><a href="/code/mini-app/framework/">小程序框架使用说明</a></p>
</li>
<li>
<p><a href="/code/mini-app/framework/tag-list.html">tag 值参数表</a></p>
</li>
<li>
<p><a href="/code/mini-app/framework/page.html">setPage 库使用说明</a></p>
</li>
<li>
<p><a href="/code/mini-app/framework/simple-debug.html">界面简单开发学习指南</a></p>
</li>
<li>
<p><a href="/code/mini-app/qr-code.html">分享相关</a></p>
</li>
</ul>
<h2 id="学习视频" tabindex="-1"> 学习视频</h2>
<ul>
<li>
<p><a href="https://www.bilibili.com/video/av22790583/" target="_blank" rel="noopener noreferrer">零基础开发小程序</a>(比较新的视频，强调总体思想)</p>
</li>
<li>
<p><a href="https://www.bilibili.com/video/av11938917" target="_blank" rel="noopener noreferrer">小程序-从入门到入土</a>(比较老的视频，针对每个组件或者 API 进行了针对的讲解与示范，但部分内容已经与最新官方文档不符)</p>
</li>
</ul>
<h2 id="示例代码" tabindex="-1"> 示例代码</h2>
<ul>
<li>
<p><a href="https://github.com/wechat-miniprogram/miniprogram-demo" target="_blank" rel="noopener noreferrer">小程序实例源码</a></p>
<p><img src="https://res.wx.qq.com/wxdoc/dist/assets/img/demo.ef5c5bef.jpg" alt="小程序示例二维码"></p>
</li>
</ul>
<h2 id="官方文档" tabindex="-1"> 官方文档</h2>
<ul>
<li><a href="https://q.qq.com/wiki/" target="_blank" rel="noopener noreferrer">QQ 小程序</a></li>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noopener noreferrer">微信小程序</a></li>
<li><a href="https://developers.weixin.qq.com/community/develop/question" target="_blank" rel="noopener noreferrer">微信小程序社区</a>
<ul>
<li><a href="https://developers.weixin.qq.com/community/develop/list/2?id=" target="_blank" rel="noopener noreferrer">官方公告</a></li>
</ul>
</li>
</ul>
<h3 id="qq-开发者工具" tabindex="-1"> QQ 开发者工具</h3>
<p>现在很多功能还处于缺失状态，bug 到没之前那么多了。</p>
<ul>
<li>
<p><a href="https://q.qq.com/wiki/" target="_blank" rel="noopener noreferrer">查看详情</a></p>
</li>
<li>
<p><a href="https://q.qq.com/wiki/tools/devtool/" target="_blank" rel="noopener noreferrer">下载地址</a></p>
</li>
</ul>
<h2 id="微信开发者工具" tabindex="-1"> 微信开发者工具</h2>
<p>微信开发者工具用来开发与调试微信小程序和微信相关网页的官方工具。小程序使用该开发工具进行开发。</p>
<ul>
<li>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener noreferrer">下载地址</a></p>
</li>
<li>
<p><a href="/code/mini-app/tools/">开发者工具教程</a></p>
</li>
<li>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html" target="_blank" rel="noopener noreferrer">官方使用指南</a></p>
</li>
</ul>
]]></content>
    <category term="小程序" scheme=""/>
    <published>2019-11-25T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">小程序分享</title>
    <id>https://github.com/MisterChen9527/code/mini-app/qr-code.html</id>
    <link href="https://github.com/MisterChen9527/code/mini-app/qr-code.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="二维码生成" tabindex="-1"> 二维码生成</h2>
<p>目前小程序二维码生成选用的是<a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.getUnlimited.html" target="_blank" rel="noopener noreferrer">无限制生成二维码</a>。</p>
<p>我们使用 Postman 软件进行二维码的获取。</p>
<h3 id="调用凭据获取" tabindex="-1"> 调用凭据获取</h3>
<p>获取任何二维码都需要先获取 <code>access_token</code>，这是小程序全局唯一后台接口调用凭据。<a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html" target="_blank" rel="noopener noreferrer">文档地址</a></p>
<p>请求方式为:</p>
<div><pre><code>GET https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=APPID&amp;secret=APPSECRET
</code></pre><div aria-hidden="true"><div></div></div></div><p>更多详情可以见文档。<code>AppSecret</code> 由于权限很大不在此文档中直接放置。</p>
<h3 id="无限制二维码生成" tabindex="-1"> 无限制二维码生成</h3>
<ul>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.getUnlimited.html" target="_blank" rel="noopener noreferrer">文档地址</a></li>
</ul>
<p>在获取 <code>access_token</code> 之后就可以获取小程序二维码了。</p>
<div><pre><code>POST https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=ACCESS_TOKEN
</code></pre><div aria-hidden="true"><div></div></div></div><p>请注意，在 Postman 软件中，首先要注意使用 <code>post</code> 方法。Body 使用 <code>raw</code>，格式选择 <code>Text</code>，需要将 <code>pretty</code> 化的 JSON 输入即可正常获取二维码。获取完二维码之后，需要在 <code>response</code> 中点击返回图片右上角的 <code>save as</code>，保存为 <code>jpg</code> 格式的文件即可保存二维码。</p>
<h2 id="小程序链接" tabindex="-1"> 小程序链接</h2>
<ul>
<li><a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Service_Center_messages.html" target="_blank" rel="noopener noreferrer">文档地址</a></li>
</ul>
<p>具体格式如下:</p>
<div><pre><code><span><span><span>&lt;</span>a</span>
  <span>href</span><span><span>=</span><span>"</span>不支持小程序时打开的网页<span>"</span></span>
  <span>data-miniprogram-appid</span><span><span>=</span><span>"</span>小程序的appid<span>"</span></span>
  <span>data-miniprogram-path</span><span><span>=</span><span>"</span>小程序路径<span>"</span></span>
  <span>></span></span>文本内容<span><span><span>&lt;/</span>a</span>
<span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div>]]></content>
    <category term="小程序" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Node.js</title>
    <id>https://github.com/MisterChen9527/code/node-js/</id>
    <link href="https://github.com/MisterChen9527/code/node-js/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>Node.js 是一款全球使用广泛的框架，可以用在前端与后端上，拥有大量的模块。Node.js 主要以其丰富并及其容易导入的 Node.js package，以及其方便管理 npm (Node.js Package Manager)闻名。</p>
]]></summary>
    <content type="html"><![CDATA[<p>Node.js 是一款全球使用广泛的框架，可以用在前端与后端上，拥有大量的模块。Node.js 主要以其丰富并及其容易导入的 Node.js package，以及其方便管理 npm (Node.js Package Manager)闻名。</p>

<h2 id="教程目录" tabindex="-1"> 教程目录</h2>
<ul>
<li>
<p><a href="/code/node-js/intro.html">Node.js 介绍</a></p>
</li>
<li>
<p><a href="/code/node-js/install.html">Node.js 与 npm 安装</a></p>
</li>
<li>
<p><a href="/code/node-js/environment.html">Node.js 环境</a></p>
</li>
<li>
<p><a href="/code/node-js/program.html">编程</a></p>
</li>
<li>
<p><a href="/code/node-js/cjs.html">Node.js CJS 模块</a></p>
</li>
</ul>
<p>以上，就是 Node.js 的简易介绍，系统学习可以查看下方的详细教程。</p>
<h2 id="初学者教程" tabindex="-1"> 初学者教程</h2>
<ul>
<li>
<p><a href="https://www.nodebeginner.org/index-zh-cn.html" target="_blank" rel="noopener noreferrer">Node.js 入门</a></p>
</li>
<li>
<p><a href="https://www.w3cschool.cn/nodejs/" target="_blank" rel="noopener noreferrer">W3CSchool</a></p>
</li>
</ul>
<h2 id="官方文档" tabindex="-1"> 官方文档</h2>
<ul>
<li><a href="https://nodejs.org/dist/latest-v14.x/docs/api/" target="_blank" rel="noopener noreferrer">地址</a></li>
</ul>
<h2 id="yarn" tabindex="-1"> Yarn</h2>
<p>快速、可靠、安全的依赖管理工具。</p>
<ul>
<li>
<p>Yarn 缓存了每个下载过的包，所以再次使用时无需重复下载。同时利用并行下载以最大化资源利用率，因此安装速度更快。</p>
</li>
<li>
<p>在执行代码之前，Yarn 会通过算法校验每个安装包的完整性。</p>
</li>
<li>
<p>使用详细、简洁的锁文件格式和明确的安装算法，Yarn 能够保证在不同系统上无差异的工作。</p>
</li>
<li>
<p><a href="https://www.yarnpkg.com/zh-Hans/docs/install#windows-stable" target="_blank" rel="noopener noreferrer">下载地址</a></p>
</li>
<li>
<p><a href="https://www.yarnpkg.com/zh-Hans/docs" target="_blank" rel="noopener noreferrer">官方文档</a></p>
</li>
</ul>
<h3 id="命令" tabindex="-1"> 命令</h3>
<ul>
<li>
<p><code>yarn install</code>: 执行安装</p>
</li>
<li>
<p><code>yarn upgrade</code>: 执行升级</p>
</li>
<li>
<p><code>yarn add &lt;package&gt;</code>: 添加一个包</p>
</li>
<li>
<p><code>yarn config set cache-folder &lt;path&gt;</code>: 更改缓存文件夹</p>
</li>
<li>
<p><code>yarn config set registry &lt;registry&gt;</code>: 更改源</p>
<div><p>提示</p>
<p>在国内，建议换成淘宝源 <a href="https://registry.npm.taobao.org" target="_blank" rel="noopener noreferrer">https://registry.npm.taobao.org</a></p>
<p>即执行</p>
<div><pre><code><span>yarn</span> config <span>set</span> registry https://registry.npm.taobao.org
</code></pre><div aria-hidden="true"><div></div></div></div></div>
</li>
</ul>
]]></content>
    <category term="Node.js" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">模块</title>
    <id>https://github.com/MisterChen9527/code/node-js/cjs.html</id>
    <link href="https://github.com/MisterChen9527/code/node-js/cjs.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>在计算机程序的开发过程中，随着程序代码越写越多，在一个文件里代码就会越来越长，越来越不容易维护。</p>
<p>为了编写可维护的代码，我们把很多函数分组，分别放到不同的文件里，这样，每个文件包含的代码就相对较少，很多编程语言都采用这种组织代码的方式。在 Node.js 环境中，一个 <code>.js</code> 文件就称之为一个模块(module)。</p>
<p>使用模块有什么好处?</p>
<p>最大的好处是大大提高了代码的可维护性。其次，编写代码不必从零开始。当一个模块编写完毕，就可以被其他地方引用。我们在编写程序的时候，也经常引用其他模块，包括 Node.js 内置的模块和来自第三方的模块。</p>
<p>使用模块还可以避免函数名和变量名冲突。相同名字的函数和变量完全可以分别存在不同的模块中，因此，我们自己在编写模块时，不必考虑名字会与其他模块冲突。</p>
]]></summary>
    <content type="html"><![CDATA[<p>在计算机程序的开发过程中，随着程序代码越写越多，在一个文件里代码就会越来越长，越来越不容易维护。</p>
<p>为了编写可维护的代码，我们把很多函数分组，分别放到不同的文件里，这样，每个文件包含的代码就相对较少，很多编程语言都采用这种组织代码的方式。在 Node.js 环境中，一个 <code>.js</code> 文件就称之为一个模块(module)。</p>
<p>使用模块有什么好处?</p>
<p>最大的好处是大大提高了代码的可维护性。其次，编写代码不必从零开始。当一个模块编写完毕，就可以被其他地方引用。我们在编写程序的时候，也经常引用其他模块，包括 Node.js 内置的模块和来自第三方的模块。</p>
<p>使用模块还可以避免函数名和变量名冲突。相同名字的函数和变量完全可以分别存在不同的模块中，因此，我们自己在编写模块时，不必考虑名字会与其他模块冲突。</p>

<p>在上一节，我们编写了一个 hello.js 文件，这个 hello.js 文件就是一个模块，模块的名字就是文件名(去掉.js 后缀)，所以 hello.js 文件就是名为 hello 的模块。</p>
<p>我们把 hello.js 改造一下，创建一个函数，这样我们就可以在其他地方调用这个函数:</p>
<div><pre><code><span>"use strict"</span><span>;</span>

<span>const</span> s <span>=</span> <span>"Hello"</span><span>;</span>

<span>function</span> <span>greet</span><span>(</span><span>name</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span>s <span>+</span> <span>", "</span> <span>+</span> name <span>+</span> <span>"!"</span><span>)</span><span>;</span>
<span>}</span>

module<span>.</span>exports <span>=</span> greet<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>函数 <code>greet()</code> 是我们在 hello 模块中定义的，您可能注意到最后一行是一个奇怪的赋值语句，它的意思是，把函数 <code>greet</code> 作为模块的输出暴露出去，这样其他模块就可以使用 <code>greet</code> 函数了。</p>
<p>问题是其他模块怎么使用 hello 模块的这个 <code>greet</code> 函数呢? 我们再编写一个 <code>main.js</code> 文件，调用 <code>hello</code> 模块的 <code>greet</code> 函数:</p>
<div><pre><code><span>"use strict"</span><span>;</span>

<span>// 引入hello模块:</span>
<span>const</span> greet <span>=</span> <span>require</span><span>(</span><span>"./hello"</span><span>)</span><span>;</span>

<span>const</span> s <span>=</span> <span>"Michael"</span><span>;</span>

<span>greet</span><span>(</span>s<span>)</span><span>;</span> <span>// Hello, Michael!</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>注意到引入 <code>hello</code> 模块用 Node.js 提供的 <code>require</code> 函数:</p>
<div><pre><code><span>const</span> greet <span>=</span> <span>require</span><span>(</span><span>"./hello"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>引入的模块作为变量保存在 <code>greet</code> 变量中，那 greet 变量到底是什么东西? 其实变量 <code>greet</code> 就是在 <code>hello.js</code> 中我们用 <code>module.exports = greet;</code> 输出的 <code>greet</code> 函数。所以，<code>main.js</code> 就成功地引用了 <code>hello.js</code> 模块中定义的 <code>greet()</code> 函数，接下来就可以直接使用它了。</p>
<p>在使用 <code>require()</code> 引入模块的时候，请注意模块的相对路径。因为 main.js 和 hello.js 位于同一个目录，所以我们用了当前目录.:</p>
<div><pre><code><span>const</span> greet <span>=</span> <span>require</span><span>(</span><span>"./hello"</span><span>)</span><span>;</span> <span>// 不要忘了写相对目录!</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>如果只写模块名:</p>
<div><pre><code><span>const</span> greet <span>=</span> <span>require</span><span>(</span><span>"hello"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>则 Node.js 会依次在内置模块、全局模块和当前模块下查找 hello.js，您很可能会得到一个错误:</p>
<div><pre><code>module<span>.</span>js
    <span>throw</span> err<span>;</span>
          <span>^</span>
<span>Error</span><span>:</span> Cannot find module <span>'hello'</span>
    at Function<span>.</span>Module<span>.</span>_resolveFilename
    at Function<span>.</span>Module<span>.</span>_load
    <span>...</span>
    at Function<span>.</span>Module<span>.</span>_load
    at Function<span>.</span>Module<span>.</span>runMain
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>遇到这个错误，您要检查:</p>
<ul>
<li>模块名是否写对了；</li>
<li>模块文件是否存在；</li>
<li>相对路径是否写对了。</li>
</ul>
<h2 id="commonjs-规范" tabindex="-1"> CommonJS 规范</h2>
<p>这种模块加载机制被称为 <code>CommonJS</code> 规范。在这个规范下，每个 <code>.js</code> 文件都是一个模块，它们内部各自使用的变量名和函数名都互不冲突，例如，<code>hello.js</code> 和 <code>main.js</code> 都申明了全局变量 <code>const s = 'xxx'</code>，但互不影响。</p>
<p>一个模块想要对外暴露变量(函数也是变量)，可以用 <code>module.exports = variable;</code>，一个模块要引用其他模块暴露的变量，用 <code>const ref = require('module_name');</code> 就拿到了引用模块的变量。</p>
<h2 id="总结" tabindex="-1"> 总结</h2>
<p>要在模块中对外输出变量，用:</p>
<div><pre><code>module<span>.</span>exports <span>=</span> variable<span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>输出的变量可以是任意对象、函数、数组等等。</p>
<p>要引入其他模块输出的对象，用:</p>
<div><pre><code><span>const</span> foo <span>=</span> <span>require</span><span>(</span><span>"other_module"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>引入的对象具体是什么，取决于引入模块输出的对象。</p>
<h2 id="深入了解模块原理" tabindex="-1"> 深入了解模块原理</h2>
<p>如果您想详细地了解<strong>CommonJS</strong>的模块实现原理，请继续往下阅读。如果不想了解，请结束阅读。</p>
<p>当我们编写 JavaScript 代码时，我们可以申明全局变量:</p>
<div><pre><code><span>const</span> s <span>=</span> <span>"global"</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>在浏览器中，大量使用全局变量可不好。如果您在 <code>a.js</code> 中使用了全局变量 s，那么，在 <code>b.js</code> 中也使用全局变量 s，将造成冲突，<code>b.js</code> 中对 s 赋值会改变 <code>a.js</code> 的运行逻辑。</p>
<p>也就是说，JavaScript 语言本身并没有一种模块机制来保证不同模块可以使用相同的变量名。</p>
<p>那 Node.js 是如何实现这一点的?</p>
<p>其实要实现“模块”这个功能，并不需要语法层面的支持。Node.js 也并不会增加任何 JavaScript 语法。实现“模块”功能的奥妙就在于 JavaScript 是一种函数式编程语言，它支持闭包。如果我们把一段 JavaScript 代码用一个函数包装起来，这段代码的所有“全局”变量就变成了函数内部的局部变量。</p>
<p>请注意我们编写的 <code>hello.js</code> 代码是这样的:</p>
<div><pre><code><span>const</span> s <span>=</span> <span>"Hello"</span><span>;</span>
<span>const</span> name <span>=</span> <span>"world"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>s <span>+</span> <span>" "</span> <span>+</span> name <span>+</span> <span>"!"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><p>Node.js 加载了 hello.js 后，它可以把代码包装一下，变成这样执行:</p>
<div><pre><code><span>(</span><span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>// 读取的hello.js代码:</span>
  <span>const</span> s <span>=</span> <span>"Hello"</span><span>;</span>
  <span>const</span> name <span>=</span> <span>"world"</span><span>;</span>

  console<span>.</span><span>log</span><span>(</span>s <span>+</span> <span>" "</span> <span>+</span> name <span>+</span> <span>"!"</span><span>)</span><span>;</span>
  <span>// hello.js代码结束</span>
<span>}</span><span>)</span><span>(</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>这样一来，原来的全局变量 <code>s</code> 现在变成了匿名函数内部的局部变量。如果 Node.js 继续加载其他模块，这些模块中定义的“全局”变量 <code>s</code> 也互不干扰。</p>
<p>所以，Node.js 利用 JavaScript 的函数式编程的特性，轻而易举地实现了模块的隔离。</p>
<p>但是，模块的输出 <code>module.exports</code> 怎么实现?</p>
<p>这个也很容易实现，Node.js 可以先准备一个对象 <code>module</code>:</p>
<div><pre><code><span>// 准备module对象:</span>
<span>const</span> module <span>=</span> <span>{</span>
  <span>id</span><span>:</span> <span>"hello"</span><span>,</span>
  <span>exports</span><span>:</span> <span>{</span><span>}</span><span>,</span>
<span>}</span><span>;</span>
<span>const</span> <span>load</span> <span>=</span> <span>function</span> <span>(</span><span>module</span><span>)</span> <span>{</span>
  <span>// 读取的hello.js代码:</span>
  <span>function</span> <span>greet</span><span>(</span><span>name</span><span>)</span> <span>{</span>
    console<span>.</span><span>log</span><span>(</span><span>"Hello, "</span> <span>+</span> name <span>+</span> <span>"!"</span><span>)</span><span>;</span>
  <span>}</span>

  module<span>.</span>exports <span>=</span> greet<span>;</span>
  <span>// hello.js代码结束</span>
  <span>return</span> module<span>.</span>exports<span>;</span>
<span>}</span><span>;</span>
<span>const</span> exported <span>=</span> <span>load</span><span>(</span>module<span>)</span><span>;</span>
<span>// 保存module:</span>
<span>save</span><span>(</span>module<span>,</span> exported<span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>可见，变量 module 是 Node.js 在加载 js 文件前准备的一个变量，并将其传入加载函数，我们在 <code>hello.js</code> 中可以直接使用变量 <code>module</code> 原因就在于它实际上是函数的一个参数:</p>
<div><pre><code>module<span>.</span>exports <span>=</span> greet<span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>通过把参数 <code>module</code> 传递给 <code>load()</code> 函数，<code>hello.js</code> 就顺利地把一个变量传递给了 Node.js 执行环境，Node.js 会把 module 变量保存到某个地方。</p>
<p>由于 Node.js 保存了所有导入的 module，当我们用 <code>require()</code> 获取 module 时，Node.js 找到对应的 module，把这个 module 的 <code>exports</code> 变量返回，这样，另一个模块就顺利拿到了模块的输出:</p>
<div><pre><code><span>const</span> greet <span>=</span> <span>require</span><span>(</span><span>"./hello"</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>以上是 Node.js 实现 JavaScript 模块的一个简单的原理介绍。</p>
<h2 id="module-exports-vs-exports" tabindex="-1"> module.exports vs exports</h2>
<p>很多时候，您会看到，在 Node.js 环境中，有两种方法可以在一个模块中输出变量:</p>
<p>方法一: 对 module.exports 赋值:</p>
<div><pre><code><span>// hello.js</span>

<span>function</span> <span>hello</span><span>(</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"Hello, world!"</span><span>)</span><span>;</span>
<span>}</span>

<span>function</span> <span>greet</span><span>(</span><span>name</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"Hello, "</span> <span>+</span> name <span>+</span> <span>"!"</span><span>)</span><span>;</span>
<span>}</span>

module<span>.</span>exports <span>=</span> <span>{</span>
  <span>hello</span><span>:</span> hello<span>,</span>
  <span>greet</span><span>:</span> greet<span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>方法二: 直接使用 exports:</p>
<div><pre><code><span>// hello.js</span>

<span>function</span> <span>hello</span><span>(</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"Hello, world!"</span><span>)</span><span>;</span>
<span>}</span>

<span>function</span> <span>greet</span><span>(</span><span>name</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"Hello, "</span> <span>+</span> name <span>+</span> <span>"!"</span><span>)</span><span>;</span>
<span>}</span>

<span>function</span> <span>hello</span><span>(</span><span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span><span>"Hello, world!"</span><span>)</span><span>;</span>
<span>}</span>

exports<span>.</span>hello <span>=</span> hello<span>;</span>
exports<span>.</span>greet <span>=</span> greet<span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>但是您不可以直接对 exports 赋值:</p>
<div><pre><code><span>// 代码可以执行，但是模块并没有输出任何变量:</span>
exports <span>=</span> <span>{</span>
  <span>hello</span><span>:</span> hello<span>,</span>
  <span>greet</span><span>:</span> greet<span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p>如果您对上面的写法感到十分困惑，不要着急，我们来分析 Node.js 的加载机制:</p>
<p>首先，Node.js 会把整个待加载的 hello.js 文件放入一个包装函数 load 中执行。在执行这个 load()函数前，Node.js 准备好了 module 变量:</p>
<div><pre><code><span>const</span> module <span>=</span> <span>{</span>
  <span>id</span><span>:</span> <span>"hello"</span><span>,</span>
  <span>exports</span><span>:</span> <span>{</span><span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><p><code>load()</code> 函数最终返回 <code>module.exports</code>:</p>
<div><pre><code><span>const</span> <span>load</span> <span>=</span> <span>function</span> <span>(</span><span>exports<span>,</span> module</span><span>)</span> <span>{</span>
    <span>// hello.js的文件内容</span>
    <span>...</span>
    <span>// load函数返回:</span>
    <span>return</span> module<span>.</span>exports<span>;</span>
<span>}</span><span>;</span>

<span>const</span> exported <span>=</span> <span>load</span><span>(</span>module<span>.</span>exports<span>,</span> module<span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>也就是说，默认情况下，Node.js 准备的 <code>exports</code> 变量和 <code>module.exports</code> 变量实际上是同一个变量，并且初始化为空对象 <code>{}</code>，于是，我们可以写:</p>
<div><pre><code>exports<span>.</span><span>foo</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>"foo"</span><span>;</span>
<span>}</span><span>;</span>
exports<span>.</span><span>bar</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>"bar"</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>也可以写:</p>
<div><pre><code>module<span>.</span>exports<span>.</span><span>foo</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>"foo"</span><span>;</span>
<span>}</span><span>;</span>
module<span>.</span>exports<span>.</span><span>bar</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>"bar"</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>换句话说，Node.js 默认给您准备了一个空对象 <code>{}</code>，这样您可以直接往里面加东西。</p>
<p>但是，如果我们要输出的是一个函数或数组，那么，只能给 <code>module.exports</code> 赋值:</p>
<div><pre><code>module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>"foo"</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>给 <code>exports</code> 赋值是无效的，因为赋值后，<code>module.exports</code> 仍然是空对象 <code>{}</code>。</p>
<h2 id="结论" tabindex="-1"> 结论</h2>
<p>如果要输出一个键值对象 <code>{}</code>，可以利用 <code>exports</code> 这个已存在的空对象 <code>{}</code>，并继续在上面添加新的键值；</p>
<p>如果要输出一个函数或数组，必须直接对 <code>module.exports</code> 对象赋值。</p>
<p>所以我们可以得出结论: 直接对 <code>module.export</code>s 赋值，可以应对任何情况:</p>
<div><pre><code>module<span>.</span>exports <span>=</span> <span>{</span>
  <span>foo</span><span>:</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>"foo"</span><span>;</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p>或者:</p>
<div><pre><code>module<span>.</span><span>exports</span> <span>=</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>"foo"</span><span>;</span>
<span>}</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>最终，我们强烈建议使用 <code>module.exports = xxx</code> 的方式来输出模块变量，这样，您只需要记忆一种方法。</p>
]]></content>
    <category term="Node.js" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">搭建 Node 开发环境</title>
    <id>https://github.com/MisterChen9527/code/node-js/environment.html</id>
    <link href="https://github.com/MisterChen9527/code/node-js/environment.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>由于 Node.js 需要编码、运行、调试，我们需要一个 IDE 集成开发环境，这样就可以大大提升开发效率。综合考察后，Mr.Chen 隆重向大家推荐 Node.js 集成开发环境: <strong>Visual Studio Code</strong>。它启动速度快，执行简单，调试方便这三点上。当然，免费使用是一个加分项。</p>
]]></summary>
    <content type="html"><![CDATA[<p>由于 Node.js 需要编码、运行、调试，我们需要一个 IDE 集成开发环境，这样就可以大大提升开发效率。综合考察后，Mr.Chen 隆重向大家推荐 Node.js 集成开发环境: <strong>Visual Studio Code</strong>。它启动速度快，执行简单，调试方便这三点上。当然，免费使用是一个加分项。</p>

<div><p>相关信息</p>
<p>有关 VS Code 使用教程请<a href="/software/vscode/">访问这里</a></p>
</div>
<h2 id="运行和调试-javascript" tabindex="-1"> 运行和调试 JavaScript</h2>
<p>在 VS Code 中，我们可以非常方便地运行 JavaScript 文件。</p>
<p>VS Code 以文件夹作为工程目录 (Workspace Dir)，所有的 JavaScript 文件都存放在该目录下。此外，VS Code 在工程目录下还需要一个 <code>.vscode</code> 的配置目录，里面存放里 VS Code 需要的配置文件。</p>
<p>假设我们在 <code>C:\Work\</code> 目录下创建了一个 hello 目录作为工程目录，并编写了一个 <code>hello.js</code> 文件，则该工程目录的结构如下:</p>
<div><pre><code>hello/ &lt;-- workspace dir
|
├─ hello.js &lt;-- JavaScript file
|
└─ .vscode/ &lt;-- VS Code config
      |
      └ launch.json &lt;-- VS Code config file for JavaScript
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>可以用 VS Code 快速创建 <code>launch.json</code>，然后修改如下:</p>
<div><pre><code><span>{</span>
  <span>"version"</span><span>:</span> <span>"0.2.0"</span><span>,</span>
  <span>"configurations"</span><span>:</span> <span>[</span>
    <span>{</span>
      <span>"name"</span><span>:</span> <span>"Run hello.js"</span><span>,</span>
      <span>"type"</span><span>:</span> <span>"node"</span><span>,</span>
      <span>"request"</span><span>:</span> <span>"launch"</span><span>,</span>
      <span>"program"</span><span>:</span> <span>"${workspaceRoot}/hello.js"</span><span>,</span>
      <span>"stopOnEntry"</span><span>:</span> <span>false</span><span>,</span>
      <span>"args"</span><span>:</span> <span>[</span><span>]</span><span>,</span>
      <span>"cwd"</span><span>:</span> <span>"${workspaceRoot}"</span><span>,</span>
      <span>"preLaunchTask"</span><span>:</span> <span>null</span><span>,</span>
      <span>"runtimeExecutable"</span><span>:</span> <span>null</span><span>,</span>
      <span>"runtimeArgs"</span><span>:</span> <span>[</span><span>"--nolazy"</span><span>]</span><span>,</span>
      <span>"env"</span><span>:</span> <span>{</span>
        <span>"NODE_ENV"</span><span>:</span> <span>"development"</span>
      <span>}</span><span>,</span>
      <span>"externalConsole"</span><span>:</span> <span>false</span><span>,</span>
      <span>"sourceMaps"</span><span>:</span> <span>false</span><span>,</span>
      <span>"outDir"</span><span>:</span> <span>null</span>
    <span>}</span>
  <span>]</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>有了配置文件，即可使用 VS Code 调试 JavaScript。</p>
<h2 id="视频演示" tabindex="-1"> 视频演示</h2>
<ul>
<li><a href="https://www.bilibili.com/video/av5827351/" target="_blank" rel="noopener noreferrer">视频演示</a></li>
</ul>
]]></content>
    <category term="Node.js" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">安装 Node.js</title>
    <id>https://github.com/MisterChen9527/code/node-js/install.html</id>
    <link href="https://github.com/MisterChen9527/code/node-js/install.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>由于 Node.js 平台是在后端运行 JavaScript 代码，所以，必须首先在本机安装 Node.js 环境。</p>
]]></summary>
    <content type="html"><![CDATA[<p>由于 Node.js 平台是在后端运行 JavaScript 代码，所以，必须首先在本机安装 Node.js 环境。</p>

<h2 id="安装-node-js" tabindex="-1"> 安装 Node.js</h2>
<p>目前 Node.js 的 LTS 版本是 16.15.1。首先，从 Node.js 官网下载对应平台的安装程序。点击 LTS 版本的下载按钮。</p>
<ul>
<li><a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">Node.js 官网</a></li>
</ul>
<h3 id="安装过程" tabindex="-1"> 安装过程</h3>
<ul>
<li>
<p>在 Windows 上安装时务必选择全部组件，包括勾选 <code>Add to Path</code>。</p>
<p>在安装过程中，无需勾选 &quot;Automatically install the necessary tools&quot;。选中此项会在电脑中安装 VS 等日常开发使用不到的软件。</p>
<p>安装完成后，在 Windows 环境下，请打开命令提示符，然后输入 <code>node -v</code> ，如果安装正常，您应该看到 <code>v16.15.1</code> 这样的输出:</p>
<div><pre><code>C:<span>\</span>Users<span>\</span>IEUser<span>></span>node -v
v16.15.1
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>继续在命令提示符输入 node，此刻您将进入 Node.js 的交互环境。在交互环境下，您可以输入任意 JavaScript 语句，例如 <code>100 + 200</code>，回车后将得到输出结果。</p>
<p>要退出 Node.js 环境，连按两次 <code>Ctrl + C</code> 。</p>
</li>
<li>
<p>在 Mac 或 Linux 环境下，请打开终端，然后输入 <code>node -v</code>，您应该看到如下输出:</p>
<div><pre><code>$ <span>node</span> -v
v16.15.1
</code></pre><div aria-hidden="true"><div></div><div></div></div></div></li>
</ul>
<h2 id="npm" tabindex="-1"> npm</h2>
<p>npm 是 Node.js 的包管理工具(package manager)。</p>
<p>我们在 Node.js 上开发时，会用到很多别人写的 JavaScript 代码。如果我们要使用别人写的某个包，每次都根据名称搜索一下官方网站，下载代码，解压，再使用，非常繁琐。于是一个集中管理的工具应运而生: 大家都把自己开发的模块打包后放到 npm 官网上，如果要使用，直接通过 npm 安装就可以直接用，不用管代码存在哪，应该从哪下载。</p>
<p>更重要的是，如果我们要使用模块 A，而模块 A 又依赖于模块 B，模块 B 又依赖于模块 X 和模块 Y，npm 可以根据依赖关系，把所有依赖的包都下载下来并管理起来。否则，靠我们自己手动管理，肯定既麻烦又容易出错。</p>
<p>讲了这么多，npm 究竟在哪?</p>
<p>其实 npm 已经在 Node.js 安装的时候顺带装好了。我们在命令提示符或者终端输入 <code>npm -v</code>，应该看到类似的输出:</p>
<div><pre><code>C:<span>\</span><span>></span>npm -v
<span>8.12</span>.1
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><blockquote>
<p>如果版本号太小，说明 npm 版本较低，请使用此命令升级到最新版本: <code>npm i -g npm</code>。</p>
</blockquote>
<p>如果直接输入 <code>npm</code>，您会看到类似下面的输出:</p>
<div><pre><code>C:<span>\</span><span>></span> <span>npm</span>
<span>npm</span> <span>&lt;</span>command<span>></span>

Usage:

<span>npm</span> <span>install</span>        <span>install</span> all the dependencies <span>in</span> your project
<span>npm</span> <span>install</span> <span>&lt;</span>foo<span>></span>  <span>add</span> the <span>&lt;</span>foo<span>></span> dependency to your project
    <span>..</span>.
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>上面的一大堆文字告诉您，npm 需要附带命令。现在我们不用关心这些命令，后面会一一讲到。目前，您只需要确保 npm 正确安装了，能运行就行。</p>
<h2 id="国内镜像站" tabindex="-1"> 国内镜像站</h2>
<p>大家都知道天朝是有墙的，有的时候，访问国外的 Node.js 服务器可能会十分缓慢以至于您想把它砸了。</p>
<p>所以贴心的马云爸爸提供了淘宝镜像源。你可以将 npm 的源配置为国内镜像源，以在每次安装依赖的时候从国内镜像站拉取镜像。这可以极大的提升安装速度。</p>
<div><p>注</p>
<p>如果官方源的速度还可以的话请尽可能使用官方源。</p>
<p>国内源毕竟是镜像站点，同步官方源的包会出现延迟，所以有时候你可能会遇到 <code>version xxx not found</code> 之类的错误，这是因为所需要的版本还没来得及被镜像站点同步所导致。</p>
<p>你可以通过访问 <code>npmmirror.com/sync/&lt;包名&gt;</code> 来手动同步一个包。</p>
</div>
<p>设置及国内源的命令如下:</p>
<div><pre><code><span>npm</span> config <span>set</span> registry https://registry.npmmirror.com/
</code></pre><div aria-hidden="true"><div></div></div></div><div><p>注意</p>
<p><code>https://registry.npm.taobao.org/</code> 是老的淘宝源地址，现已停止维护，请不要使用!!!</p>
</div>
<h2 id="启用-corepack" tabindex="-1"> 启用 Corepack</h2>
<p>Node.js 自带的包管理工具 npm 并不是那么的强大，其安装速度也很慢，所以社区开发了一些其他的包管理工具如 <code>yarn</code> 和 <code>pnpm</code>，它们有自己的优势。</p>
<p>Mr.Chen 推荐使用 pnpm 进行包管理，因为它使用硬链接索引包文件，安装速度更快而且节省磁盘空间。</p>
<p>从 v16 开始，Node.js 引入了 Corepack 工具，并在 package.json 支持了 <code>packageManager</code> 选项以支持第三方管理工具。</p>
<p>你需要通过下方命令启用 Corepack:</p>
<div><pre><code>corepack <span>enable</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>这样每个项目会自动应用根目录 package.json 中的 <code>packageManager</code> 选项。比如设置 <code>&quot;packageManager&quot;: &quot;pnpm@7.2.1&quot;</code> 的时候，会自动下载并使用 <code>pnpm@7.2.1</code>。</p>
<div><p>设置全局的 packageManager</p>
<p>你可以使用 <code>corepack prepare packageManager@semver</code> 来全局准备一个 packageManager 版本，并使用 <code>--activate</code> 选新娘 全局激活。</p>
<p>比如以下命令下载 <code>pnpm@7.2.1</code> 并将其作为默认的全局包管理器:</p>
<div><pre><code>corepack prepare pnpm@7.2.1 --activate
</code></pre><div aria-hidden="true"><div></div></div></div></div>
<h2 id="小结" tabindex="-1"> 小结</h2>
<p>请在本机安装 Node.js 环境，并确保 Node.js 和 npm 能正常运行。</p>
]]></content>
    <category term="Node.js" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Node.js</title>
    <id>https://github.com/MisterChen9527/code/node-js/intro.html</id>
    <link href="https://github.com/MisterChen9527/code/node-js/intro.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>从本章开始，我们就正式开启 JavaScript 的后端开发之旅。</p>
<p>Node.js 是目前非常火热的技术，但是它的诞生经历却很奇特。</p>
]]></summary>
    <content type="html"><![CDATA[<p>从本章开始，我们就正式开启 JavaScript 的后端开发之旅。</p>
<p>Node.js 是目前非常火热的技术，但是它的诞生经历却很奇特。</p>

<p>众所周知，在 Netscape 设计出 JavaScript 后的短短几个月，JavaScript 事实上已经是前端开发的唯一标准。</p>
<p>后来，微软通过 IE 击败了 Netscape 后一统桌面，结果几年时间，浏览器毫无进步。(2001 年推出的古老的 IE 6 到今天仍然有人在使用! )</p>
<p>没有竞争就没有发展。微软认为 IE6 浏览器已经非常完善，几乎没有可改进之处，然后解散了 IE6 开发团队! 而 Google 却认为支持现代 Web 应用的新一代浏览器才刚刚起步，尤其是浏览器负责运行 JavaScript 的引擎性能还可提升 10 倍。</p>
<p>先是 Mozilla 借助已壮烈牺牲的 Netscape 遗产在 2002 年推出了 Firefox 浏览器，紧接着 Apple 于 2003 年在开源的 KHTML 浏览器的基础上推出了 WebKit 内核的 Safari 浏览器，不过仅限于 Mac 平台。</p>
<p>随后，Google 也开始创建自家的浏览器。他们也看中了 WebKit 内核，于是基于 WebKit 内核推出了 Chrome 浏览器。</p>
<p>Chrome 浏览器是跨 Windows 和 Mac 平台的，并且，Google 认为要运行现代 Web 应用，浏览器必须有一个性能非常强劲的 JavaScript 引擎，于是 Google 自己开发了一个高性能 JavaScript 引擎，名字叫 V8，以 BSD 许可证开源。</p>
<p>现代浏览器大战让微软的 IE 浏览器远远地落后了，因为他们解散了最有经验、战斗力最强的浏览器团队! 回过头再追赶却发现，支持 HTML5 的 WebKit 已经成为手机端的标准了，IE 浏览器从此与主流移动端设备绝缘。</p>
<h2 id="浏览器大战和-node-js-的关系" tabindex="-1"> 浏览器大战和 Node.js 的关系</h2>
<p>话说有个叫 Ryan Dahl 的歪果仁，他的工作是用 C/C++写高性能 Web 服务。对于高性能，异步 IO、事件驱动是基本原则，但是用 C/C++写就太痛苦了。于是这位仁兄开始设想用高级语言开发 Web 服务。他评估了很多种高级语言，发现很多语言虽然同时提供了同步 IO 和异步 IO，但是开发人员一旦用了同步 IO，他们就再也懒得写异步 IO 了，所以，最终，Ryan 瞄向了 JavaScript。</p>
<p>因为 JavaScript 是单线程执行，根本不能进行同步 IO 操作，所以，JavaScript 的这一“缺陷”导致了它只能使用异步 IO。</p>
<p>选定了开发语言，还要有运行时引擎。这位仁兄曾考虑过自己写一个，不过明智地放弃了，因为 V8 就是开源的 JavaScript 引擎。让 Google 投资去优化 V8，咱只负责改造一下拿来用，还不用付钱，这个买卖很划算。</p>
<p>于是在 2009 年，Ryan 正式推出了基于 JavaScript 语言和 V8 引擎的开源 Web 服务器项目，命名为 Node.js。虽然名字很土，但是，Node.js 第一次把 JavaScript 带入到后端服务器开发，加上世界上已经有无数的 JavaScript 开发人员，所以 Node.js 一下子就火了起来。</p>
<h2 id="在-node-js-上运行的-javascript-相比其他后端开发语言的优势" tabindex="-1"> 在 Node.js 上运行的 JavaScript 相比其他后端开发语言的优势</h2>
<p>最大的优势是借助 JavaScript 天生的事件驱动机制加 V8 高性能引擎，使编写高性能 Web 服务轻而易举。</p>
<p>其次，JavaScript 语言本身是完善的函数式语言，在前端开发时，开发人员往往写得比较随意，让人感觉 JavaScript 就是个“玩具语言”。但是，在 Node.js 环境下，通过模块化的 JavaScript 代码，加上函数式编程，并且无需考虑浏览器兼容性问题，直接使用最新的 ECMAScript 6 标准，可以完全满足工程上的需求。</p>
<blockquote>
<p>我还听说过 io.js，这又是什么鬼?</p>
</blockquote>
<p>因为 Node.js 是开源项目，虽然由社区推动，但幕后一直由 Joyent 公司资助。由于一群开发者对 Joyent 公司的策略不满，于 2014 年从 Node.js 项目 fork 出了 io.js 项目，决定单独发展，但两者实际上是兼容的。</p>
<p>然而中国有句古话，叫做“分久必合，合久必分”。分家后没多久，Joyent 公司表示要和解，于是，io.js 项目又决定回归 Node.js。</p>
<p>具体做法是将来 io.js 将首先添加新的特性，如果大家测试用得爽，就把新特性加入 Node.js。Io.js 是“尝鲜版”，而 Node.js 是线上稳定版，相当于 Fedora Linux 和 RHEL 的关系。</p>
<p>本章教程的所有代码都在 Node.js 上调试通过。如果您要尝试 io.js 也是可以的，不过两者如果遇到一些区别请自行查看 io.js 的文档。</p>
<h2 id="node-js-相关链接" tabindex="-1"> Node.js 相关链接</h2>
<ul>
<li>
<p><a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">Node.js 官网</a></p>
</li>
<li>
<p><a href="https://nodejs.org/zh-cn/docs/" target="_blank" rel="noopener noreferrer">Node.js 最新文档</a></p>
</li>
<li>
<p><a href="https://nodejs.org/dist/latest-v16.x/docs/api/" target="_blank" rel="noopener noreferrer">Node.js 最新 API 文档</a></p>
</li>
</ul>
]]></content>
    <category term="Node.js" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">第一个 Node 程序</title>
    <id>https://github.com/MisterChen9527/code/node-js/program.html</id>
    <link href="https://github.com/MisterChen9527/code/node-js/program.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>在前面的所有章节中，我们编写的 JavaScript 代码都是在浏览器中运行的，因此，我们可以直接在浏览器中敲代码，然后直接运行。</p>
<p>从本章开始，我们编写的 JavaScript 代码将不能在浏览器环境中执行了，而是在 Node.js 环境中执行，因此，JavaScript 代码将直接在您的计算机上以命令行的方式运行，所以，我们要先选择一个文本编辑器来编写 JavaScript 代码，并且把它保存到本地硬盘的某个目录，才能够执行。</p>
]]></summary>
    <content type="html"><![CDATA[<p>在前面的所有章节中，我们编写的 JavaScript 代码都是在浏览器中运行的，因此，我们可以直接在浏览器中敲代码，然后直接运行。</p>
<p>从本章开始，我们编写的 JavaScript 代码将不能在浏览器环境中执行了，而是在 Node.js 环境中执行，因此，JavaScript 代码将直接在您的计算机上以命令行的方式运行，所以，我们要先选择一个文本编辑器来编写 JavaScript 代码，并且把它保存到本地硬盘的某个目录，才能够执行。</p>

<p>那么问题来了: 文本编辑器到底哪家强?</p>
<div><p>注意</p>
<p>千万不要使用 Windows 自带的记事本编辑任何文本文件。</p>
<ul>
<li>具体详情请见 <a href="/code/windows/notepad.html">记事本遗留问题</a></li>
</ul>
</div>
<p>如果您的电脑上已经安装了<strong>Sublime Text</strong>，或者<strong>Notepad++</strong>，也可以用来编写 JavaScript 代码，注意用 UTF-8 格式保存。</p>
<p>最方便的，当然是 Mr.Chen 强力安利的 VS Code 了。</p>
<p>输入以下代码:</p>
<div><pre><code><span>"use strict"</span><span>;</span>

console<span>.</span><span>log</span><span>(</span><span>"Hello, world."</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>第一行总是写上 <code>'use strict';</code> 是因为我们总是以严格模式运行 JavaScript 代码，避免各种潜在陷阱。</p>
<p>然后，选择一个目录，例如 <code>C:\Workspace</code>，把文件保存为 <code>hello.js</code>，就可以打开命令行窗口，把当前目录切换到 hello.js 所在目录，然后输入以下命令运行这个程序了:</p>
<div><pre><code>C:<span>\</span>Workspace<span>></span>node hello.js
Hello, world.
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>也可以保存为别的名字，比如 <code>first.js</code>，但是必须要以 <code>.js</code> 结尾。此外，文件名只能是英文字母、数字和下划线的组合。</p>
<p>如果当前目录下没有 <code>hello.js</code> 这个文件，运行 <code>node hello.js</code> 就会报错:</p>
<div><pre><code>C:<span>\</span>Workspace<span>></span>node hello.js
module.js:338
    throw err<span>;</span>
          ^
Error: Cannot <span>find</span> module <span>'C:\Workspace\hello.js'</span>
    at Function.Module._resolveFilename
    at Function.Module._load
    at Function.Module.runMain
    at startup
    at node.js
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>报错的意思就是，没有找到 <code>hello.js</code> 这个文件，因为文件不存在。这个时候，就要检查一下当前目录下是否有这个文件了。</p>
<h2 id="命令行模式和-node-js-交互模式" tabindex="-1"> 命令行模式和 Node.js 交互模式</h2>
<p>请注意区分命令行模式和 Node.js 交互模式。</p>
<p>看到类似 <code>C:\&gt;</code> 是在 Windows 提供的命令行模式:</p>
<p><img src="@source/code/node-js/assets/run-node-hello.png" alt="run-node-hello"></p>
<p>在命令行模式下，可以执行 Node.js 进入 Node.js 交互式环境，也可以执行 Node.js <code>hello.js</code> 运行一个 <code>.js</code> 文件。</p>
<p>看到<code>&gt;</code> 是在 Node.js 交互式环境下:</p>
<p><img src="@source/code/node-js/assets/node-interactive-env.png" alt="node-interactive-env"></p>
<p>在 Node.js 交互式环境下，我们可以输入 JavaScript 代码并立刻执行。</p>
<p>此外，在命令行模式运行.js 文件和在 Node.js 交互式环境下直接运行 JavaScript 代码有所不同。Node.js 交互式环境会把每一行 JavaScript 代码的结果自动打印出来，但是，直接运行 JavaScript 文件却不会。</p>
<p>例如，在 Node.js 交互式环境下，输入:</p>
<div><pre><code><span>></span> <span>100</span> + <span>200</span> + <span>300</span><span>;</span>
<span>600</span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>直接可以看到结果 600。</p>
<p>但是，写一个 <code>calc.js</code> 的文件，内容如下:</p>
<div><pre><code><span>100</span> <span>+</span> <span>200</span> <span>+</span> <span>300</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>然后在命令行模式下执行:</p>
<div><pre><code>C:<span>\</span>Workspace<span>></span>node calc.js
</code></pre><div aria-hidden="true"><div></div></div></div><p>发现什么输出都没有。</p>
<p>这是正常的。想要输出结果，必须自己用 <code>console.log()</code> 打印出来。把 <code>calc.js</code> 改造一下:</p>
<div><pre><code>console<span>.</span><span>log</span><span>(</span><span>100</span> <span>+</span> <span>200</span> <span>+</span> <span>300</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>再执行，就可以看到结果:</p>
<div><pre><code>C:<span>\</span>Workspace<span>></span>node calc.js
<span>600</span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><h2 id="使用严格模式" tabindex="-1"> 使用严格模式</h2>
<p>如果在 JavaScript 文件开头写上 <code>'use strict';</code>，那么 Node.js 在执行该 JavaScript 时将使用严格模式。但是，在服务器环境下，如果有很多 JavaScript 文件，每个文件都写上 <code>'use strict';</code> 很麻烦。我们可以给 Node.js 传递一个参数，让 Node.js 直接为所有 js 文件开启严格模式:</p>
<div><pre><code><span>node</span> --use_strict calc.js
</code></pre><div aria-hidden="true"><div></div></div></div><p>后续代码，如无特殊说明，我们都会直接给 Node.js 传递 <code>--use_strict</code> 参数来开启严格模式。</p>
<h2 id="小结" tabindex="-1"> 小结</h2>
<p>用文本编辑器写 JavaScript 程序，然后保存为后缀为 <code>.js</code> 的文件，就可以用 Node.js 直接运行这个程序了。</p>
<p>Node.js 的交互模式和直接运行 <code>.js</code> 文件有什么区别呢?</p>
<p>直接输入 Node.js 进入交互模式，相当于启动了 Node.js 解释器，但是等待您一行一行地输入源代码，每输入一行就执行一行。</p>
<p>直接运行 <code>node hello.js</code> 文件相当于启动了 Node.js 解释器，然后一次性把 <code>hello.js</code> 文件的源代码给执行了，您是没有机会以交互的方式输入源代码的。</p>
<p>在编写 JavaScript 代码的时候，完全可以一边在文本编辑器里写代码，一边开一个 Node.js 交互式命令窗口，在写代码的过程中，把部分代码粘到命令行去验证，事半功倍! 前提是得有个 27 寸的超大显示器!</p>
]]></content>
    <category term="Node.js" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">React</title>
    <id>https://github.com/MisterChen9527/code/react/</id>
    <link href="https://github.com/MisterChen9527/code/react/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="创建-react-项目" tabindex="-1"> 创建 React 项目</h2>
<p>使用 <code>create-react-app</code> 工具。</p>
<p>创建普通模板:</p>
<div><pre><code>npx create-react-app xxx
</code></pre><div aria-hidden="true"><div></div></div></div><p>创建 TS 模板:</p>
<div><pre><code>npx create-react-app xxx --template typescript
</code></pre><div aria-hidden="true"><div></div></div></div><h2 id="react-文档" tabindex="-1"> React 文档</h2>
<ul>
<li><a href="https://reactjs.org/docs/getting-started.html" target="_blank" rel="noopener noreferrer">官方文档</a></li>
<li><a href="https://react.docschina.org/docs/getting-started.html" target="_blank" rel="noopener noreferrer">中文文档</a></li>
</ul>
]]></content>
    <category term="前端" scheme=""/>
    <published>2020-05-08T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Vue.js</title>
    <id>https://github.com/MisterChen9527/code/vue/</id>
    <link href="https://github.com/MisterChen9527/code/vue/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>Vue.js 是世界上主流的前端框架。</p>
<p>官方介绍为：渐近式 JavaScript 框架。一款用于构建 Web 界面，易学易用，性能出色且功能丰富的框架。</p>
<h2 id="vue-js-教程目录" tabindex="-1"> Vue.js 教程目录</h2>
<ul>
<li>
<p><a href="/code/vue/install.html">开发环境安装</a></p>
</li>
<li>
<p><a href="/code/vue/get-started.html">起步上手</a></p>
</li>
<li>
<p><a href="/code/vue/vue.html">Vue 单文件组件说明</a></p>
</li>
</ul>
<h2 id="vue-生态" tabindex="-1"> Vue 生态</h2>
<h3 id="vue-router" tabindex="-1"> Vue Router</h3>
<ul>
<li>
<p><a href="/code/vue/router/">Vue Router 讲解</a></p>
</li>
<li>
<p><a href="/code/vue/router/demo.html">Vue Router Demo</a></p>
</li>
</ul>
<h3 id="vuex" tabindex="-1"> Vuex</h3>
<ul>
<li>
<p><a href="/code/vue/vuex/">Vuex 讲解</a></p>
</li>
<li>
<p><a href="/code/vue/vuex/demo.html">Vuex Demo</a></p>
</li>
</ul>
<h3 id="vue-cli" tabindex="-1"> Vue Cli</h3>
<ul>
<li>
<p><a href="/code/vue/cli/intro.html">Vue Cli 介绍</a></p>
</li>
<li>
<p><a href="/code/vue/cli/quick-dev.html">使用 Vue Cli 进行快速开发</a></p>
</li>
<li>
<p><a href="/code/vue/cli/file.html">Vue Cli 文件处理</a></p>
</li>
</ul>
<h3 id="其他-vue-生态" tabindex="-1"> 其他 Vue 生态</h3>
<ul>
<li><a href="https://vuepress-theme-hope.github.io/basic/vuepress/" target="_blank" rel="noopener noreferrer">VuePress</a>: 静态站点生成器；</li>
<li><a href="https://vue.ant.design/docs/vue/introduce-cn/" target="_blank" rel="noopener noreferrer">Ant Design Vue</a>: 阿里的一套 UI 组件库；</li>
<li><a href="https://bootstrap-vue.js.org/" target="_blank" rel="noopener noreferrer">BootstrapVue</a></li>
</ul>
<h2 id="官方文档" tabindex="-1"> 官方文档</h2>
<ul>
<li>
<p><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer">Vue.js 介绍</a></p>
</li>
<li>
<p><a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener noreferrer">Vue.js API</a></p>
</li>
</ul>
<hr>
<ul>
<li>
<p><a href="https://cli.vuejs.org/zh/guide/cli-service.html" target="_blank" rel="noopener noreferrer">Vue CLI 3 介绍</a></p>
</li>
<li>
<p><a href="https://cli.vuejs.org/zh/config/" target="_blank" rel="noopener noreferrer">Vue CLI 3 配置</a></p>
</li>
</ul>
<hr>
<ul>
<li>
<p><a href="https://router.vuejs.org/zh/guide/#html" target="_blank" rel="noopener noreferrer">Vue Router 介绍</a></p>
</li>
<li>
<p><a href="https://cli.vuejs.org/zh/config/" target="_blank" rel="noopener noreferrer">Vue Router 配置</a></p>
</li>
</ul>
<hr>
<ul>
<li>
<p><a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">Vuex 介绍</a></p>
</li>
<li>
<p><a href="https://vuex.vuejs.org/zh/api/" target="_blank" rel="noopener noreferrer">Vuex 配置</a></p>
</li>
</ul>
<h2 id="其他文档" tabindex="-1"> 其他文档</h2>
<ul>
<li>
<p><a href="/code/vue/component.html">各组件使用说明</a></p>
</li>
<li>
<p><a href="/code/vue/compare.html">Vue 与小程序的异同</a></p>
</li>
<li>
<p>VueConf 视频</p>
<ul>
<li>
<p><a href="https://www.yuque.com/vueconf/2019/qg1yms" target="_blank" rel="noopener noreferrer">Vue Beyond Vue Loader</a></p>
</li>
<li>
<p><a href="https://www.yuque.com/vueconf/2019/gwn1z0" target="_blank" rel="noopener noreferrer">尤雨溪演讲视频</a></p>
</li>
</ul>
</li>
<li>
<p><a href="https://mrhope.site/file/vue/VueConf2019SH_Evan.pdf" target="_blank" rel="noopener noreferrer">尤雨溪演讲 PPT</a></p>
</li>
<li>
<p><a href="https://mrhope.site/file/vue/intro-to-vuepres-1.x.pdf" target="_blank" rel="noopener noreferrer">VuePress 介绍</a></p>
</li>
<li>
<p><a href="https://mrhope.site/file/vue/Vue%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.pdf" target="_blank" rel="noopener noreferrer">Vue 单元测试</a></p>
</li>
<li>
<p><a href="https://mrhope.site/file/vue/%E4%BD%BF%E7%94%A8Vue%E5%AE%9E%E7%8E%B00%E4%BB%A3%E7%A0%81%E4%BA%A4%E4%BA%92-winter.pdf" target="_blank" rel="noopener noreferrer">使用 Vue 实现 0 代码交互</a></p>
</li>
<li>
<p><a href="https://mrhope.site/file/vue/Vue%20%E5%BC%80%E5%8F%91%20ECharts%20%E8%B8%A9%E5%9D%91%E6%8C%87%E5%8D%97.pdf" target="_blank" rel="noopener noreferrer">Echart 与 Vue</a></p>
</li>
<li>
<p><a href="https://mrhope.site/file/vue/Vue%20Beyond%20Vue%20Loader.pdf" target="_blank" rel="noopener noreferrer">Vue Loader</a></p>
</li>
<li>
<p><a href="https://mrhope.site/file/vue/Mars%E6%A1%86%E6%9E%B6%E5%88%86%E4%BA%AB-vueconf.pdf" target="_blank" rel="noopener noreferrer">基于 Vue 的多端框架</a></p>
</li>
</ul>
]]></content>
    <category term="基础" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Vue 与小程序的异同</title>
    <id>https://github.com/MisterChen9527/code/vue/compare.html</id>
    <link href="https://github.com/MisterChen9527/code/vue/compare.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>Vue-cli 提供的 vue 单文件语法与小程序基本相似，甚至可以说小程序是改变自 Vue 与 React 框架的。</p>
]]></summary>
    <content type="html"><![CDATA[<p>Vue-cli 提供的 vue 单文件语法与小程序基本相似，甚至可以说小程序是改变自 Vue 与 React 框架的。</p>

<h2 id="优缺点比较" tabindex="-1"> 优缺点比较</h2>
<table>
<thead>
<tr>
<th></th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td>小程序</td>
<td>小程序底层由微信框架驱动，每个界面是单独的 JS 文件，页面切换以及全局生命周期丰富完善。小程序具有相当完备的 API。</td>
<td>小程序是由 JSCore 驱动逻辑层，视图层采用 Webview，故没有 DOM 节点的概念，只有渲染出的虚拟节点，所以无法动态删除或添加节点，无法使用一切 DOM 相关 API。小程序组件生命周期不够强大。小程序的 Webview 渲染存在一定的性能问题。小程序视图层与逻辑层通过 Jsbridge 连接，数据传输及渲染有延时。</td>
</tr>
<tr>
<td>vue</td>
<td>Vue 的实质是动态监测并托管 DOM 节点。由于 Vue 是网页开发，拥有 DOM 树，可以使用 DOM 相关 API。Vue 组件拥有更全面的生命周期，同时可以动态渲染组件。Vue 的组件传递数据方式默认为单向绑定</td>
<td>由于 Vue 的组件本质是监测 DOM 树，故其组件只能有一个根节点。同时 Vue 的界面路由依赖于 History API，其界面切换周期与逻辑不够强大。</td>
</tr>
</tbody>
</table>
<h2 id="代码区别" tabindex="-1"> 代码区别</h2>
<p>小程序与 Vue 在代码写法上极其相似，但稍有不同。</p>
<h3 id="数据绑定" tabindex="-1"> 数据绑定</h3>
<h4 id="小程序数据绑定" tabindex="-1"> 小程序数据绑定</h4>
<div><pre><code><span><span><span>&lt;</span>view</span> <span>class</span><span><span>=</span><span>"</span>text1 {{a}} {{b?:<span>'</span>b为真<span>'</span>:<span>'</span>b为假<span>'</span>}}<span>"</span></span><span>></span></span>{{text}}<span><span><span>&lt;/</span>view</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div></div></div><div>
<p>小程序在所有内容上都使用 Muscle 语法 (<code>{{Javascript表达式}}</code>) 的写法。</p>
</div>
<h4 id="vue-数据绑定" tabindex="-1"> Vue 数据绑定</h4>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>text1<span>"</span></span> <span>:class</span><span><span>=</span><span>"</span>a+<span>'</span> <span>'</span>+ b?:<span>'</span>b为真<span>'</span>:<span>'</span>b为假<span>'</span><span>"</span></span><span>></span></span>{{text}}<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div></div></div><div><p>提示</p>
<p>Vue 在标签名属性用 <code>v-bind:prop=&quot;Javascript表达式&quot;</code> 的写法、其简写为 <code>:prop=&quot;&quot;</code>，在标签内容处使用 Muscle 语法。</p>
</div>
<h3 id="条件渲染" tabindex="-1"> 条件渲染</h3>
<h4 id="小程序条件渲染" tabindex="-1"> 小程序条件渲染</h4>
<div><pre><code><span><span><span>&lt;</span>view</span> <span><span>wx:</span>if</span><span><span>=</span><span>"</span>{{condition1}}<span>"</span></span><span>></span></span>板块只有 condition1 为 true 时才会渲染<span><span><span>&lt;/</span>view</span><span>></span></span>


<span><span><span>&lt;</span>block</span> <span><span>wx:</span>if</span><span><span>=</span><span>"</span>{{condition2}}<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>view</span><span>></span></span>内容1<span><span><span>&lt;/</span>view</span><span>></span></span>
  <span><span><span>&lt;</span>view</span><span>></span></span>内容2<span><span><span>&lt;/</span>view</span><span>></span></span>
  <span><span><span>&lt;</span>view</span><span>></span></span>
    <span><span><span>&lt;</span>view</span><span>></span></span>内容3<span><span><span>&lt;/</span>view</span><span>></span></span>
    <span><span><span>&lt;</span>view</span><span>></span></span>内容4<span><span><span>&lt;/</span>view</span><span>></span></span>
  <span><span><span>&lt;/</span>view</span><span>></span></span>
  <span><span><span>&lt;</span>view</span><span>></span></span>
    这是一个拥有很多兄弟标签的代码块.
    虚拟标签 block 会把其当作一个整体用作条件渲染。
  <span><span><span>&lt;/</span>view</span><span>></span></span>
<span><span><span>&lt;/</span>block</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div><p>相关信息</p>
<p>更多详情请见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/conditional.html" target="_blank" rel="noopener noreferrer">小程序条件渲染文档</a></p>
</div>
<h4 id="vue-条件渲染" tabindex="-1"> Vue 条件渲染</h4>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>v-if</span><span><span>=</span><span>"</span>condition<span>"</span></span><span>></span></span>板块只有 condition 为 true 时才会渲染<span><span><span>&lt;/</span>div</span><span>></span></span>

<span><span><span>&lt;</span>div</span> <span>v-if</span><span><span>=</span><span>"</span>{{condition2}}<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>div</span><span>></span></span>内容1<span><span><span>&lt;/</span>div</span><span>></span></span>
  <span><span><span>&lt;</span>div</span><span>></span></span>内容2<span><span><span>&lt;/</span>div</span><span>></span></span>
  <span><span><span>&lt;</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span><span>></span></span>内容3<span><span><span>&lt;/</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span><span>></span></span>内容4<span><span><span>&lt;/</span>div</span><span>></span></span>
  <span><span><span>&lt;/</span>div</span><span>></span></span>
  <span><span><span>&lt;</span>div</span><span>></span></span>
    Vue 没有相关虚拟标签，且只能监听一个标签。所以只能建立一个没有样式的 div
    标签将多个并列标签抱起来。这样 Vue 就会因监听最外层 div
    会把其当作一个整体用作条件渲染。
  <span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div><p>相关信息</p>
<p>更多相关请见 <a href="https://cn.vuejs.org/v2/guide/#%E6%9D%A1%E4%BB%B6%E4%B8%8E%E5%BE%AA%E7%8E%AF" target="_blank" rel="noopener noreferrer">Vue 条件渲染文档</a></p>
</div>
<h3 id="循环渲染" tabindex="-1"> 循环渲染</h3>
<h4 id="小程序循环渲染" tabindex="-1"> 小程序循环渲染</h4>
<div><pre><code><span><span><span>&lt;</span>view</span> <span><span>wx:</span>for</span><span><span>=</span><span>"</span>{{array}}<span>"</span></span> <span><span>wx:</span>for-item</span><span><span>=</span><span>"</span>element<span>"</span></span> <span><span>wx:</span>for-index</span><span><span>=</span><span>"</span>index<span>"</span></span><span>></span></span>
  {{index}} is {{element}}
<span><span><span>&lt;/</span>view</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>实际渲染结果为:</p>
<div><pre><code><span><span><span>&lt;</span>view</span><span>></span></span>1<span><span><span>&lt;/</span>view</span><span>></span></span>
<span><span><span>&lt;</span>view</span><span>></span></span>2<span><span><span>&lt;/</span>view</span><span>></span></span>
<span><span><span>&lt;</span>view</span><span>></span></span>3<span><span><span>&lt;/</span>view</span><span>></span></span>
<span><span><span>&lt;</span>view</span><span>></span></span>4<span><span><span>&lt;/</span>view</span><span>></span></span>
<span><span><span>&lt;</span>view</span><span>></span></span>5<span><span><span>&lt;/</span>view</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><div><p>相关信息</p>
<p>更多详情请见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/list.html" target="_blank" rel="noopener noreferrer">小程序循环渲染文档</a></p>
</div>
<h4 id="vue-循环渲染" tabindex="-1"> Vue 循环渲染</h4>
<div><pre><code><span><span><span>&lt;</span>div</span><span>></span></span>
    <span><span><span>&lt;</span>div</span> <span>v-for</span><span><span>=</span><span>"</span>(element,index) in array<span>"</span></span><span>></span></span>
       {{index}} is {{ element }}
    <span><span><span>&lt;/</span>div</span><span>></span></span>
  <span><span><span>&lt;/</span>ol</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div><p>相关信息</p>
<p>更多相关请见 <a href="https://cn.vuejs.org/v2/guide/#%E6%9D%A1%E4%BB%B6%E4%B8%8E%E5%BE%AA%E7%8E%AF" target="_blank" rel="noopener noreferrer">Vue 循环渲染文档</a></p>
</div>
<h2 id="生命周期" tabindex="-1"> 生命周期</h2>
<h3 id="页面生命周期" tabindex="-1"> 页面生命周期</h3>
<h4 id="小程序生命周期" tabindex="-1"> 小程序生命周期</h4>
<p><img src="https://res.wx.qq.com/wxdoc/dist/assets/img/page-lifecycle.2e646c86.png" alt="小程序页面生命周期"></p>
<h4 id="vue-页面生命周期" tabindex="-1"> Vue 页面生命周期</h4>
<p><a href="https://router.vuejs.org/guide/advanced/navigation-guards.html" target="_blank" rel="noopener noreferrer">Vue 页面生命周期</a></p>
<h3 id="组件生命周期" tabindex="-1"> 组件生命周期</h3>
<h4 id="小程序组件生命周期" tabindex="-1"> 小程序组件生命周期</h4>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html" target="_blank" rel="noopener noreferrer">小程序组件生命周期</a></p>
<h4 id="vue-组件生命周期" tabindex="-1"> Vue 组件生命周期</h4>
<p><img src="https://cn.vuejs.org/images/lifecycle.png" alt="Vue组件生命周期"></p>
]]></content>
    <category term="Vue" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">组件使用说明</title>
    <id>https://github.com/MisterChen9527/code/vue/component.html</id>
    <link href="https://github.com/MisterChen9527/code/vue/component.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>Mr.Chen 已为 inNENU Website 开发了一些常规组件。本文介绍了这些组件的配置。</p>
]]></summary>
    <content type="html"><![CDATA[<p>Mr.Chen 已为 inNENU Website 开发了一些常规组件。本文介绍了这些组件的配置。</p>

<h2 id="常规组件" tabindex="-1"> 常规组件</h2>
<div><p>提示</p>
<p>所有以 <code>Base</code> 开头的组件都包含如下属性:</p>
<p>| 属性 | 必填 |       类型       | 内容      |
| ---- | :--: | :--------------: | --------- | --- |
| myId |  是  | Number 或 String | 组件的 ID |     |</p>
</div>
<p>以下是项目中中常用的组件。</p>
<h3 id="basehead" tabindex="-1"> BaseHead</h3>
<p>页面标题文字</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>页面选项卡文字</td>
</tr>
</tbody>
</table>
<h3 id="basetitle" tabindex="-1"> BaseTitle</h3>
<p>段落间大标题</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>text</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>标题文字</td>
<td></td>
</tr>
<tr>
<td>myStyle</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String 或 Style</td>
<td>标题自定义样式</td>
<td>填入任意 css 样式</td>
</tr>
</tbody>
</table>
<h3 id="basep" tabindex="-1"> BaseP</h3>
<p>段落文字(可带图)</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>text</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>段落的文字</td>
<td>可以识别连续的空格，使用 <code>\n</code> 表示回车，也可直接使用 <code>&lt;br /&gt;</code> 换行</td>
</tr>
<tr>
<td>head</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>段落的标题</td>
<td></td>
</tr>
<tr>
<td>headStyle</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String 或 Style</td>
<td>标题自定义样式</td>
<td>填入任意 css 样式</td>
</tr>
<tr>
<td>myStyle</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String 或 Style</td>
<td>标题自定义样式</td>
<td>填入任意 css 样式</td>
</tr>
<tr>
<td>src</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>图片的路径</td>
<td>会在段落后渲染一张图片</td>
</tr>
<tr>
<td>desc</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>图片的描述文字</td>
<td>会自动在文字前加 <code>▲</code></td>
</tr>
</tbody>
</table>
<h3 id="baseimg" tabindex="-1"> BaseImg</h3>
<p>图片</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>图片的路径</td>
<td></td>
</tr>
<tr>
<td>desc</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>图片的描述文字</td>
<td>会自动在文字前加 ▲</td>
</tr>
</tbody>
</table>
<h3 id="baselist" tabindex="-1"> BaseList</h3>
<p>列表</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>content</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>列表内容</td>
<td></td>
</tr>
<tr>
<td>head</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String 或 Boolean</td>
<td>列表的标题</td>
<td>默认为 <code>''</code>，设置 <code>false</code> 取消显示列表标题，否则即使不设置也会显示一个空标题</td>
</tr>
<tr>
<td>foot</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>列表的页脚文字</td>
<td>默认为 <code>''</code>,不显示页脚</td>
</tr>
</tbody>
</table>
<h3 id="basegrid" tabindex="-1"> BaseGrid</h3>
<p>九宫格</p>
<p>| 属性    | 必填 |       类型        | 内容             |
| ------- | :--: | :---------------: | ---------------- | ------------------------------------------------------------------------------ |
| content |  是  |    GirdItem[]     | 九宫格单元内容   |
| head    |  否  | String 或 Boolean | 九宫格的标题     | 默认为 <code>''</code>，设置 <code>false</code> 取消显示九宫格标题，否则即使不设置也会显示一个空标题 |
| foot    |  否  |      String       | 九宫格的页脚文字 | 默认为 <code>''</code>,不显示页脚                                                         |</p>
<ul>
<li><strong>GirdItem</strong></li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>icon</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>图标地址</td>
</tr>
<tr>
<td>text</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>文字</td>
</tr>
<tr>
<td>url</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>跳转链接</td>
</tr>
</tbody>
</table>
<h3 id="basefoot" tabindex="-1"> BaseFoot</h3>
<p>页脚</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>desc</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>页脚额外描述文字</td>
<td></td>
</tr>
<tr>
<td>author</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>作者</td>
<td>默认为 <code>Mr.Chen</code>，如需取消请传入 <code>''</code></td>
</tr>
<tr>
<td>time</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>最后编辑时间</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="basecarousel" tabindex="-1"> BaseCarousel</h3>
<p>轮播图</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>content</td>
<td style="text-align:center">是</td>
<td style="text-align:center">CarouselItem[]</td>
<td>轮播图组件内容</td>
<td></td>
</tr>
<tr>
<td>vertical</td>
<td style="text-align:center">否</td>
<td style="text-align:center">Boolean</td>
<td>是否竖直显示</td>
<td>默认为 <code>false</code></td>
</tr>
<tr>
<td>autoplay</td>
<td style="text-align:center">否</td>
<td style="text-align:center">Boolean</td>
<td>是否支持自动播放</td>
<td>默认为 <code>true</code></td>
</tr>
<tr>
<td>autoplaySpeed</td>
<td style="text-align:center">否</td>
<td style="text-align:center">Number</td>
<td>自动播放时间间隔</td>
<td>默认为 <code>3000</code></td>
</tr>
<tr>
<td>speed</td>
<td style="text-align:center">否</td>
<td style="text-align:center">Number</td>
<td>切换速度</td>
<td>默认为 <code>500</code></td>
</tr>
<tr>
<td>dotDisplay</td>
<td style="text-align:center">否</td>
<td style="text-align:center">Boolean</td>
<td>是否显示指示点</td>
<td>默认为 <code>true</code></td>
</tr>
<tr>
<td>arrowDisplay</td>
<td style="text-align:center">否</td>
<td style="text-align:center">Boolean</td>
<td>是否显示切换箭头</td>
<td>默认为 <code>true</code></td>
</tr>
<tr>
<td>easing</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>切换动画</td>
<td>默认为 <code>easeInOutQuart</code></td>
</tr>
</tbody>
</table>
<ul>
<li><strong>CarouselItem</strong></li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>caption</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>轮播图的主标题</td>
<td>请填入核心内容</td>
</tr>
<tr>
<td>subCaption</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>轮播图的副标题</td>
<td>主标题的进一步解释</td>
</tr>
<tr>
<td>src</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>图片的路径</td>
<td>所有轮播图图片长宽比例应该相同，推荐值 <code>16: 9</code></td>
</tr>
<tr>
<td>url</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>轮播图点击时的跳转路径</td>
<td>支持相对路径绝对路径以及 http、https 链接</td>
</tr>
<tr>
<td>enSubhead</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>轮播图的英文副标题</td>
<td></td>
</tr>
<tr>
<td>alt</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>图片失效时的显示文字</td>
<td>不填会默认初始化为文字 <code>轮播图背景</code></td>
</tr>
<tr>
<td>desc</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>页面右下角补充说明</td>
<td>仅在 large 及以上屏幕上显示</td>
</tr>
<tr>
<td>black</td>
<td style="text-align:center">否</td>
<td style="text-align:center">Boolean</td>
<td>是否采用黑色文字</td>
<td>默认文字色为白色</td>
</tr>
</tbody>
</table>
<h3 id="basephone" tabindex="-1"> BasePhone</h3>
<p>生成拨打电话提示，该组件仅为兼容小程序。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>number</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String 或 Number</td>
<td>电话号码</td>
</tr>
</tbody>
</table>
<h2 id="以下是以便复用的不常用组件" tabindex="-1"> 以下是以便复用的不常用组件</h2>
<h3 id="nav-组件" tabindex="-1"> Nav 组件</h3>
<p>网页导航栏</p>
<h3 id="slide-组件" tabindex="-1"> Slide 组件</h3>
<p>网页侧边栏</p>
<h3 id="footer-组件" tabindex="-1"> Footer 组件</h3>
<p>网页页脚</p>
<h3 id="basemenu-组件" tabindex="-1"> BaseMenu 组件</h3>
<p>生成竖直菜单</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>list</td>
<td style="text-align:center">是</td>
<td style="text-align:center">MenuItem[]</td>
<td>菜单内容</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>MenuItem</strong></li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>菜单项的标识符</td>
<td>不可重复</td>
</tr>
<tr>
<td>title</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>菜单的文字</td>
<td></td>
</tr>
<tr>
<td>icon</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String 或 Boolean</td>
<td>菜单的图标</td>
<td>填入 <code>true</code> 不显示图标但是图标区留空</td>
</tr>
<tr>
<td>children</td>
<td style="text-align:center">否</td>
<td style="text-align:center">MenuItem[]</td>
<td>子菜单</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="basepage-组件" tabindex="-1"> BasePage 组件</h3>
<p>用于渲染小程序 json 生成页面</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>pagedata</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>小程序页面 json 的字符串</td>
</tr>
</tbody>
</table>
<h3 id="docview-组件" tabindex="-1"> DocView 组件</h3>
<p>用于自动渲染转码的 HTML</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>docContent</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>Markdown 转 HTML 内容</td>
</tr>
</tbody>
</table>
<h3 id="basecard-组件" tabindex="-1"> BaseCard 组件</h3>
<p>卡片样式。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>卡片的标题</td>
<td></td>
</tr>
<tr>
<td>price</td>
<td style="text-align:center">是</td>
<td style="text-align:center">Number</td>
<td>价格</td>
<td></td>
</tr>
<tr>
<td>desc</td>
<td style="text-align:center">是</td>
<td style="text-align:center">Array</td>
<td>卡片详情</td>
<td>数组的每一项是卡片详情的每一项内容，支持 rawHtml</td>
</tr>
<tr>
<td>url</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>卡片跳转的地址</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="basetimeaxis-组件" tabindex="-1"> BaseTimeAxis 组件</h3>
<p>生成时间轴</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>timeList</td>
<td style="text-align:center">是</td>
<td style="text-align:center">TimeListItem[]</td>
<td>Markdown 转 HTML 内容</td>
</tr>
</tbody>
</table>
<div><p>注意</p>
<p>※ 必须将该组件直接放置在 <code>div.container</code> 中! 否则会造成显示错乱。</p>
</div>
<ul>
<li><strong>TimeListItem</strong>:</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>时间线的标题</td>
<td></td>
</tr>
<tr>
<td>text</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>时间线的段落文字</td>
<td>可输入 rawhtml，支持 <code>\n</code> 与连续空格</td>
</tr>
<tr>
<td>icon</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>时间线的图标</td>
<td>可输入 rawhtml</td>
</tr>
<tr>
<td>url</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>点击当前选项卡跳转的地址</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="mydoc-组件" tabindex="-1"> MyDoc 组件</h3>
<p>用于自动生成 HTML 页面</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>baselength</td>
<td style="text-align:center">是</td>
<td style="text-align:center">Number</td>
<td>MarkDown 基准路径字符数</td>
</tr>
</tbody>
</table>
<h3 id="backtop-组件" tabindex="-1"> BackTop 组件</h3>
<p>一个返回顶部按钮，当滚动距离超过 300px 时显示会显示在右下角</p>
<h3 id="loadingicon" tabindex="-1"> LoadingIcon</h3>
<p>一个自定义的齿轮加载图标</p>
<h3 id="passwordmodal" tabindex="-1"> PasswordModal</h3>
<p>密码弹出框</p>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:center">必填</th>
<th style="text-align:center">类型</th>
<th>内容</th>
<th>补充说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td style="text-align:center">是</td>
<td style="text-align:center">String</td>
<td>验证地址</td>
<td>填入绝对路径，不需要填写 php 文件后缀名</td>
</tr>
<tr>
<td>userNameKey</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>用户名的自动填充键值</td>
<td>填写后会提示输入用户名，默认不输入</td>
</tr>
<tr>
<td>passwordKey</td>
<td style="text-align:center">否</td>
<td style="text-align:center">String</td>
<td>密码的自动填充键值</td>
<td>默认为 <code>password</code></td>
</tr>
</tbody>
</table>
]]></content>
    <category term="Vue" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">快速上手 Vue.js</title>
    <id>https://github.com/MisterChen9527/code/vue/get-started.html</id>
    <link href="https://github.com/MisterChen9527/code/vue/get-started.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="vue-js-是什么" tabindex="-1"> Vue.js 是什么</h2>
<p><a href="https://learning.dcloud.io/#/?vid=0" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<h2 id="起步" tabindex="-1"> 起步</h2>
<p><a href="https://learning.dcloud.io/#/?vid=1" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<div><p>提示</p>
<p>您应当已了解关于 HTML、CSS 和 JavaScript 的中级知识。</p>
</div>
<p><a href="https://cn.vuejs.org/v2/guide/installation.html" target="_blank" rel="noopener noreferrer">安装</a></p>
<p>尝试 Vue.js 最简单的方法是使用 <a href="https://jsfiddle.net/chrisvfritz/50wL7mdz/" target="_blank" rel="noopener noreferrer">JSFiddle 上的 Hello World 例子</a>。您可以在浏览器新标签页中打开它，跟着例子学习一些基础用法。或者您也可以创建一个 <code>.html</code> 文件，然后通过如下方式引入 Vue:</p>
<div><pre><code><span>&lt;!-- 开发环境版本，包含了有帮助的命令行警告 --></span>
<span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>https://cdn.jsdelivr.net/npm/vue/dist/vue.js<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p>或者:</p>
<div><pre><code><span>&lt;!-- 生产环境版本，优化了尺寸和速度 --></span>
<span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>https://cdn.jsdelivr.net/npm/vue<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><div><p>注意</p>
<p>请注意 Mr.Chen <strong>不推荐</strong> 新手直接使用 <code>vue-cli</code>，尤其是在您还不熟悉基于 Node.js 的构建工具时。</p>
</div>
<h2 id="声明式渲染" tabindex="-1"> 声明式渲染</h2>
<p><a href="https://learning.dcloud.io/#/?vid=3" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<p>Vue.js 的核心是一个允许采用简洁的模板语法来声明式地将数据渲染进 DOM 的系统:</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app<span>"</span></span><span>></span></span>{{ message }}<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div></div></div><div><pre><code><span>const</span> app <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#app"</span><span>,</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>message</span><span>:</span> <span>"Hello Vue!"</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>我们已经成功创建了第一个 Vue 应用! 现在数据和 DOM 已经被建立了关联，所有东西都是<strong>响应式的</strong>。也就是说如果 <code>data</code> 中的 <code>message</code> 值被改变，那么视图层中的 <code>message</code> 马上会更新。</p>
<p>除了文本插值，我们还可以像这样来绑定元素特性:</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app-2<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>span</span> <span><span>v-bind:</span>title</span><span><span>=</span><span>"</span>message<span>"</span></span><span>></span></span>
    鼠标悬停几秒钟查看此处动态绑定的提示信息!
  <span><span><span>&lt;/</span>span</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><div><pre><code><span>const</span> app2 <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#app-2"</span><span>,</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>message</span><span>:</span> <span>"页面加载于 "</span> <span>+</span> <span>new</span> <span>Date</span><span>(</span><span>)</span><span>.</span><span>toLocaleString</span><span>(</span><span>)</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>这里我们遇到了一点新东西。您看到的 <code>v-bind</code> 特性被称为<strong>指令</strong>。指令带有前缀 <code>v-</code>，以表示它们是 Vue 提供的特殊特性。可能您已经猜到了，它们会在渲染的 DOM 上应用特殊的响应式行为。在这里，该指令的意思是: “将这个元素节点的 <code>title</code> 特性和 Vue 实例的 <code>message</code> 属性保持一致”。</p>
<h2 id="条件与循环" tabindex="-1"> 条件与循环</h2>
<p><a href="https://learning.dcloud.io/#/?vid=8" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<p>控制切换一个元素是否显示也相当简单:</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app-3<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>p</span> <span>v-if</span><span><span>=</span><span>"</span>seen<span>"</span></span><span>></span></span>现在您看到我了<span><span><span>&lt;/</span>p</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><div><pre><code><span>const</span> app3 <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#app-3"</span><span>,</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>seen</span><span>:</span> <span>true</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>如果您改变 <code>seen</code> 的值，文字的显示与否(也就是 <code>&lt;p&gt;</code> 标签的存在与否)也会进行切换。</p>
<p>这个例子演示了我们不仅可以把数据绑定到 DOM 文本或特性，还可以绑定到 DOM <strong>结构</strong>。此外，Vue 也提供一个强大的过渡效果系统，可以在 Vue 插入/更新/移除元素时自动应用<a href="https://cn.vuejs.org/v2/guide/transitions.html" target="_blank" rel="noopener noreferrer">过渡效果</a>。</p>
<p>还有其它很多指令，每个都有特殊的功能。例如，<code>v-for</code> 指令可以绑定数组的数据来渲染一个项目列表:</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app-4<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>ol</span><span>></span></span>
    <span><span><span>&lt;</span>li</span> <span>v-for</span><span><span>=</span><span>"</span>todo in todos<span>"</span></span><span>></span></span>{{ todo.text }}<span><span><span>&lt;/</span>li</span><span>></span></span>
  <span><span><span>&lt;/</span>ol</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><div><pre><code><span>const</span> app4 <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#app-4"</span><span>,</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>todos</span><span>:</span> <span>[</span>
      <span>{</span> <span>text</span><span>:</span> <span>"学习 JavaScript"</span> <span>}</span><span>,</span>
      <span>{</span> <span>text</span><span>:</span> <span>"学习 Vue"</span> <span>}</span><span>,</span>
      <span>{</span> <span>text</span><span>:</span> <span>"整个牛项目"</span> <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="处理用户输入" tabindex="-1"> 处理用户输入</h2>
<p><a href="https://learning.dcloud.io/#/?vid=11" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<p>为了让用户和您的应用进行交互，我们可以用 <code>v-on</code> 指令添加一个事件监听器，通过它调用在 Vue 实例中定义的方法:</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app-5<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>p</span><span>></span></span>{{ message }}<span><span><span>&lt;/</span>p</span><span>></span></span>
  <span><span><span>&lt;</span>button</span> <span><span>v-on:</span>click</span><span><span>=</span><span>"</span>reverseMessage<span>"</span></span><span>></span></span>反转消息<span><span><span>&lt;/</span>button</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><div><pre><code><span>const</span> app5 <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#app-5"</span><span>,</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>message</span><span>:</span> <span>"Hello Vue.js!"</span><span>,</span>
  <span>}</span><span>,</span>
  <span>methods</span><span>:</span> <span>{</span>
    <span>reverseMessage</span><span>:</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
      <span>this</span><span>.</span>message <span>=</span> <span>this</span><span>.</span>message<span>.</span><span>split</span><span>(</span><span>""</span><span>)</span><span>.</span><span>reverse</span><span>(</span><span>)</span><span>.</span><span>join</span><span>(</span><span>""</span><span>)</span><span>;</span>
    <span>}</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>注意在 <code>reverseMessage</code> 方法中，每次点击按钮的时候，我们更新了应用的状态，但没有触碰 DOM——所有的 DOM 操作都由 Vue 来处理，您编写的代码只需要关注逻辑层面即可。</p>
<p>Vue 还提供了 <code>v-model</code> 指令，它能轻松实现表单输入和应用状态之间的双向绑定。</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app-6<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>p</span><span>></span></span>{{ message }}<span><span><span>&lt;/</span>p</span><span>></span></span>
  <span><span><span>&lt;</span>input</span> <span>v-model</span><span><span>=</span><span>"</span>message<span>"</span></span> <span>/></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><div><pre><code><span>const</span> app6 <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#app-6"</span><span>,</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>message</span><span>:</span> <span>"Hello Vue!"</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>也就是说，在输入框做出的更改会同步到 js 的数据中。</p>
<h2 id="组件化应用构建" tabindex="-1"> 组件化应用构建</h2>
<p><a href="https://learning.dcloud.io/#/?vid=12" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<p>组件系统是 Vue 的另一个重要概念，因为它是一种抽象，允许我们使用小型、独立和通常可复用的组件构建大型应用。仔细想想，几乎任意类型的应用界面都可以抽象为一个组件树:</p>
<p><img src="@source/code/vue/assets/components.png" alt="Component Tree"></p>
<p>在 Vue 里，一个组件本质上是一个拥有预定义选项的一个 Vue 实例。在 Vue 中注册组件很简单:</p>
<div><pre><code><span>// 定义名为 todo-item 的新组件</span>
Vue<span>.</span><span>component</span><span>(</span><span>"todo-item"</span><span>,</span> <span>{</span>
  <span>template</span><span>:</span> <span>"&lt;li>这是个待办项&lt;/li>"</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><p>现在您可以用它构建另一个组件模板:</p>
<div><pre><code><span><span><span>&lt;</span>ol</span><span>></span></span>
  <span>&lt;!-- 创建一个 todo-item 组件的实例 --></span>
  <span><span><span>&lt;</span>todo-ite</span> <span>/></span></span>
<span><span><span>&lt;/</span>ol</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div></div></div><p>但是这样会为每个待办项渲染同样的文本，这看起来并不炫酷。我们应该能从父作用域将数据传到子组件才对。让我们来修改一下组件的定义，使之能够接受一个 <a href="https://cn.vuejs.org/v2/guide/components.html#%E9%80%9A%E8%BF%87-Prop-%E5%90%91%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE" target="_blank" rel="noopener noreferrer">prop</a>:</p>
<div><pre><code>Vue<span>.</span><span>component</span><span>(</span><span>"todo-item"</span><span>,</span> <span>{</span>
  <span>// todo-item 组件现在接受一个</span>
  <span>// "prop"，类似于一个自定义特性。</span>
  <span>// 这个 prop 名为 todo。</span>
  <span>props</span><span>:</span> <span>[</span><span>"todo"</span><span>]</span><span>,</span>
  <span>template</span><span>:</span> <span>"&lt;li>{{ todo.text }}&lt;/li>"</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>现在，我们可以使用 <code>v-bind</code> 指令将待办项传到循环输出的每个组件中:</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app-7<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>ol</span><span>></span></span>
    <span>&lt;!--
      现在我们为每个 todo-item 提供 todo 对象
      todo 对象是变量，即其内容可以是动态的。
      我们也需要为每个组件提供一个“key”，稍后再
      作详细解释。
    --></span>
    <span><span><span>&lt;</span>todo-item</span>
      <span>v-for</span><span><span>=</span><span>"</span>item in groceryList<span>"</span></span>
      <span><span>v-bind:</span>todo</span><span><span>=</span><span>"</span>item<span>"</span></span>
      <span><span>v-bind:</span>key</span><span><span>=</span><span>"</span>item.id<span>"</span></span>
    <span>/></span></span>
  <span><span><span>&lt;/</span>ol</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div><pre><code>Vue<span>.</span><span>component</span><span>(</span><span>"todo-item"</span><span>,</span> <span>{</span>
  <span>props</span><span>:</span> <span>[</span><span>"todo"</span><span>]</span><span>,</span>
  <span>template</span><span>:</span> <span>"&lt;li>{{ todo.text }}&lt;/li>"</span><span>,</span>
<span>}</span><span>)</span><span>;</span>

<span>const</span> app7 <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#app-7"</span><span>,</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>groceryList</span><span>:</span> <span>[</span>
      <span>{</span> <span>id</span><span>:</span> <span>0</span><span>,</span> <span>text</span><span>:</span> <span>"蔬菜"</span> <span>}</span><span>,</span>
      <span>{</span> <span>id</span><span>:</span> <span>1</span><span>,</span> <span>text</span><span>:</span> <span>"奶酪"</span> <span>}</span><span>,</span>
      <span>{</span> <span>id</span><span>:</span> <span>2</span><span>,</span> <span>text</span><span>:</span> <span>"随便其它什么人吃的东西"</span> <span>}</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>尽管这只是一个刻意设计的例子，但是我们已经设法将应用分割成了两个更小的单元。子单元通过 prop 接口与父单元进行了良好的解耦。我们现在可以进一步改进 <code>&lt;todo-item&gt;</code> 组件，提供更为复杂的模板和逻辑，而不会影响到父单元。</p>
<p>在一个大型应用中，有必要将整个应用程序划分为组件，以使开发更易管理。在<a href="https://cn.vuejs.org/v2/guide/components.html" target="_blank" rel="noopener noreferrer">后续教程</a>中我们将详述组件，不过这里有一个 (假想的) 例子，以展示使用了组件的应用模板是什么样的:</p>
<div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>app-nav</span> <span>/></span></span>
  <span><span><span>&lt;</span>app-view</span><span>></span></span>
    <span><span><span>&lt;</span>app-sidebar</span> <span>/></span></span>
    <span><span><span>&lt;</span>app-content</span> <span>/></span></span>
  <span><span><span>&lt;/</span>app-view</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h3 id="与自定义元素的关系" tabindex="-1"> 与自定义元素的关系</h3>
<p>您可能已经注意到 Vue 组件非常类似于<strong>自定义元素</strong>——它是 <a href="https://www.w3.org/wiki/WebComponents/" target="_blank" rel="noopener noreferrer">Web 组件规范</a>的一部分，这是因为 Vue 的组件语法部分参考了该规范。例如 Vue 组件实现了 <a href="https://github.com/w3c/webcomponents/blob/gh-pages/proposals/Slots-Proposal.md" target="_blank" rel="noopener noreferrer">Slot API</a> 与 <code>is</code> 特性。但是，还是有几个关键差别:</p>
<ol>
<li>
<p>Web Components 规范已经完成并通过，但未被所有浏览器原生实现。目前 Safari 10.1+、Chrome 54+ 和 Firefox 63+ 原生支持 Web Components。相比之下，Vue 组件不需要任何 polyfill，并且在所有支持的浏览器 (IE9 及更高版本) 之下表现一致。必要时，Vue 组件也可以包装于原生自定义元素之内。</p>
</li>
<li>
<p>Vue 组件提供了纯自定义元素所不具备的一些重要功能，最突出的是跨组件数据流、自定义事件通信以及构建工具集成。</p>
</li>
</ol>
<p>虽然 Vue 内部没有使用自定义元素，不过在应用使用自定义元素、或以自定义元素形式发布时，<a href="https://custom-elements-everywhere.com/#vue" target="_blank" rel="noopener noreferrer">依然有很好的互操作性</a>。Vue CLI 也支持将 Vue 组件构建成为原生的自定义元素。</p>
<h2 id="创建一个-vue-实例" tabindex="-1"> 创建一个 Vue 实例</h2>
<p><a href="https://learning.dcloud.io/#/?vid=2" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<p>每个 Vue 应用都是通过用 <code>Vue</code> 函数创建一个新的 <strong>Vue 实例</strong>开始的:</p>
<div><pre><code><span>const</span> vm <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>// 选项</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>虽然没有完全遵循 <a href="https://zh.wikipedia.org/wiki/MVVM" target="_blank" rel="noopener noreferrer">MVVM 模型</a>，但是 Vue 的设计也受到了它的启发。因此在文档中经常会使用 <code>vm</code> (ViewModel 的缩写) 这个变量名表示 Vue 实例。</p>
<p>当创建一个 Vue 实例时，您可以传入一个<strong>选项对象</strong>。这篇教程主要描述的就是如何使用这些选项来创建您想要的行为。作为参考，您也可以在 <a href="https://cn.vuejs.org/v2/api/" target="_blank" rel="noopener noreferrer">API 文档</a> 中浏览完整的选项列表。</p>
<p>一个 Vue 应用由一个通过 <code>new Vue</code> 创建的<strong>根 Vue 实例</strong>，以及可选的嵌套的、可复用的组件树组成。举个例子，一个 todo 应用的组件树可以是这样的:</p>
<div><pre><code>根实例
└─ TodoList
├─ TodoItem
│ ├─ DeleteTodoButton
│ └─ EditTodoButton
└─ TodoListFooter
├─ ClearTodosButton
└─ TodoListStatistics
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>我们会在稍后的<a href="https://cn.vuejs.org/v2/guide/components.html" target="_blank" rel="noopener noreferrer">组件系统</a>章节具体展开。不过现在，您只需要明白所有的 Vue 组件都是 Vue 实例，并且接受相同的选项对象 (一些根实例特有的选项除外)。</p>
<h2 id="数据与方法" tabindex="-1"> 数据与方法</h2>
<p><a href="https://learning.dcloud.io/#/?vid=3" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<p>当一个 Vue 实例被创建时，它将 <code>data</code> 对象中的所有的属性加入到 Vue 的<strong>响应式系统</strong>中。当这些属性的值发生改变时，视图将会产生“响应”，即匹配更新为新的值。</p>
<div><pre><code><span>// 我们的数据对象</span>
<span>const</span> data <span>=</span> <span>{</span> <span>a</span><span>:</span> <span>1</span> <span>}</span><span>;</span>

<span>// 该对象被加入到一个 Vue 实例中</span>
<span>const</span> vm <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>data</span><span>:</span> data<span>,</span>
<span>}</span><span>)</span><span>;</span>

<span>// 获得这个实例上的属性</span>
<span>// 返回源数据中对应的字段</span>
vm<span>.</span>a <span>==</span> data<span>.</span>a<span>;</span> <span>// => true</span>

<span>// 设置属性也会影响到原始数据</span>
vm<span>.</span>a <span>=</span> <span>2</span><span>;</span>
data<span>.</span>a<span>;</span> <span>// => 2</span>

<span>// ……反之亦然</span>
data<span>.</span>a <span>=</span> <span>3</span><span>;</span>
vm<span>.</span>a<span>;</span> <span>// => 3</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>当这些数据改变时，视图会进行重渲染。值得注意的是只有当实例被创建时就已经存在于 <code>data</code> 中的属性才是<strong>响应式</strong>的。也就是说如果您添加一个新的属性，比如:</p>
<div><pre><code>vm<span>.</span>b <span>=</span> <span>"hi"</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div></div></div><p>那么对 <code>b</code> 的改动将不会触发任何视图的更新。如果您知道您会在晚些时候需要一个属性，但是一开始它为空或不存在，那么您仅需要设置一些初始值。比如:</p>
<div><pre><code><span>data</span><span>:</span> <span>{</span>
  <span>newTodoText</span><span>:</span> <span>''</span><span>,</span>
  <span>visitCount</span><span>:</span> <span>0</span><span>,</span>
  <span>hideCompletedTodos</span><span>:</span> <span>false</span><span>,</span>
  <span>todos</span><span>:</span> <span>[</span><span>]</span><span>,</span>
  <span>error</span><span>:</span> <span>null</span>
<span>}</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>这里唯一的例外是使用 <code>Object.freeze()</code>，这会阻止修改现有的属性，也意味着响应系统无法再<em>追踪</em>变化。</p>
<div><pre><code><span>const</span> obj <span>=</span> <span>{</span>
  <span>foo</span><span>:</span> <span>"bar"</span><span>,</span>
<span>}</span><span>;</span>

Object<span>.</span><span>freeze</span><span>(</span>obj<span>)</span><span>;</span>

<span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#app"</span><span>,</span>
  <span>data</span><span>:</span> obj<span>,</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div><pre><code><span><span><span>&lt;</span>div</span> <span>id</span><span><span>=</span><span>"</span>app<span>"</span></span><span>></span></span>
  <span><span><span>&lt;</span>p</span><span>></span></span>{{ foo }}<span><span><span>&lt;/</span>p</span><span>></span></span>
  <span>&lt;!-- 这里的 `foo` 不会更新!  --></span>
  <span><span><span>&lt;</span>button</span> <span><span>v-on:</span>click</span><span><span>=</span><span>"</span>foo = <span>'</span>baz<span>'</span><span>"</span></span><span>></span></span>Change it<span><span><span>&lt;/</span>button</span><span>></span></span>
<span><span><span>&lt;/</span>div</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div></div></div><p>除了数据属性，Vue 实例还暴露了一些有用的实例属性与方法。它们都有前缀 <code>$</code>，以便与用户定义的属性区分开来。例如:</p>
<div><pre><code><span>const</span> data <span>=</span> <span>{</span> <span>a</span><span>:</span> <span>1</span> <span>}</span><span>;</span>
<span>const</span> vm <span>=</span> <span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>el</span><span>:</span> <span>"#example"</span><span>,</span>
  <span>data</span><span>:</span> data<span>,</span>
<span>}</span><span>)</span><span>;</span>

vm<span>.</span>$data <span>===</span> data<span>;</span> <span>// => true</span>
vm<span>.</span>$el <span>===</span> document<span>.</span><span>getElementById</span><span>(</span><span>"example"</span><span>)</span><span>;</span> <span>// => true</span>

<span>// $watch 是一个实例方法</span>
vm<span>.</span><span>$watch</span><span>(</span><span>"a"</span><span>,</span> <span>function</span> <span>(</span><span>newValue<span>,</span> oldValue</span><span>)</span> <span>{</span>
  <span>// 这个回调将在 `vm.a` 改变后调用</span>
<span>}</span><span>)</span><span>;</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>以后您可以在 <a href="https://cn.vuejs.org/v2/api/#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener noreferrer">API 参考</a>中查阅到完整的实例属性和方法的列表。</p>
<h2 id="实例生命周期钩子" tabindex="-1"> 实例生命周期钩子</h2>
<p><a href="https://learning.dcloud.io/#/?vid=4" target="_blank" rel="noopener noreferrer">观看本节视频讲解</a></p>
<p>每个 Vue 实例在被创建时都要经过一系列的初始化过程——例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。同时在这个过程中也会运行一些叫做<strong>生命周期钩子</strong>的函数，这给了用户在不同阶段添加自己的代码的机会。</p>
<p>比如 <a href="https://cn.vuejs.org/v2/api/#created" target="_blank" rel="noopener noreferrer"><code>created</code></a> 钩子可以用来在一个实例被创建之后执行代码:</p>
<div><pre><code><span>new</span> <span>Vue</span><span>(</span><span>{</span>
  <span>data</span><span>:</span> <span>{</span>
    <span>a</span><span>:</span> <span>1</span><span>,</span>
  <span>}</span><span>,</span>
  <span>created</span><span>:</span> <span>function</span> <span>(</span><span>)</span> <span>{</span>
    <span>// `this` 指向 vm 实例</span>
    console<span>.</span><span>log</span><span>(</span><span>"a is: "</span> <span>+</span> <span>this</span><span>.</span>a<span>)</span><span>;</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>
<span>// => "a is: 1"</span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>也有一些其它的钩子，在实例生命周期的不同阶段被调用，如 <a href="https://cn.vuejs.org/v2/api/#mounted" target="_blank" rel="noopener noreferrer"><code>mounted</code></a>、<a href="https://cn.vuejs.org/v2/api/#updated" target="_blank" rel="noopener noreferrer"><code>updated</code></a> 和 <a href="https://cn.vuejs.org/v2/api/#destroyed" target="_blank" rel="noopener noreferrer"><code>destroyed</code></a>。生命周期钩子的 <code>this</code> 上下文指向调用它的 Vue 实例。</p>
<div><p>提示</p>
<p>不要在选项属性或回调上使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener noreferrer">箭头函数</a>，比如 <code>created: () =&gt; console.log(this.a)</code> 或 <code>vm.$watch('a', newValue =&gt; this.myMethod())</code>。因为箭头函数并没有 <code>this</code>，<code>this</code> 会作为变量一直向上级词法作用域查找，直至找到为止，经常导致 <code>Uncaught TypeError: Cannot read property of undefined</code> 或 <code>Uncaught TypeError: this.myMethod is not a function</code> 之类的错误。</p>
</div>
<h2 id="生命周期图示" tabindex="-1"> 生命周期图示</h2>
<p>下图展示了实例的生命周期。您不需要立马弄明白所有的东西，不过随着您的不断学习和使用，它的参考价值会越来越高。</p>
<p><img src="@source/code/vue/assets/lifecycle.png" alt="Vue 实例生命周期"></p>
]]></content>
    <category term="Vue" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">开发环境安装</title>
    <id>https://github.com/MisterChen9527/code/vue/install.html</id>
    <link href="https://github.com/MisterChen9527/code/vue/install.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="环境准备" tabindex="-1"> 环境准备</h2>
<h3 id="vs-code-安装" tabindex="-1"> VS Code 安装</h3>
<ul>
<li><a href="/software/vscode/install.html">安装 VS Code</a></li>
</ul>
<h4 id="开发指南" tabindex="-1"> 开发指南</h4>
<ol>
<li>
<p>使用 VS Code 打开项目文件夹。</p>
<div><p>提示</p>
<p>请打开 VS Code 选择菜单栏中的 “文件-打开文件夹”，或在文件夹上 “右键——使用 VS Code 打开” 或在文件夹内部空白处 “右键——使用 VS Code 打开”。</p>
</div>
</li>
<li>
<p>打开终端(快捷键 <code>Ctrl + `</code> )。</p>
</li>
<li>
<p>在终端中输入相关指令即可执行相关功能。</p>
</li>
</ol>
<h3 id="git-安装" tabindex="-1"> Git 安装</h3>
<ul>
<li><a href="/software/git/install.html">安装 Git</a></li>
</ul>
<h3 id="node-js-环境安装" tabindex="-1"> Node.js 环境安装</h3>
<p>请先安装 Node.js 并将 npm 与 Node.js 添加至 path。</p>
<ul>
<li>
<p><a href="/code/node-js/install.html">安装 Node.js</a></p>
</li>
<li>
<p><a href="/code/windows/add-path.html">添加到 path</a></p>
</li>
</ul>
<h2 id="初始化版本库、下载网页代码并安装-npm-模块" tabindex="-1"> 初始化版本库、下载网页代码并安装 npm 模块</h2>
<ol>
<li>
<p>打开文件管理器窗口找到合适位置，并在地址栏输入 cmd，以在当前界面打开终端。</p>
</li>
<li>
<p>使用 <code>git clone git@github.com:Mister-Hope/vue-template.git</code> 克隆模板。</p>
</li>
<li>
<p>使用 VS Code 打开刚刚克隆出来的文件夹，按下 <code>Ctrl + `</code> 打开终端。</p>
</li>
<li>
<p>使用 <code>npm install</code> 命令安装模块。</p>
</li>
</ol>
<div><p>提示</p>
<p>npm 模块介绍</p>
<p>此处待补充。</p>
</div>
<h2 id="开发工具安装" tabindex="-1"> 开发工具安装</h2>
<p>Vue 官方提供的浏览器插件 VueTools 可以更好的帮助开发。</p>
<p>使用 VPN 用 Chrome 打开<a href="https://chrome.google.com/webstore/detail/nhdogjmejiglipccpnnnanhbledajbpd" target="_blank" rel="noopener noreferrer">安装网址</a>，安装 VueTools 开发工具</p>
]]></content>
    <category term="Vue" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Vue 单文件组件</title>
    <id>https://github.com/MisterChen9527/code/vue/vue.html</id>
    <link href="https://github.com/MisterChen9527/code/vue/vue.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="介绍" tabindex="-1"> 介绍</h2>
<p>Vue 的单文件组件 (即 <code>*.vue</code> 文件，简称 <strong>SFC</strong>) 是一种特殊的文件格式，使我们能够将一个 Vue 组件的模板、逻辑与样式封装在单个文件中。下面是一个单文件组件的示例：</p>
<div><pre><code><span><span><span>&lt;</span>script</span><span>></span></span><span><span>
<span>export</span> <span>default</span> <span>{</span>
  <span>data</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>{</span>
      <span>greeting</span><span>:</span> <span>"Hello World!"</span><span>,</span>
    <span>}</span><span>;</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</span></span><span><span><span>&lt;/</span>script</span><span>></span></span>

<span><span><span>&lt;</span>template</span><span>></span></span>
  <span><span><span>&lt;</span>p</span> <span>class</span><span><span>=</span><span>"</span>greeting<span>"</span></span><span>></span></span>{{ greeting }}<span><span><span>&lt;/</span>p</span><span>></span></span>
<span><span><span>&lt;/</span>template</span><span>></span></span>

<span><span><span>&lt;</span>style</span><span>></span></span><span><span>
<span>.greeting</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
  <span>font-weight</span><span>:</span> bold<span>;</span>
<span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>如你所见，Vue 的单文件组件是 HTML、CSS 和 JavaScript 三种元素的自然延伸。<code>&lt;template&gt;</code>、<code>&lt;script&gt;</code> 和 <code>&lt;style&gt;</code> 三个块在同一个文件中封装、组合了组件的视图、逻辑和样式。</p>
<h2 id="总览" tabindex="-1"> 总览</h2>
<h2 id="总览-overview" tabindex="-1"> 总览 {#overview}</h2>
<p>一个 Vue 单文件组件 (SFC)，通常使用 <code>*.vue</code> 作为文件扩展名，它是一种使用了类似 HTML 语法的自定义文件格式，用于定义 Vue 组件。一个 Vue 单文件组件在语法上是兼容 HTML 的。</p>
<p>每一个 <code>*.vue</code> 文件都由三种顶层语块构成：<code>&lt;template&gt;</code>、<code>&lt;script&gt;</code> 和 <code>&lt;style&gt;</code>，以及一些其他的自定义块：</p>
<div><pre><code><span><span><span>&lt;</span>template</span><span>></span></span>
  <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>"</span>example<span>"</span></span><span>></span></span>{{ msg }}<span><span><span>&lt;/</span>div</span><span>></span></span>
<span><span><span>&lt;/</span>template</span><span>></span></span>

<span><span><span>&lt;</span>script</span><span>></span></span><span><span>
<span>export</span> <span>default</span> <span>{</span>
  <span>data</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>{</span>
      <span>msg</span><span>:</span> <span>"Hello world!"</span><span>,</span>
    <span>}</span><span>;</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span>
</span></span><span><span><span>&lt;/</span>script</span><span>></span></span>

<span><span><span>&lt;</span>style</span><span>></span></span><span><span>
<span>.example</span> <span>{</span>
  <span>color</span><span>:</span> red<span>;</span>
<span>}</span>
</span></span><span><span><span>&lt;/</span>style</span><span>></span></span>

<span><span><span>&lt;</span>custom1</span><span>></span></span>
  This could be e.g. documentation for the component.
<span><span><span>&lt;/</span>custom1</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><h2 id="相应语言块-language-blocks" tabindex="-1"> 相应语言块 {#language-blocks}</h2>
<h3 id="template-template" tabindex="-1"> <code>&lt;template&gt;</code> {#template}</h3>
<ul>
<li>
<p>每个 <code>*.vue</code> 文件最多可以包含一个顶层 <code>&lt;template&gt;</code> 块。</p>
</li>
<li>
<p>语块包裹的内容将会被提取、传递给 <code>@vue/compiler-dom</code>，预编译为 JavaScript 渲染函数，并附在导出的组件上作为其 <code>render</code> 选项。</p>
</li>
</ul>
<h3 id="script-script" tabindex="-1"> <code>&lt;script&gt;</code> {#script}</h3>
<ul>
<li>
<p>每个 <code>*.vue</code> 文件最多可以包含一个 <code>&lt;script&gt;</code> 块。(使用 <a href="/api/sfc-script-setup.html"><code>&lt;script setup&gt;</code></a> 的情况除外)</p>
</li>
<li>
<p>这个脚本代码块将作为 ES 模块执行。</p>
</li>
<li>
<p><strong>默认导出</strong>应该是 Vue 的组件选项对象，可以是一个对象字面量或是 <a href="/api/general.html#definecomponent">defineComponent</a> 函数的返回值。</p>
</li>
</ul>
<h3 id="script-setup-script-setup" tabindex="-1"> <code>&lt;script setup&gt;</code> {#script-setup}</h3>
<ul>
<li>
<p>每个 <code>*.vue</code> 文件最多可以包含一个 <code>&lt;script setup&gt;</code>。(不包括一般的 <code>&lt;script&gt;</code>)</p>
</li>
<li>
<p>这个脚本块将被预处理为组件的 <code>setup()</code> 函数，这意味着它将<strong>为每一个组件实例</strong>都执行。<code>&lt;script setup&gt;</code> 中的顶层绑定都将自动暴露给模板。要了解更多细节，请看 <a href="/api/sfc-script-setup"><code>&lt;script setup&gt;</code> 的专门文档</a>。</p>
</li>
</ul>
<h3 id="style-style" tabindex="-1"> <code>&lt;style&gt;</code> {#style}</h3>
<ul>
<li>
<p>每个 <code>*.vue</code> 文件可以包含多个 <code>&lt;style&gt;</code> 标签。</p>
</li>
<li>
<p>一个 <code>&lt;style&gt;</code> 标签可以使用 <code>scoped</code> 或 <code>module</code> attribute (查看 <a href="/api/sfc-css-features">SFC 样式功能</a>了解更多细节) 来帮助封装当前组件的样式。使用了不同封装模式的多个 <code>&lt;style&gt;</code> 标签可以被混合入同一个组件。</p>
</li>
</ul>
<h3 id="自定义块-custom-blocks" tabindex="-1"> 自定义块 {#custom-blocks}</h3>
<p>在一个 <code>*.vue</code> 文件中可以为任何项目特定需求使用额外的自定义块。举个例子，一个用作写文档的 <code>&lt;docs&gt;</code> 块。这里是一些自定义块的真实用例：</p>
<ul>
<li><a href="https://gridsome.org/docs/querying-data/" target="_blank" rel="noopener noreferrer">Gridsome：<code>&lt;page-query&gt;</code></a></li>
<li><a href="https://github.com/wheatjs/vite-plugin-vue-gql" target="_blank" rel="noopener noreferrer">vite-plugin-vue-gql：<code>&lt;gql&gt;</code></a></li>
<li><a href="https://github.com/intlify/bundle-tools/tree/main/packages/vite-plugin-vue-i18n#i18n-custom-block" target="_blank" rel="noopener noreferrer">vue-i18n：<code>&lt;i18n&gt;</code></a></li>
</ul>
<p>自定义块的处理需要依赖工具链。如果你想要在构建中集成你的自定义语块，请参见<a href="/guide/scaling-up/tooling.html#sfc-custom-block-integrations">相关工具链指南</a>获取更多细节。</p>
<h2 id="自动名称推导-automatic-name-inference" tabindex="-1"> 自动名称推导 {#automatic-name-inference}</h2>
<p>SFC 在以下场景中会根据<strong>文件名</strong>自动推导其组件名：</p>
<ul>
<li>开发警告信息格式</li>
<li>DevTools 审阅</li>
<li>递归组件自引用。例如一个名为 <code>FooBar.vue</code> 的组件可以在模板中通过 <code>&lt;FooBar/&gt;</code> 引用自己。(同名情况下) 这比明确注册/导入的组件优先级低。</li>
</ul>
<h2 id="预处理器-pre-processors" tabindex="-1"> 预处理器 {#pre-processors}</h2>
<p>代码块可以使用 <code>lang</code> 这个 attribute 来声明预处理器语言，最常见的用例就是对 <code>&lt;script&gt;</code> 块使用 TypeScript：</p>
<div><pre><code>&lt;script lang=&quot;ts&quot;&gt;
  // use TypeScript
&lt;/script&gt;
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p><code>lang</code> 在任意块上都能使用，比如我们可以在 <code>&lt;style&gt;</code> 标签上使用 <a href="https://sass-lang.com/" target="_blank" rel="noopener noreferrer">SASS</a> 或是 <code>&lt;template&gt;</code> 上使用 <a href="https://pugjs.org/api/getting-started.html" target="_blank" rel="noopener noreferrer">Pug</a>：</p>
<div><pre><code>&lt;template lang=&quot;pug&quot;&gt;
p {{ msg }}
&lt;/template&gt;

&lt;style lang=&quot;scss&quot;&gt;
  $primary-color: #333;
  body {
    color: $primary-color;
  }
&lt;/style&gt;
</code></pre><div aria-hidden="true"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><p>注意对各种不同的预处理的集成会导致工具链的不同，你应该查看相应的工具链文档了解细节：</p>
<ul>
<li><a href="https://vitejs.dev/guide/features.html#css-pre-processors" target="_blank" rel="noopener noreferrer">Vite</a></li>
<li><a href="https://cli.vuejs.org/guide/css.html#pre-processors" target="_blank" rel="noopener noreferrer">Vue CLI</a></li>
<li><a href="https://vue-loader.vuejs.org/guide/pre-processors.html#using-pre-processors" target="_blank" rel="noopener noreferrer">webpack + vue-loader</a></li>
</ul>
<h2 id="src-导入-src-imports" tabindex="-1"> Src 导入 {#src-imports}</h2>
<p>如果你更喜欢将 <code>*.vue</code> 组件分散到多个文件中，可以为一个语块使用 <code>src</code> 这个 attribute 来导入一个外部文件：</p>
<div><pre><code><span><span><span>&lt;</span>template</span> <span>src</span><span><span>=</span><span>"</span>./template.html<span>"</span></span><span>></span></span><span><span><span>&lt;/</span>template</span><span>></span></span>
<span><span><span>&lt;</span>style</span> <span>src</span><span><span>=</span><span>"</span>./style.css<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>style</span><span>></span></span>
<span><span><span>&lt;</span>script</span> <span>src</span><span><span>=</span><span>"</span>./script.js<span>"</span></span><span>></span></span><span></span><span><span><span>&lt;/</span>script</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div><div></div></div></div><p>请注意 <code>src</code> 导入和 Webpack 的模块请求遵循相同的路径解析规则，这意味着：</p>
<ul>
<li>相对路径需要以 <code>./</code> 开头</li>
<li>你也可以从 npm 依赖中导入资源</li>
</ul>
<div><pre><code><span>&lt;!-- 从所安装的 "todomvc-app-css" npm 包中导入一个文件 --></span>
<span><span><span>&lt;</span>style</span> <span>src</span><span><span>=</span><span>"</span>todomvc-app-css/index.css<span>"</span></span> <span>/></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><p><code>src</code> 导入对自定义语块也同样适用：</p>
<div><pre><code><span><span><span>&lt;</span>unit-test</span> <span>src</span><span><span>=</span><span>"</span>./unit-test.js<span>"</span></span><span>></span></span>
<span><span><span>&lt;/</span>unit-test</span><span>></span></span>
</code></pre><div aria-hidden="true"><div></div><div></div></div></div><h2 id="注释-comments" tabindex="-1"> 注释 {#comments}</h2>
<p>在每一个语块中你都可以按照相应语言 (HTML、CSS、JavaScript 和 Pug 等等) 的语法书写注释。对于顶层注释，请使用 HTML 的注释语法 <code>&lt;!-- comment contents here --&gt;</code></p>
]]></content>
    <category term="Vue" scheme=""/>
    <published>2022-08-20T08:54:00.000Z</published>
  </entry>
  <entry>
    <title type="html">网页入门</title>
    <id>https://github.com/MisterChen9527/code/website/</id>
    <link href="https://github.com/MisterChen9527/code/website/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>网页需要三件套: <strong>HTML</strong>、<strong>CSS</strong> 和 <strong>JavaScript</strong>。</p>
<ol>
<li>HTML 定义了网页的内容</li>
<li>CSS 描述了网页的样式</li>
<li>JavaScript 编写网页的行为</li>
</ol>
]]></summary>
    <content type="html"><![CDATA[<p>网页需要三件套: <strong>HTML</strong>、<strong>CSS</strong> 和 <strong>JavaScript</strong>。</p>
<ol>
<li>HTML 定义了网页的内容</li>
<li>CSS 描述了网页的样式</li>
<li>JavaScript 编写网页的行为</li>
</ol>

<div><p>提示</p>
<p>一个大型的网站，很少是直接使用原生代码写的。</p>
<p>最新的网站大多数都是用三大框架(、、)搭建，并引入 npm 上的 UI 库编写而成。</p>
<p>稍微老的网站会使用其他框架作为辅助，比如、等。</p>
</div>
<div><p>网页标准指定</p>
<p>互联网网页标准由 W3C 组织制定，它的全称是万维网联盟组织。</p>
</div>
<h2 id="html" tabindex="-1"> HTML</h2>
<p>HTML 指的是超文本标记语言 (Hyper Text Markup Language)，描述了网页的骨架(具体结构)。</p>
<ul>
<li><a href="/code/website/html/">HTML 教程</a></li>
</ul>
<h2 id="css" tabindex="-1"> CSS</h2>
<p>CSS 指层叠样式表 (Cascading Style Sheets)，声明了网页的样式(具体布局)。</p>
<ul>
<li><a href="/code/website/css/">CSS 教程</a></li>
</ul>
<h2 id="emmet" tabindex="-1"> Emmet</h2>
<p>Emmet 是一种快速输入 HTML 和 CSS 的语法。</p>
<ul>
<li><a href="/code/website/emmet/">Emmet 用法介绍</a></li>
</ul>
<h2 id="javascript" tabindex="-1"> JavaScript</h2>
<p>JavaScript 是一种编程语言，声明了网页的交互逻辑。</p>
<p>JavaScript 是一种轻量级的编程语言，为可插入 HTML 页面的编程代码。所有现代的 HTML 页面都使用 JavaScript。</p>
<ul>
<li><a href="/code/website/js.html">JS 教程</a></li>
</ul>
<h3 id="typescript" tabindex="-1"> TypeScript</h3>
<p>TypeScript 是 JavaScript 的一个超集，使得 JS 变成了一种强定义语言。TypeScript 由于其诸多优良特性，目前在前端的份额越来越大。</p>
<ul>
<li><a href="/code/language/typescript/">TypeScript 教程</a></li>
</ul>
<h2 id="node-js" tabindex="-1"> Node.js</h2>
<p>在深入了解并进行前端开发后，就避不开 Node。</p>
<p>Node.js 是一款全球使用广泛的框架，可以用在前端与后端上，拥有大量的模块。Node.js 主要以其丰富并及其容易导入的 Node.js package，以及其方便管理 npm (Node.js Package Manager)闻名。</p>
<ul>
<li><a href="/code/node-js/">Node.js 教程</a></li>
</ul>
<h2 id="历史前端框架" tabindex="-1"> 历史前端框架</h2>
<h3 id="jquery" tabindex="-1"> jQuery</h3>
<p>jQuery 是一个 JavaScript 库，极大地简化了 JavaScript 编程，很容易学习。</p>
<p>jQuery 的优势在于它能够在互联网发展早期兼容各式各样的浏览器，并轻松的选定与操作 DOM。</p>
<p>由于 MVVM 的兴起，目前 jQuery 已逐步被前端三大框架所取代。</p>
<ul>
<li>
<p><a href="/code/website/jQuery/">jQuery 教程</a></p>
</li>
<li>
<p><a href="http://www.w3school.com.cn/jquery/index.asp" target="_blank" rel="noopener noreferrer">W3School</a></p>
</li>
<li>
<p><a href="https://www.runoob.com/jquery/jquery-tutorial.html" target="_blank" rel="noopener noreferrer">菜鸟教程</a></p>
</li>
</ul>
<h3 id="bootstrap4" tabindex="-1"> Bootstrap4</h3>
<p>Bootstrap 是全球最受欢迎的前端组件库，用于开发响应式布局、移动设备优先的 WEB 项目。</p>
<p>Bootstrap 是一套用于 HTML、CSS 和 JS 开发的开源工具集。利用提供的 Sass 变量和大量 mixin、响应式栅格系统、可扩展的预制组件、基于 jQuery 的强大的插件系统，能够快速为您的想法开发出原型或者构建整个 app 。</p>
<ul>
<li>
<p><a href="https://getbootstrap.com/docs/4.1/getting-started/introduction/" target="_blank" rel="noopener noreferrer">bootstrap 官方文档</a></p>
</li>
<li>
<p><a href="https://v4.bootcss.com/docs/4.0/getting-started/introduction/" target="_blank" rel="noopener noreferrer">bootstrap 4.0 中文文档</a></p>
</li>
</ul>
<h2 id="现代前端框架" tabindex="-1"> 现代前端框架</h2>
<h3 id="vue" tabindex="-1"> Vue</h3>
<p>Vue 是一套轻量化的前端渐进式框架框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。</p>
<p>Vue 与 React、Angular 一起合称前端三大框架。</p>
<ul>
<li>
<p><a href="/code/vue/">Vue 学习教程</a></p>
</li>
<li>
<p><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer">Vue 官方文档</a></p>
</li>
</ul>
<h3 id="react" tabindex="-1"> React</h3>
<ul>
<li><a href="/code/react/">React 教程</a></li>
</ul>
<h3 id="angular" tabindex="-1"> Angular</h3>
<ul>
<li><a href="/code/Angular/">Angular 教程</a></li>
</ul>
<h2 id="其他文档" tabindex="-1"> 其他文档</h2>
<ul>
<li><a href="/code/website/https.html">HTTPS 介绍</a></li>
</ul>
]]></content>
    <category term="前端" scheme=""/>
    <published>2019-09-01T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">Http 与 Https 介绍</title>
    <id>https://github.com/MisterChen9527/code/website/https.html</id>
    <link href="https://github.com/MisterChen9527/code/website/https.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="什么是-http-协议" tabindex="-1"> 什么是 HTTP 协议</h2>
<p>HTTP 协议全称 Hyper Text Transfer Protocol，翻译过来就是超文本传输协议，位于 TCP/IP 四层模型当中的应用层。</p>
<p><img src="@source/code/website/assets/http1.jpg" alt="Http 漫画"></p>
<p>HTTP 协议通过 <strong>请求/响应</strong> 的方式，在客户端和服务端之间进行通信。</p>
<p><img src="@source/code/website/assets/http2.jpg" alt="Http 漫画"></p>
<p>这一切看起来很美好，但是 HTTP 协议有一个致命的缺点: <strong>不够安全</strong>。</p>
<p>HTTP 协议的信息传输完全以明文方式，不做任何加密，相当于是在网络上“裸奔”。这样会导致什么问题呢? 让我们打一个比方:</p>
<p>小灰是客户端，小灰的同事小红是服务端，有一天小灰试图给小红发送请求。</p>
<p><img src="@source/code/website/assets/http3.jpg" alt="Http 漫画"></p>
<p>但是，由于传输信息是明文，这个信息有可能被某个中间人恶意截获甚至篡改。这种行为叫做<strong>中间人攻击</strong>。</p>
<p><img src="@source/code/website/assets/http4.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http5.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http6.jpg" alt="Http 漫画"></p>
<p>如何进行加密呢?</p>
<p>小灰和小红可以事先约定一种<strong>对称加密</strong>方式，并且约定一个随机生成的密钥。后续的通信中，信息发送方都使用密钥对信息加密，而信息接收方通过同样的密钥对信息解密。</p>
<p><img src="@source/code/website/assets/http7.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http8.jpg" alt="Http 漫画"></p>
<p>这样做是不是就绝对安全了呢? 并不是。</p>
<p>虽然我们在后续的通信中对明文进行了加密，但是第一次约定加密方式和密钥的通信仍然是明文，如果第一次通信就已经被拦截了，那么密钥就会泄露给中间人，中间人仍然可以解密后续所有的通信内容。</p>
<p><img src="@source/code/website/assets/http9.jpg" alt="Http 漫画"></p>
<p>这可怎么办呢? 别担心，我们可以使用<strong>非对称加密</strong>，为密钥的传输做一层额外的保护。</p>
<p>非对称加密的一组秘钥对中，包含一个公钥和一个私钥。明文既可以用公钥加密，用私钥解密；也可以用私钥加密，用公钥解密。</p>
<p>在小灰和小红建立通信的时候，小红首先把自己的公钥 Key1 发给小灰:</p>
<p><img src="@source/code/website/assets/http10.jpg" alt="Http 漫画"></p>
<p>收到小红的公钥以后，小灰自己生成一个用于对称加密的密钥 Key2，并且用刚才接收的公钥 Key1 对 Key2 进行加密(这里有点绕)，发送给小红:</p>
<p><img src="@source/code/website/assets/http11.jpg" alt="Http 漫画"></p>
<p>小红利用自己非对称加密的私钥，解开了公钥 Key1 的加密，获得了 Key2 的内容。从此以后，两人就可以利用 Key2 进行对称加密的通信了。</p>
<p><img src="@source/code/website/assets/http12.jpg" alt="Http 漫画"></p>
<p>在通信过程中，即使中间人在一开始就截获了公钥 Key1，由于不知道私钥是什么，也无从解密。</p>
<p><img src="@source/code/website/assets/http13.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http14.jpg" alt="Http 漫画"></p>
<p>是什么坏主意呢? 中间人虽然不知道小红的私钥是什么，但是在截获了小红的公钥 Key1 之后，却可以偷天换日，自己另外生成一对公钥私钥，把自己的公钥 Key3 发送给小灰。</p>
<p><img src="@source/code/website/assets/http15.jpg" alt="Http 漫画"></p>
<p>小灰不知道公钥被偷偷换过，以为 Key3 就是小红的公钥。于是按照先前的流程，用 Key3 加密了自己生成的对称加密密钥 Key2，发送给小红。</p>
<p>这一次通信再次被中间人截获，中间人先用自己的私钥解开了 Key3 的加密，获得 Key2，然后再用当初小红发来的 Key1 重新加密，再发给小红。</p>
<p><img src="@source/code/website/assets/http16.jpg" alt="Http 漫画"></p>
<p>这样一来，两个人后续的通信尽管用 Key2 做了对称加密，但是中间人已经掌握了 Key2，所以可以轻松进行解密。</p>
<p><img src="@source/code/website/assets/http17.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http18.jpg" alt="Http 漫画"></p>
<p>是什么解决方案呢? 难道再把公钥进行一次加密吗? 这样只会陷入鸡生蛋蛋生鸡，永无止境的困局。</p>
<p>这时候，我们有必要引入第三方，一个权威的证书颁发机构(CA)来解决。</p>
<p>到底什么是证书呢? 证书包含如下信息:</p>
<p><img src="@source/code/website/assets/http19.jpg" alt="Http 漫画"></p>
<p>为了便于说明，我们这里做了简化，只列出了一些关键信息。至于这些证书信息的用处，我们看看具体的通信流程就能够弄明白了。</p>
<p>流程如下:</p>
<ol>
<li>
<p>作为服务端的小红，首先把自己的公钥发给证书颁发机构，向证书颁发机构申请证书。</p>
<p><img src="@source/code/website/assets/http20.jpg" alt="Http 漫画"></p>
</li>
<li>
<p>证书颁发机构自己也有一对公钥私钥。机构利用自己的私钥来加密 Key1，并且通过服务端网址等信息生成一个证书签名，证书签名同样经过机构的私钥加密。证书制作完成后，机构把证书发送给了服务端小红。</p>
<p><img src="@source/code/website/assets/http21.jpg" alt="Http 漫画"></p>
</li>
<li>
<p>当小灰向小红请求通信的时候，小红不再直接返回自己的公钥，而是把自己申请的证书返回给小灰。</p>
<p><img src="@source/code/website/assets/http22.jpg" alt="Http 漫画"></p>
</li>
<li>
<p>小灰收到证书以后，要做的第一件事情是验证证书的真伪。需要说明的是，各大浏览器和操作系统已经维护了所有权威证书机构的名称和公钥。所以小灰只需要知道是</p>
<p>哪个机构颁布的证书，就可以从本地找到对应的机构公钥，解密出证书签名。</p>
<p>接下来，小灰按照同样的签名规则，自己也生成一个证书签名，如果两个签名一致，说明证书是有效的。</p>
<p>验证成功后，小灰就可以放心地再次利用机构公钥，解密出服务端小红的公钥 Key1。</p>
<p><img src="@source/code/website/assets/http23.jpg" alt="Http 漫画"></p>
</li>
<li>
<p>像之前一样，小灰生成自己的对称加密密钥 Key2，并且用服务端公钥 Key1 加密 Key2，发送给小红。</p>
<p><img src="@source/code/website/assets/http24.jpg" alt="Http 漫画"></p>
</li>
<li>
<p>最后，小红用自己的私钥解开加密，得到对称加密密钥 Key2。于是两人开始用 Key2 进行对称加密的通信。</p>
<p><img src="@source/code/website/assets/http25.jpg" alt="Http 漫画"></p>
</li>
</ol>
<p>在这样的流程下，我们不妨想一想，中间人是否还具有使坏的空间呢?</p>
<p><img src="@source/code/website/assets/http26.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http27.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http28.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http29.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http30.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http31.jpg" alt="Http 漫画"></p>
<p><img src="@source/code/website/assets/http32.jpg" alt="Http 漫画"></p>
<div><p>相关信息</p>
<p>最新推出的 TLS 协议，是 SSL 3.0 协议的升级版，和 SSL 协议的大体原理是相同的。</p>
</div>
]]></content>
    <author>
      <name>小灰</name>
    </author>
    <contributor>
      <name>小灰</name>
    </contributor>
    <published>2019-11-03T00:00:00.000Z</published>
    <rights>本文转载自&lt;a href="https://zhuanlan.zhihu.com/p/57142784"&gt;小灰的知乎专栏&lt;/a&gt;</rights>
  </entry>
  <entry>
    <title type="html">JavaScript 教程</title>
    <id>https://github.com/MisterChen9527/code/website/js.html</id>
    <link href="https://github.com/MisterChen9527/code/website/js.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="初学者教程" tabindex="-1"> 初学者教程</h2>
<ul>
<li><a href="/code/language/js/guide/">快速上手</a></li>
</ul>
<h3 id="javascript-手册" tabindex="-1"> JavaScript 手册</h3>
<ul>
<li><a href="/code/language/js/">JavaScript 学习教程</a></li>
</ul>
<h3 id="在线教程" tabindex="-1"> 在线教程</h3>
<ul>
<li>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="noopener noreferrer">MDN 教程</a></p>
</li>
<li>
<p><a href="http://www.w3school.com.cn/js/index.asp" target="_blank" rel="noopener noreferrer">W3School 教程</a></p>
</li>
<li>
<p><a href="https://www.runoob.com/js/js-tutorial.html" target="_blank" rel="noopener noreferrer">菜鸟教程</a></p>
</li>
</ul>
<h3 id="es6" tabindex="-1"> ES6</h3>
<p>ES6 是 JavaScript 的 2015 标注，现已基本被广泛使用和支持；</p>
<ul>
<li><a href="/code/language/js/es6/">ES6 教程</a></li>
</ul>
<div><p>提示</p>
<p>此教程由阮一峰老师书写(<strong>真·大佬</strong>)，建议深刻理解 JavaScript 原理(大概一年左右)之后再看。</p>
</div>
<blockquote>
<p>开始下一章学习前，您需要跳转到 <a href="/code/language/js/guide/">JS 快速入门章节</a> 了解 JavaScript，或 <a href="/code/language/js/">深入学习 JavaScript</a> 后，方能进入 jQuery 学习。</p>
</blockquote>
]]></content>
    <category term="JavaScript" scheme=""/>
    <published>2019-09-01T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">基础知识</title>
    <id>https://github.com/MisterChen9527/code/windows/</id>
    <link href="https://github.com/MisterChen9527/code/windows/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>以下是有关于 Windows 10 系统的一些基础知识。</p>
]]></summary>
    <content type="html"><![CDATA[<p>以下是有关于 Windows 10 系统的一些基础知识。</p>

<ul>
<li>
<p><a href="/code/windows/shortcut-key.html">Windows 快捷键</a></p>
</li>
<li>
<p><a href="/code/windows/hidden-file.html">显示文件后缀名与隐藏文件</a></p>
</li>
<li>
<p><a href="/code/windows/add-path.html">添加到 path</a></p>
</li>
<li>
<p><a href="/code/windows/cmd.html">快速打开 CMD</a></p>
</li>
<li>
<p><a href="/code/windows/notepad.html">记事本的遗留问题</a></p>
</li>
</ul>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-09-07T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">环境变量的添加</title>
    <id>https://github.com/MisterChen9527/code/windows/add-path.html</id>
    <link href="https://github.com/MisterChen9527/code/windows/add-path.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>以 Windows 10 系统为例，直接在左下角搜索栏中输入“系统变量”</p>
<p><img src="@source/code/windows/assets/pathSearch.png" alt="搜索"></p>
<p>在弹出的框中点击环境变量</p>
<p><img src="@source/code/windows/assets/path.png" alt="系统变量"></p>
<p>在弹出的新窗口中找到 path，选中并点击编辑</p>
<p><img src="@source/code/windows/assets/pathDetail.png" alt="系统变量"></p>
<p>点击添加输入想要添加到 path 的路径或者执行文件名即可</p>
<p><img src="@source/code/windows/assets/pathAdd.png" alt="系统变量"></p>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-09-08T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">打开命令行</title>
    <id>https://github.com/MisterChen9527/code/windows/cmd.html</id>
    <link href="https://github.com/MisterChen9527/code/windows/cmd.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>打开命令行 (命令提示符) 有多种方式。</p>
<ol>
<li>运行 - cmd: <code>Win + R</code> 打开运行，然后敲入 <code>cmd</code> 后回车。</li>
<li>搜索 - cmd: 点击左下角搜索，输入 cmd，然后单击命令提示符。</li>
<li>开始菜单 - Windows 系统 - 命令提示符。</li>
</ol>
<p>如果想要快速打开特定路径的 cmd，请打开对应的文件夹，在地址栏直接输入 <code>cmd</code> 并回车。</p>
]]></summary>
    <content type="html"><![CDATA[<p>打开命令行 (命令提示符) 有多种方式。</p>
<ol>
<li>运行 - cmd: <code>Win + R</code> 打开运行，然后敲入 <code>cmd</code> 后回车。</li>
<li>搜索 - cmd: 点击左下角搜索，输入 cmd，然后单击命令提示符。</li>
<li>开始菜单 - Windows 系统 - 命令提示符。</li>
</ol>
<p>如果想要快速打开特定路径的 cmd，请打开对应的文件夹，在地址栏直接输入 <code>cmd</code> 并回车。</p>

<p><img src="@source/code/windows/assets/cmd.png" alt="示意图"></p>
<p>这样就会快速打开一个路径为当前文件夹的命令提示符窗口。</p>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-09-08T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">显示文件后缀名与隐藏文件</title>
    <id>https://github.com/MisterChen9527/code/windows/hidden-file.html</id>
    <link href="https://github.com/MisterChen9527/code/windows/hidden-file.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>显示文件后缀名与隐藏文件</p>
<p><img src="@source/code/windows/assets/hidden-file.png" alt="如何显示隐藏的文件与文件夹"></p>
]]></content>
    <category term="基础" scheme=""/>
    <published>2020-09-15T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">记事本的遗留问题</title>
    <id>https://github.com/MisterChen9527/code/windows/notepad.html</id>
    <link href="https://github.com/MisterChen9527/code/windows/notepad.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>在编写代码的时候，临时的软件选择需要注意。</p>
<p>请注意，绝对不能用 Word 和写字板。Word 和写字板保存的不是纯文本文件。</p>
<p>千万不要使用 Windows 自带的记事本编辑任何文本文件。</p>
<p>原因是 Microsoft 开发记事本的团队使用了一个非常弱智的行为来保存 UTF-8 编码的文件，他们自作聪明地在每个文件开头添加了几个特殊字符(UTF-8 BOM，即 0xefbbbf)，您会遇到很多不可思议的问题，比如，网页第一行可能会显示一个“?”，明明正确的程序一编译就报语法错误，等等，都是由记事本的弱智行为带来的。</p>
<p>这个弱智行为从 Windows XP 影响到 Windows 10，在最新的 Windows 10 版本(20H2) 中，才得到解决。</p>
<div><p>提示</p>
<p>如果实在是临时急用，需要用记事本替代改一下代码，也要一定注意，保存文件时使用 ANSI 编码，并且暂时不要输入(包含)中文。</p>
</div>
]]></content>
    <published>2019-09-07T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">常用快捷键</title>
    <id>https://github.com/MisterChen9527/code/windows/shortcut-key.html</id>
    <link href="https://github.com/MisterChen9527/code/windows/shortcut-key.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <summary type="html"><![CDATA[<p>熟练掌握各种 Windows 快捷键，能够更加高效的使用 Windows。</p>
]]></summary>
    <content type="html"><![CDATA[<p>熟练掌握各种 Windows 快捷键，能够更加高效的使用 Windows。</p>

<h2 id="最常用且最有用的" tabindex="-1"> 最常用且最有用的</h2>
<ul>
<li><code>F2</code>: 重命名文件；</li>
<li><code>F5</code>: 刷新；</li>
<li><code>PRINT SCREEN</code>: 将当前屏幕截图拷贝到剪贴板；</li>
<li><code>Windows</code> + <code>Shift</code> + <code>S</code>: 打开截图工具；(仅在 Windows10 1809 及以上系统可用)</li>
<li><code>ALT</code> + <code>TAB</code> 切换当前程序(加 Shift 反向)；</li>
<li><code>ALT</code> + <code>F4</code>: 关闭当前应用程序；</li>
<li><code>Ctrl</code> + <code>Tab</code>: 在选项卡上向后移动(加 Shift 反向)；</li>
<li><code>CTRL</code> + <code>F4</code> 或 <code>CTRL</code> + <code>W</code>: 关闭当前选项卡；</li>
<li><code>CTRL</code> + <code>A</code>: 全选；</li>
<li><code>CTRL</code> + <code>X</code>: 剪切；</li>
<li><code>CTRL</code> + <code>C</code>: 复制；</li>
<li><code>CTRL</code> + <code>V</code>: 粘贴；</li>
<li><code>Ctrl</code> + <code>F</code>: 查找；</li>
<li><code>Ctrl</code> + <code>H</code>: 替换。</li>
<li><code>CTRL</code> + <code>Shift</code> + <code>N</code>: 新建文件夹或窗口</li>
</ul>
<h2 id="通用键" tabindex="-1"> 通用键</h2>
<ul>
<li><code>F1</code>: 显示帮助；</li>
<li><code>F2</code>: 重命名文件；</li>
<li><code>F5</code>: 刷新；</li>
<li><code>F11</code>: 全屏；</li>
<li><code>Shift</code> + <code>F10</code>: 打开当前活动项目的快捷菜单(相当于鼠标右键)；</li>
<li><code>ALT</code> 激活当前程序的菜单栏(使用对应字母选择)；</li>
<li><code>Backspace</code>: 退格——删除前一个字符、文件视图下——返回上一级；</li>
<li><code>Enter</code>: 执行或进入；</li>
<li><code>Win</code> 或 <code>CTRL</code> + <code>ESC</code>: 打开开始菜单；</li>
<li><code>DELETE</code>: 删除被选中的项目，如果是文件，将被放入回收站；</li>
<li><code>PRINT SCREEN</code>: 将当前屏幕截图拷贝到剪贴板；</li>
</ul>
<h2 id="程序窗口" tabindex="-1"> 程序窗口</h2>
<ul>
<li><code>Win</code> + <code>Tab</code>: 最近任务和多桌面视图；</li>
<li><code>ALT</code> + <code>TAB</code> 切换当前程序(加 Shift 反向)；</li>
<li><code>ALT</code> + <code>F4</code>: 关闭当前应用程序；</li>
<li><code>Ctrl</code> + <code>Tab</code>: 在选项卡上向后移动(加 Shift 反向)；</li>
<li><code>CTRL</code> + <code>F4</code> 或 <code>CTRL</code> + <code>W</code>: 关闭当前选项卡；</li>
<li><code>Alt</code> + <code>加下划线的字母</code> 执行与该字母匹配的命令(或选择选项)；</li>
<li><code>Win</code> + <code>↑</code>: 显示最小化的窗口 → 最大化窗口；</li>
<li><code>Win</code> + <code>←</code>: 将窗口最大化到屏幕的左侧；</li>
<li><code>Win</code> + <code>→</code>: 将窗口最大化到屏幕的右侧；</li>
<li><code>Win</code> + <code>↓</code>: 缩小窗口 → 最小化窗口；</li>
<li><code>Win</code> + <code>Home</code>: 最小化除活动窗口之外的所有窗口；</li>
<li><code>ALT</code> + <code>SPACEBAR</code>: 打开程序最左上角的菜单；</li>
<li><code>Win</code> + <code>Shift</code> + <code>↑</code>: 将窗口拉伸到屏幕的顶部和底部；</li>
<li><code>Win</code> + <code>Shift</code> + <code>←</code> 或 <code>Win</code> + <code>Shift</code> + <code>→</code>: 将窗口从一个监视器移动到另一个监视器；</li>
</ul>
<h2 id="文件浏览" tabindex="-1"> 文件浏览</h2>
<ul>
<li><code>F2</code>: 重命名文件；</li>
<li><code>Shift</code> + <code>DELETE</code>: 删除被选中的项目，如果是文件，将被直接删除而不是放入回收站；</li>
<li><code>CTRL</code> + <code>X</code>: 剪切；</li>
<li><code>CTRL</code> + <code>C</code>: 复制；</li>
<li><code>CTRL</code> + <code>V</code>: 粘贴；</li>
<li><code>CTRL</code> + <code>Shift</code> + <code>N</code>: 新建文件夹或窗口</li>
</ul>
<h2 id="编辑模式" tabindex="-1"> 编辑模式</h2>
<ul>
<li><code>CTRL</code> + <code>O</code>: 打开文件；</li>
<li><code>CTRL</code> + <code>S</code>: 保存；</li>
<li><code>CTRL</code> + <code>方向键</code>: 滚动屏幕；</li>
<li><code>CTRL</code> + <code>A</code>: 全选；</li>
<li><code>CTRL</code> + <code>X</code>: 剪切；</li>
<li><code>CTRL</code> + <code>C</code>: 复制；</li>
<li><code>CTRL</code> + <code>V</code>: 粘贴；</li>
<li><code>CTRL</code> + <code>Z</code>: 撤销；</li>
<li><code>CTRL</code> + <code>Y</code>: 重做；</li>
<li><code>Ctrl</code> + <code>F</code>: 查找；</li>
<li><code>Ctrl</code> + <code>H</code>: 替换。</li>
<li><code>CTRL</code> + <code>E</code>: 搜索/助理；</li>
<li><code>Ctrl</code> + <code>Tab</code>: 在选项卡上向后移动(加 Shift 反向)；</li>
<li><code>CTRL</code> + <code>F4</code> 或 <code>CTRL</code> + <code>W</code>: 关闭当前选项卡；</li>
<li><code>CTRL</code> + <code>P</code>: 打印；</li>
</ul>
<div><p>提示</p>
<p>单击鼠标左键选择光标位置，按住 <code>Shift</code> 再次在另一处单击鼠标左键，即可选中两光标间的所有文字。鼠标左键单击拖动选中内容即可移动选中内容在文档中的位置。</p>
</div>
<h2 id="系统" tabindex="-1"> 系统</h2>
<ul>
<li><code>CTRL</code> + <code>Shift</code> + <code>ESC</code>: 打开任务管理器;</li>
<li><code>CTRL</code> + <code>ALT</code> + <code>DELETE</code>: 进入安全选项；</li>
<li><code>Win</code> + <code>D</code>: 显示桌面；</li>
<li><code>Win</code> + <code>E</code>: 打开资源管理器；</li>
<li><code>Win</code> + <code>L</code>: 锁定计算机或切换用户；</li>
<li><code>Win</code> + <code>M</code>: 最小化所有窗口(和显示桌面不同，自行感受)；</li>
<li><code>Win</code> + <code>Shift</code> + <code>M</code>: 将最小化的窗口还原到桌面；</li>
<li><code>Win</code> + <code>R</code>: 打开“运行”对话框；</li>
<li><code>Win</code> + <code>A</code>: 打开通知中心；</li>
<li><code>Win</code> + <code>I</code>: 打开系统设置；</li>
<li><code>Win</code> + <code>X</code>: 打开 Windows 主选项菜单；</li>
<li><code>Win</code> + <code>P</code>: 选择投影模式；</li>
<li><code>Win</code> + <code>数字</code>: 启动任务栏上快捷启动项数字位置处的程序；</li>
<li><code>Win</code> + <code>B</code> 选中桌面右下方工具栏；</li>
<li><code>Win</code> + <code>BREAK</code>: 打开“系统属性”对话框</li>
<li><code>Win</code> + <code>T</code>: 循环切换任务栏上的程序；</li>
<li><code>Shift</code> + <code>Win</code> + <code>数字</code>: 打开任务栏上快捷启动项数字位置处程序的新实例；</li>
<li><code>Alt</code> + <code>Win</code> + <code>数字</code>: 显示任务栏上快捷启动项数字位置处程序的跳转列表；</li>
<li><code>ALT</code> + <code>ESC</code>: 保留程序的显示状态切换当前程序(最小化状态将被保留)(加 Shift 反向)；</li>
</ul>
<h2 id="输入法" tabindex="-1"> 输入法</h2>
<ul>
<li><code>CTRL</code> + <code>Space</code>: 切换中英文输入法；</li>
<li><code>Win</code> + <code>Space</code>: 切换输入法；</li>
</ul>
<h2 id="屏幕截图" tabindex="-1"> 屏幕截图</h2>
<ul>
<li><code>PRINT SCREEN</code>: 将当前屏幕截图拷贝到剪贴板；</li>
<li><code>Win</code> + <code>PRINT SCREEN</code>: 将当前屏幕截图保存在图片文件夹中；</li>
<li><code>ALT</code> + <code>PRINT SCREEN</code>: 将当前活动程序窗口以图像方式拷贝到剪贴板；</li>
<li><code>Windows</code> + <code>Shift</code> + <code>S</code>: 打开截图工具；(仅在 Windows10 1809 及以上系统可用)</li>
</ul>
]]></content>
    <category term="基础" scheme=""/>
    <published>2019-09-07T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">设计文章</title>
    <id>https://github.com/MisterChen9527/design/articles/</id>
    <link href="https://github.com/MisterChen9527/design/articles/"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<h2 id="文章列表" tabindex="-1"> 文章列表</h2>
<ul>
<li>
<p><a href="/design/articles/gestalt-principle.html">格式塔原则</a></p>
</li>
<li>
<p><a href="/design/articles/left-or-right.html">布局中的左和右</a></p>
</li>
<li>
<p><a href="/design/articles/infomation-flow.html">信息流介绍</a></p>
</li>
</ul>
]]></content>
    <category term="设计" scheme=""/>
    <published>2020-09-26T00:00:00.000Z</published>
  </entry>
  <entry>
    <title type="html">格式塔原则</title>
    <id>https://github.com/MisterChen9527/design/articles/gestalt-principle.html</id>
    <link href="https://github.com/MisterChen9527/design/articles/gestalt-principle.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>好的设计师理解心理学在视觉感知中的强大作用。当别人的目光与您的设计创作相遇时，会发生什么? 他们对您分享的信息有什么反应?</p>
<h2 id="格式塔原理概述" tabindex="-1"> 格式塔原理概述</h2>
<h3 id="前言" tabindex="-1"> 前言</h3>
<p>举一个场景化的栗子，大家平时逛街的时候能记住哪些广告呢? 我们虽然每天看到那么多的信息，但是真正记住的却不多。还有当我们看到复杂的事物的时候，心里会涌现不舒服的奇怪感受，有时候这种感受没有办法用语言来描述。那么为什么会有这些感受呢?</p>
<p><img src="@source/design/articles/assets/gestalt-principle1.jpg" alt="图片1"></p>
<p>其实道理很简单，我们做的东西是给人用的。人是动物不是一台机器，人的认知和记忆能力是有限的。视觉设计和心理是相互联系的，并且可以相互影响。格式塔原则可以帮助我们理解和控制这些联系。</p>
<p>今天就给大家科普下格式塔原则到底是什么? 在设计中如何运用? 是如何影响到我们的生活学习的? 本文会结合大量案例分析讲解，无论您是平面设计师，UI 设计师，插画师，设计小白还是路人，一篇文章让格式塔帮您做出更好的设计!</p>
<h3 id="什么是格式塔原理" tabindex="-1"> 什么是格式塔原理</h3>
<p>格式塔学习理论可谓是现代认知主义学习理论的先驱，自 1912 年由韦特海墨(Ｍ，Wetheimer)提出后，在德国得到迅速发展。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-history.jpg" alt="格式塔原理发展历史"></p>
<p>1910，这位心理学家乘坐火车度假旅行。当火车经过一个铁路道口的时候，他发现道口闪烁的灯竟然像马戏团表演时剧院帐篷上环绕的灯光，令他产生了光在运动的错觉。(而我们坐火车永远就只会遇到熊孩子和熊孩子)然后他赶紧下火车买了一个西洋镜，来测试自己的想法。</p>
<p>他将一张图片放在西洋镜内部并通过狭缝观看时，一系列静止图像看起来像是动图。接着他用简单的抽象线条制作不同的画条，通过改变这些元素来研究导致错觉的原因。似动(Apparent Movement)实验成为格式塔心理学的起点。</p>
<h3 id="解决什么问题" tabindex="-1"> 解决什么问题</h3>
<p>他们认为思维是整体的、有意义的知觉，而不是联结起来的表象的简单集合；主张学习是在于构成一种完形，是改变一个完形为另一完形。我们的视觉系统自动对视觉输入构建结构，并在神经系统层面上感知形状、图形和物体，而不是只看到互不相连的边、线和区域。所谓格式塔，是德语 Gestalt 的译音，意即「完形」或「形状」；他们认为学习的过程不是试尝错误的过程，而是顿悟的过程，即结合当前整个情境对问题的突然解决。再通俗一点就是人是怎样认知和记忆所看到的事物。</p>
<h2 id="格式塔实验研究" tabindex="-1"> 格式塔实验研究</h2>
<p>主要包括以下三方面的实验研究:</p>
<h3 id="_1-似动现象" tabindex="-1"> 1. 似动现象</h3>
<p>似动现象是形成格式塔心理学的基础。是指两个相距不远、相继出现的视觉刺激物，呈现的时间间隔如果在 1/10 秒到 1/30 秒之间，那么我们看到的不是两个物体，而是一个物体在移动。</p>
<p>例如，我们看到灯光从一处向另一处移动，事实上是这只灯熄了，那只灯同时亮了。这种现象正是不能把整体分解成部分的证据。这种现象的组成部分是一些独立的灯在一开一关，但组成一个整体后，给人造成这些灯在动的假象。</p>
<p>后来，格式塔心理学把重点放在整体系统上，在这个系统中，各个部分是以一种能动的方式相互联系在一起的，也就是说，仅根据各分离的部分，无法推断出这个整体。所以人们把它称为「格式塔或完形心理学」。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-move.jpg" alt="似动现象"></p>
<ul>
<li>
<p>A: 这张螺旋图是静态还是动态的? 盯着漩涡看一会，您就会感觉到它在转动。</p>
</li>
<li>
<p>B: 您数数看有几个黑点? 当您的眼睛离开那个白点时，就出现白的负象，即黑。当您重新把视点 集中在原来的白点上时，它又变成白色的了。因此，当您的眼睛不断地 在移动的时候，那些黑白点 (正负像) 也就在不断地变化。</p>
</li>
<li>
<p>C: 您看是水平线还是不规则的斜线? 事实上所有的横线都是水平的，不信您拿尺子比一下。</p>
</li>
</ul>
<h3 id="_2-整体与部分" tabindex="-1"> 2. 整体与部分</h3>
<p>看起来格式塔心理学是把重点放在整体上，但这并不意味着他们不承认分离性。事实上，格式塔也可以是指一个分离的整体。</p>
<p>研究认为，一个人的知觉场始终被分成图形与背景两部分。「图形」是一个格式塔，是突出的实体，是我们知觉到的事物；「背景」则是尚未分化的、衬托图形的东西。知觉帮助我们把图形从背景中分离出来。图形与背景的对比越大，图形的轮廓越明显，则图形越容易被发觉。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-shape.jpg" alt="整体与部分"></p>
<ul>
<li>
<p>A: 这幅美食节广告中，酒瓶是被战略性地放置，以创造一个叉子的错觉。黑色酒瓶是图形，白色叉子是背景；在另一种情况下，黑色酒瓶是背景，白色叉子是图形。</p>
</li>
<li>
<p>B: 一黑一白两只天鹅，白天鹅和黑天鹅可以互充图形与背景的关系。</p>
</li>
<li>
<p>C: 这幅海报中，小女孩和气球是被战略性的放置，以创造一个字母「R」的错觉。这两个角色同样可以在图形和背景中互换。</p>
</li>
</ul>
<p><img src="@source/design/articles/assets/gestalt-principle-shape2.jpg" alt="整体与部分"></p>
<h3 id="_3-顿悟实验" tabindex="-1"> 3. 顿悟实验</h3>
<p>W·科勒在一次实验中用绳子把一只香蕉悬挂在笼子的顶棚上。笼子里只有惟一的一只木箱可以使用。6 只黑猩猩看到香蕉时跳跃起来竭力想抓住香蕉，但是徒劳。有一只名叫苏尔坦的黑猩猩马上停止了这些白费力气的努力，开始从各个方向打量箱子。忽然它停在箱子前面，抓起它并径直朝目标走去。它把木箱迅速放到地上，爬上箱子，从木箱上面使劲跳起，终于抓住了香蕉。</p>
<p>W·科勒还对这组黑猩猩使用其他工具进行了观察，如利用木棍去获取放在笼子外面的水果。这些黑猩猩甚至能够将两根短棍连接起来做成一根长棍。同样，它们还能把两三个箱子叠放在一起，再爬到放在最上面的箱子顶上，借助一根木棍去获取香蕉。</p>
<p>苛勒通过对黑猩猩进行的许多实验，提出了顿悟理论。他认为问题的解决不是由于尝试错误，而是由于顿悟。所谓顿悟，就是内在地把握情境的关系性，并依此改变整个情境。</p>
<p>或许正如一些批评家所指出的那样，顿悟不是一种独立的学习过程或学习形式，而是学习达到一定程度的表现或者结果。一定的经验积累，是产生顿悟的前提。</p>
<h2 id="影响记忆的三个因素" tabindex="-1"> 影响记忆的三个因素</h2>
<p>沃尔夫实验时要求实验体观看样本图形并记住它们，然后在不同的时间里根据记忆把它们画出来。结果发现实验体在不同的间隔时间画出来的图像都有不同。有时再现的图画比原来的图画更简单更有规则，有时原来图画中显著的细节在再现时被更加突出了。还有的比原来的图像更像某些别的我们都很熟悉的图案了。沃尔夫把这三种记忆规律称之为格式塔三大记忆律: 「水平化」、「尖锐化」、「常态化」。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-logo.jpg" alt="这两个品牌logo哪个才是正确的? "></p>
<h3 id="水平化-leveling" tabindex="-1"> 水平化 leveling</h3>
<p>水平化是指在记忆中我们趋向于减少知觉图形小的不规则部分使其对称；或趋向于减少知觉图形中的具体细节。</p>
<h3 id="尖锐化-sharpening" tabindex="-1"> 尖锐化 sharpening</h3>
<p>尖锐化是在记忆中与水平化过程伴随而行的。尖锐化是指在记忆中，人们往往强调知觉图形的某些特征而忽视其它具体细节的过程。在有些心理学家看来，人类记忆的特征之一，就是客体中最明显的特征在再现过程中往往被夸大了。</p>
<h3 id="常态化-normalizing" tabindex="-1"> 常态化 normalizing</h3>
<p>常态化是指人们在记忆中，往往根据自己已有的记忆痕迹对知觉图形加以修改，即一般会趋向于按照自己认为它似乎应该是什么样子来加以修改的。</p>
<h2 id="格式塔原理在设计中的应用" tabindex="-1"> 格式塔原理在设计中的应用</h2>
<p>格式塔的七个基本原则:</p>
<ul>
<li>接近性原则</li>
<li>相似性原则</li>
<li>连续性原则</li>
<li>闭合性原则</li>
<li>主体/背景原则</li>
<li>简单对称性原则</li>
<li>共同命运原则</li>
</ul>
<div><p>格式塔原理的核心</p>
<p><strong>整体决定部分的性质并且部分依从与整体</strong></p>
</div>
<h3 id="接近性原则-law-of-proximity" tabindex="-1"> 接近性原则 law of proximity</h3>
<p>人们对知觉场中客体的知觉，是根据它们各部分彼此接近或邻近的程度而组合在一起的。两个元素越是接近，组合在一起的可能性就越大。说明它们之间关系更强。但是接近也是有对比的，在复杂的设计中，我们要一边考虑它们之间内部的逻辑关系一边来排版。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-proximity.jpg" alt="接近性原则"></p>
<blockquote>
<p>同样都是 12 个圆形，您会把左图的 12 个圆形当成一个整体；右边那幅图，上面 4 个圆和下面 8 个圆距离较远，所以您会把上面 4 个圆当成一个整体，下面 8 个圆当成另外一个整体。</p>
</blockquote>
<p>需要注意的是，接近性比重较大，把上图的圆形改变形状，甚至添加颜色，人们也会把相近的一组当成一个整体:</p>
<p><img src="@source/design/articles/assets/gestalt-principle-proximity2.jpg" alt="接近性原则"></p>
<div><p>案例</p>
<p><img src="@source/design/articles/assets/gestalt-principle-proximity-app-store.jpg" alt="App Store"></p>
<p>板块之间的大间距把页面信息分割成各种不同栏目，距离更近的信息暗示了他们有内在的逻辑关系</p>
<p><img src="@source/design/articles/assets/gestalt-principle-proximity-zhanku.jpg" alt="站酷"></p>
<p>设计师模块，每个设计师信息组之间有足够大的留白，即使去掉分割线，用户也会清晰分清每一组的边界</p>
</div>
<div><p>提示</p>
<p>在界面设计中常用的设计方法就是划分固定的位置区域，比如导航栏，内容区，操作栏。还有就是通过距离远近来进行信息归类，同类信息接近，不同信息远离。</p>
</div>
<div><p>相关信息</p>
<p>属性相同、场景相似的信息应该放到一起，降低阅读成本，提高用户感知效率;不相关的信息尽量区分开，不要放到一起模糊不清引起不必要的误解。</p>
</div>
<h3 id="相似性原则-law-of-similarity" tabindex="-1"> 相似性原则 law of similarity</h3>
<p>人们在感知时，会对那些相似的项目，只要不被接近因素干扰，会倾向于把它们联合在一起。换言之，相似的部分在知觉中会形成若干组。</p>
<p>例如，我们在小组辩论中，往往几个人争着发言，但我们仍然能从嘈杂的声音中听出某个人的讲话，这是因为这个人讲话的音质始终有相似性的缘故。如果他讲话的音质经常在变化，那就很难从噪音声中分辨出他的话来。</p>
<p>人们会把那些明显具有共同特性(如形状、大小、共同运动、方向、颜色等)的事物当成一个整体。与不具有相似视觉特征的元素相比，具有相似视觉特征的元素被认为更加相关。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-similarity.jpg" alt="相似性原则"></p>
<p>举个例子相似性原则在实际产品中的应用:</p>
<p><img src="@source/design/articles/assets/gestalt-principle-similarity-bilibili.jpg" alt="bilibili"></p>
<blockquote>
<p>上图全部频道页面，我们在浏览时，会从心理上默认，把频道头像、介绍和订阅按钮自动归为一类。类似外形的单元会被我们人脑默认为同一属类</p>
</blockquote>
<div><p>相关信息</p>
<p>看起来跟亲密性非常类似，但是他们确实不同的两个概念。亲密性强调位置，相似性则强调内容。通常把有明显特征的事物(形状、颜色、大小)组合在一起。多用于表单和导航。</p>
</div>
<h3 id="连续性原则-law-of-continuity" tabindex="-1"> 连续性原则 law of continuity</h3>
<p>在知觉过程中人们往往倾向于使知觉对象的直线继续成为直线，使曲线继续成为曲线，也就是视觉的惯性。利用连续律我们可以让用户操作界面时不经过思考就点击一个固定的位置。</p>
<p>我们倾向于完整地连接一个图形，而不是观察残缺的线条或形状。这种知觉上的结束，称之为闭合。如果局部形象过于陌生或者简略，则不会产生整体闭合联想。</p>
<p>人的视觉有追随一个方向的延续，以便把元素联接在一起，使它们看来是连续向着特定的方向。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-continuity.jpg" alt="连续性原则"></p>
<p>△ 左图我们不会认为是两个残缺的圆，而是两个相交的圆；中间的 IBM 商标我们之所以能看出来是 IBM，就是因为我们在视觉上看到的不是离散的线条，而是连续的图形；右图我们会看到是向两个方向连续的曲线。</p>
<div><p>案例</p>
<p><img src="@source/design/articles/assets/gestalt-principle-continuity-stock.jpg" alt="股市"></p>
<p>每天的股市数据构成走势图，视觉上会跟随曲线方向知道由左向右去看走势</p>
</div>
<div><p>相关信息</p>
<p>视觉倾向于感知连续的形式而不是分散的碎片通过找到非常微小的共性，将多个不同的信息结成一个整体，是界面设计和 logo 设计常用的原则之一</p>
</div>
<h3 id="闭合性原则-law-of-closure" tabindex="-1"> 闭合性原则 law of closure</h3>
<p>人们在观察熟悉的视觉形象时，会把不完整的局部形象当作一个整体的形象来感知，这种知觉上的结束，称之为闭合。如果局部形象过于陌生或者简略，则不会产生整体闭合联想。</p>
<p>闭合是一种完成某种图形(完形)的行动。就算没有外形的约束，我们也会自动把图形脑补完全。比如半个形状或者有缺口的形状我们不会认为是一条线或各种零碎的图形，而是一个完整的形状。闭合是指一种完形的认知规律。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-closure.jpg" alt="闭合性原则"></p>
<div><p>案例</p>
<p><img src="@source/design/articles/assets/gestalt-principle-closure-apple-music.jpg" alt="Apple Music"></p>
<p>我们常见的页面横滑组件就运用了闭合律原则，通常在界面右侧露出一半(或少部分)内容，来提示用户右边还隐藏着更多内容</p>
</div>
<div><p>相关信息</p>
<p>人们的视觉系统会自动将不相干的图形元素封闭起来感知为完整的个体为不实单独的碎片</p>
<p>表现手法有:正负形、封闭边界、不完全闭合</p>
</div>
<h3 id="主体-背景原则" tabindex="-1"> 主体/背景原则</h3>
<p>主体指的是在界面当中占据我们主要注意力的所有元素，其余的元素在此时均成为背景。当主体与背景重叠时，人的视觉更加倾向于将小的物体视为主体，大的物体视为背景，所以我们可以通过大小与图的关系，将我们希望传递的不同层次的内容进行展示。</p>
<p>当小图形重叠大图形之上，我们的视觉会倾向于将小图形归为主体，大色块为背景，这就是格式塔中的主体与背景原则。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-main.jpg" alt="主体/背景原则"></p>
<div><p>案例</p>
<p><img src="@source/design/articles/assets/gestalt-principle-main-doubanFM.jpg" alt="豆瓣 FM"></p>
<p>在白色背景上有非常突出的主体: 歌曲封面、歌名、进度条、播放/暂停、收藏等，歌曲播放时，进度条有非常明显的进度变化，切换歌曲时，封面的前后错层，这些都与背景有非常鲜明的对比</p>
</div>
<div><p>相关信息</p>
<p>在界面设计中，主体背景是弹窗常常运用到的表现手法利用空间感给用户带来视觉引导，让用户快速感知重要的信息内容，和可忽略的信息内容</p>
</div>
<h3 id="简单对称性原则-simple-principle" tabindex="-1"> 简单对称性原则 Simple principle</h3>
<p>在观察事物过程中，我们第一印象更倾向于简单而且对称的图形，这就是格式塔的简化对称性原则。</p>
<p>具有对称、规则、平滑的简单图形特征的各部分趋于组成整体。对称的元素往往被认为是归属在一起的，而不管它们之间的距离，都给我们一种牢固和有序的感觉。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-simple.jpg" alt="简单对称性原则"></p>
<p>人的眼睛喜欢在复杂的形状中找到简单而有序的对象，当我们在一个设计中看到复杂的物体时，眼睛更愿意将它们转换为单一统一形状，并尝试从这些形状中移除无关的细节来简化这些物体。</p>
<p>对称的构图是令人满意的，但它们也会变得有点沉闷。在对称的设计中加入不对称的元素可以在给人留下印象的同时吸引注意力。</p>
<div><p>案例</p>
<p><img src="@source/design/articles/assets/gestalt-principle-simple-pinterest.jpg" alt="Pinterest"></p>
<p>左右布局的瀑布流就是格式塔的简化对称性的体现，用户在浏览的的过程中有效减轻了阅读压力。特别适合这种以图片流为主的产品，能大大提高浏览效率。</p>
</div>
<div><p>相关信息</p>
<p>对称元素简单、和谐，但往往容易单调，一般来说加入不对称的样式会更容易让人印象深刻，在平面设计中对称的使用趣味性更加广泛</p>
</div>
<h3 id="共同命运原则-common-destiny" tabindex="-1"> 共同命运原则 Common destiny</h3>
<p>无论元素之间的距离有多远，或者它们看起来有多不同，如果它们一起运动或变化，它们都被认为是相关的。这里的共同命运针对的是运动的物体。与接近性原理和相似性原理相像，都与我们的视觉系统会有着给对象进行分组来感知事物的倾向相关，但是一起运动的物体会被感知为属于同一组或是彼此相关这样的一种视觉现象，这就是格式塔中的共同命运原则。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-common-destiny.jpg" alt="共同命运原则"></p>
<p>向同一方向移动的元素，我们在处理的过程当中，会默认把它们归为一类。</p>
<div><p>案例</p>
<p><img src="@source/design/articles/assets/gestalt-principle-common-destiny-iOS.jpg" alt="ios 桌面"></p>
<p>iPhone 删除应用时候，所有图标都一起晃动起来(意思瑟瑟发抖，不要删我不要删我! )，左上角都有一个删除的按钮，要么删除，要么保留，这就是共同命运原则。</p>
</div>
<div><p>相关信息</p>
<p>共同命运强调的是方向，当元素的运动、方向具有共同运动形式或者某种规律使，我们会将其视为为彼此相关的一个群组或整体</p>
</div>
<h3 id="更多" tabindex="-1"> 更多</h3>
<p>事实上，以上 7 条原则只是格式塔心理学中的一小部分而已，比如还有:</p>
<h4 id="成员特性律" tabindex="-1"> 成员特性律</h4>
<p>一个整体中的个别部分并不具有固定的特性，个别部分的特性是从它与其他部分的关系中显现出来的。</p>
<p><img src="@source/design/articles/assets/gestalt-principle-special.jpg" alt="成员特性律"></p>
<p>如果我们有很多同样的按钮，如何让某个更重要的按钮突出但是仍然让用户感知还是按钮呢? 那就要用到成员特性律了。成员特性律赋予了集体中某一个元素特殊的一些刺激元素从而突出它。</p>
<p>独特的外形暗示了它与别的元素有不同的功能</p>
<div><p>案例</p>
<p><img src="@source/design/articles/assets/gestalt-principle-special-taobao.jpg" alt="淘宝"></p>
<p>商品详情页有两个重要的操作按钮: 加入购物车、立即购买。为了促使用户尽快购买，给「立即购买」更重的红色以突出它的独特性</p>
</div>
<h2 id="格式塔学习理论的基本观点" tabindex="-1"> 格式塔学习理论的基本观点</h2>
<h3 id="认知重组" tabindex="-1"> 认知重组</h3>
<p>格式塔心理学认为，通过学习，会在头脑中留下记忆痕迹，这些痕迹不是孤立的要素，而是一个有组织的整体，即完形。因此，学习主要不是加进新痕迹或减去旧痕迹的问题，而是要使一种完形改变成另一种完形。一个人学习的过程，通常是从一种混沌的模糊状态，转变成一种有意义的、有结构的状态，这就是知觉重组的过程。</p>
<h3 id="顿悟学习" tabindex="-1"> 顿悟学习</h3>
<p>顿悟学习可以避免多余的试误，同时又有助于迁移。格式塔心理学家认为，通过对问题情境的内在性质有所顿悟的方式来解决问题，就可以避免与这一问题情境不相干的大量随机的、盲目的行动，而且有利于把学习所得迁移到新的问题情境中去。顿悟学习的核心是要把握事物的本质，而不是无关紧要的细节。</p>
<h3 id="遗忘曲线" tabindex="-1"> 遗忘曲线</h3>
<p>真正的学习是不会遗忘的。通过顿悟习得的内容，一旦掌握后，永远也不会遗忘。顿悟将成为我们知识技能中永久的部分。用现代认知信息加工心理学的术语来说，顿悟的内容是进入了长时记忆将永远保留在学习者的头脑中。</p>
<div><p>提示</p>
<p>有人在一项实验中，把 149162536496481 写在一张卡片上，要一组被试看 15 秒钟，然后试图回忆它。这是一项相当困难的任务。在一般情况下，除了记住其中少数几个数字外，没有人能全部记住。但在给另一组被试看这张卡片之前，告诉他们在试图记住它以前，先想一下这些数字为什么这样排列，是否有规律可循。结果不少被试都觉察到，这些数原是用 1 到 9 的平方排列起来的。这样一来，回忆这些数字就毫无困难，哪怕是在几周或几个月之后也能轻易做到。</p>
</div>
<h3 id="学习奖励" tabindex="-1"> 学习奖励</h3>
<p>格式塔心理学家认为，真正的学习常常会伴随着一种兴奋感。例如，一些人对智力拼图、字迷填空玩得津津有味。也因此有人抨击滥用各种外部奖励，诸如使用糖果、好分数、五角星或金钱之类的东西来驱动学习。对于教育工作者来说，不加区分地使用奖励物，可能会使学生分心，不把心思用在学习上，而只关心能得到什么奖励上，从而不可能达到对问题情境有顿悟的理解。</p>
<h3 id="顿悟说对错误说的批判" tabindex="-1"> 顿悟说对错误说的批判</h3>
<p>还记得第二部分对猩猩的实验吗，实验表明猩猩在行动之前，已经领会到了自己的动作为什么进行，怎样去进行以及最终的结果为何，在苛勒看来，猩猩对问题的解决并非是一种盲目尝试错误的过程，而是处于对问题产生了顿悟。</p>
<p>在格式塔心理学家看来，学习是一种智慧行为，是一种顿悟过程，需要有理解、领会与思维等认识活动的参与，并且它是一种突现、速变、飞跃的过程。顿悟学习特点可归纳如下: 问题解决前尚有一个困惑或沉静的时期，表现得迟疑不决，有长时间停顿；从问题解决前到问题解决之间的过渡不是一种渐变的过程，而是一种突发性的质变过程；在问题解决阶段，行为操作是一个顺利的不间断的过程，形成一个连续的完整体，很少有错误的行为；由顿悟获得的问题解决方法能在记忆中保持较长的时间；由顿悟而掌握的学习原则有利于适应新的情境，解决新的问题。</p>
<h3 id="创造性思维" tabindex="-1"> 创造性思维</h3>
<p>韦特默认为要想创造性地解决问题必须让整体支配部分。即使在必要的关注问题的细节时，也决不能忽视问题的整体。必须把细节放在问题的整体中，把它们与整体结构联系起来加以考虑。这是一种自上而下、由整体到部分的思维。他认为要使人们顺利地解决问题，必须把问题的整个情境呈现出来，使之能对问题有个完全概观，决不能像桑代克那样，有意地把解决问题的方法和途径藏起来，迫使被试不得不去盲目试误。学习贵在打破旧有知识和模式的束缚，争取在对问题领域的基础上产生顿悟，掌据解决问题的原则，做到触类旁通、举一反三，促进智力水平的提高。</p>
<h2 id="格式塔学习理论的分支" tabindex="-1"> 格式塔学习理论的分支</h2>
<h3 id="勒温的基本观点" tabindex="-1"> 勒温的基本观点</h3>
<p>传统的格式塔心理学在探讨学习的问题时，认为学习者「渴望达到某些目的」是理所当然的，因而他们关注的是通过知觉重组达到目的的途径；而勒温则把注意力集中在「渴望」和「目的」本身上，并把它们与个性联系起来研究。勒温由此而形成的理论体系，主要不是一种学习理论，而是一种描述系统。</p>
<h3 id="勒温论学习" tabindex="-1"> 勒温论学习</h3>
<p>勒温的基本观点是社会心理学方面的，尤其是关于个体的动机。从某种角度来看，这弥补了格式塔学习理论的不足。勒温认为，用场论来研究学习的问题，需要注意以下几个方面:</p>
<p>要使用构成法(Constructive method)，而不是用分类法或分析法。这就是说，要用心理学中最基本的几个构成来探讨学习的问题。这些基本构成就是生活空间，心理环境、诱发力和约束力等。</p>
<p>要对行为作动态分析，要了解作为行为之基础的各种力(forces)。他把行为变化看作是各种心理力量的结果。</p>
<p>要从心理的角度来分析学习者当时的生活空间和心理世界，而不能像行为主义者那样用客观的物理主义者的术语来界定刺激。</p>
<p>要从整体情境分析入手，而不能只是从刺激情境中抽取一两个孤立的要素。因为不从整体上考虑问题，是不可能作出正确判断的。</p>
<p>行为是行为发生时场的函数。勒温认为行为取决于有机体以往的经验和强化史，这是形而上学的。因为过去的事情现在并不存在，所以不可能直接影响现在的行为。虽说过去的心理场是现在的心理场的来源，但影响现在行为的，毕竟是现在的心理场。</p>
<p>在研究学习时，至少必须区别这样四种变化: 第一，作为认知结构(即知识)变化的学习；第二，作为动机变化的学习；第三，作为群体属性和意识形态变化的学习；第四，作为身体肌肉随意控制发生变化的学习。在勒温看来，学习理论要探讨的，主要是学习者认知结构和动机的变化。</p>
<h3 id="评论" tabindex="-1"> 评论</h3>
<p>勒温在格式塔心理学的框架结构内引进「场」、「生活空间」、「拓扑学」和「向量」等概念，另辟蹊径，从而丰富和发展了传统的格塔理论。尽管他研究的重心放在社会心理学方面，但他对行为、问题和动机等方面探讨，在当时是很有新意的。</p>
<h2 id="格式塔原理的贡献与局限性" tabindex="-1"> 格式塔原理的贡献与局限性</h2>
<h3 id="_1-贡献" tabindex="-1"> 1. 贡献</h3>
<h4 id="对元素主义的反击具有进步意义" tabindex="-1"> 对元素主义的反击具有进步意义</h4>
<p>格式塔学派用大量的事实证明了冯特元素主义理论的漏洞百出，并大胆地冲破了元素主义的束缚，积极而有成效地进行了大量的探索，并取得了一系列引人注目的成果，这对促进心理学事业的繁荣和发展是大有脾益的。</p>
<h4 id="格式塔学派引发了知觉心理学的革新" tabindex="-1"> 格式塔学派引发了知觉心理学的革新</h4>
<p>由于格式塔学派在知觉领域做了大量有目共睹的研究，使得经验论、联想论、官能主义的传统方法逐渐让位于先验论、整体论和突创论。知觉心理学也由感觉心理学的附庸变成一个独立的分支，并在短时期内就取得了一系列突破。</p>
<h4 id="格式塔学派的学习理论独具特色" tabindex="-1"> 格式塔学派的学习理论独具特色</h4>
<p>格式塔学派的顿悟说及对迁移、创造性思维的研究，冲击了联结主义和行为主义的框框，不论在理论创建还是在教育实践中都具有独到的价值和意义。顿悟说也成为西方学习理论中最重要的理论之一。</p>
<h4 id="对人本主义心理学影响较大" tabindex="-1"> 对人本主义心理学影响较大</h4>
<p>人本主义心理学的创建人马斯洛(就是提出人生 7 个层次的需求理论的那位)曾在他老师的惠特海默指导下，研究整体论，从而积累下了研究人的经验；同时期的对人的心理事件或整体研究。主张存在分析的心理学，这些都表明了格式塔学派的潜在影响。</p>
<h4 id="对现代认知心理学的产生起了推动作用" tabindex="-1"> 对现代认知心理学的产生起了推动作用</h4>
<p>格式塔学派研究的那些认知过程及心理过程成了现代认知心理学的基本观点，正如罗伯特逊指出，认知心理学实际上是一种新格式塔现象。</p>
<h3 id="_2-局限性" tabindex="-1"> 2. 局限性</h3>
<p>过分强调顿悟，而全面否定尝试错误，犯了以偏概全的偏激性错误。</p>
<p>顿悟似乎是一个神秘的概念，它的心理活动机制没有揭示清楚。还不能说是一个完善的理论解释。</p>
<p>顿悟说还缺乏对其他与学习有关问题的研究。而且研究的主要是动物的经验学习，还不能很好地解释人类的所有直接经验学习，如技能的习得等。</p>
<p>其理论观点和术语含糊不清。格式塔学派不加分析地采用了一些物理学的概念和数理术语，观点模棱两可，概念不确切，给人的感觉是理论主张过于晦涩深奥，神秘莫测。</p>
<p>对其他学派的批评过于苛刻，他们只批评其他学派的缺陷，却没有提出更好的改进措施，且自身的理论建设和主张又并不明确和高明多少。原来每个行业都有一条鄙视链的存在啊。</p>
<p>格式塔学派的实验不够严谨，过分依赖现象学的方法，缺乏信度和效度，就水平而言，并不比他们所批评的其他学派好多少。</p>
<h2 id="总结" tabindex="-1"> 总结</h2>
<p>我们把原理归类、总结的目的有两个: 一个是自我检查，我们在构思设计的过程中往往会多于专注视觉效果的创作而忽略最基本的原理，比如在设计之前进行完整的设计构思；设计过程中检查自己的设计作品，避免低级错误导致反复改稿，比如信息不对齐，布局杂乱等；再就是设计完成之后对需求方有理有据的陈述。第二个是在深入理解的前提下做设计时能够举一反三。</p>
<p>用户界面设计并不全是关于漂亮的像素和完美的图形。它主要是关于沟通、性能和便利性。格式塔原则总是帮助我们实现这些目标，为用户创造愉快的体验，为企业创造巨大的成功。</p>
<p>通过例子可以发现，这 7 项法则并不是独立存在的，它们之间具有高度的关联性，是相辅相成的关系，我们需要跟进不同的需求类型和用户场景，运用这些基本法则打出组合拳，使您的设计方案更有依据。在做产品或者设计的时候一定要考虑人的认知与记忆的因素，这是与生俱来的天性，人们的审美对简单与和谐具有基本的要求。我们只有更好的利用视觉空间设计作品，减少设计的复杂性，尽量保持格式塔原则的完整，用户才能更好更容易地理解使用我们的产品。</p>
<blockquote>
<p>参考文献:</p>
<ul>
<li>《格式塔心理学理论》MBA 智库</li>
<li>《格式塔心理学原理》库尔特.考夫卡</li>
<li>《视觉设计中的格式塔艺术心理学》</li>
<li>《格式塔心理学 5 项法则的学习与思考》Tencent CDC</li>
<li>《设计中的格式塔原则》Souche Blog</li>
<li>维基百科及其他</li>
</ul>
</blockquote>
]]></content>
    <author>
      <name>印迹</name>
    </author>
    <category term="设计" scheme=""/>
    <contributor>
      <name>印迹</name>
    </contributor>
    <published>2020-09-26T00:00:00.000Z</published>
    <rights>Copyright by 印迹</rights>
  </entry>
  <entry>
    <title type="html">信息流介绍</title>
    <id>https://github.com/MisterChen9527/design/articles/infomation-flow.html</id>
    <link href="https://github.com/MisterChen9527/design/articles/infomation-flow.html"/>
    <updated>2022-08-20T08:54:00.000Z</updated>
    <content type="html"><![CDATA[<p>今日头条的出现颠覆了传统新闻产品(如网易、新浪和搜狐新闻)。</p>
<p>传统新闻依靠着编辑人员的推荐，将新闻触达给用户，而今日头条则依靠着新闻算法，抛弃传统人工分发的思路，使分发效率数以万计的提升，其迅速崛起，成为头部新闻资讯产品。</p>
<p>今日头条作为新闻信息流的头部产品，里面的设计细节和设计逻辑值得我们思考和分析。</p>
<h2 id="信息流样式" tabindex="-1"> 信息流样式</h2>
<p>什么是信息流? 信息流由两部分组成，信息流=信息+流。</p>
<p>信息指的是内容，这些内容可以是新闻、视频、图片等，所呈现的样式多为列表或卡片。</p>
<p>流指的是瀑布流，可以无限滑动浏览。</p>
<p>所以信息流就是可以无限滑动浏览内容信息。</p>
<p>信息流的样式的好坏，会直接影响到信息的展现效率和点击率，从而影响到用户获取信息的效率和整体阅读时长。</p>
<p>下图为今日头条首页推荐频道的信息流:</p>
<p><img src="@source/design/articles/assets/infomation-flow1.jpg" alt="信息流"></p>
<p>将信息流样式进行简单分类，使用最多的四种样式为纯文、左文右图、短内容、大图视频。如下图所示:</p>
<p><img src="@source/design/articles/assets/infomation-flow2.jpg" alt="信息流"></p>
<p>纯文样式用于新闻中没有图片的情况，当文章中没有图片时，这时候采用改样式。列表含有: 标题、来源、评论数、发布时间。</p>
<p>对于含有图片时候，采用左文右图样式。目前新闻对于含有图片的列表样式，一般有 3 种分别为: 左文右图、左图右文和三图。</p>
<p>左图右文的样式，强化图片，弱化标题。对于新闻资讯来说，图片无法准确的表达其新闻资讯的内容，所以这种样式目前没什么产品使用。</p>
<p>目前市面上绝大部分产品都采用左文右图，例如今日头条、网易新闻、腾讯新闻、新浪新闻等。只有是搜狐新闻采用左图右文。</p>
<p><img src="@source/design/articles/assets/infomation-flow3.jpg" alt="信息流"></p>
<p>三图则通过图片吸引用户点击查看，更加通过图片引导用户点击，好处是可以提升点击率，但是整个信息流显得乱，影响用户阅读。</p>
<p><img src="@source/design/articles/assets/infomation-flow4.jpg" alt="信息流"></p>
<p>和网易相比，头条信息流阅读起来更加舒服，视觉压力减少，这是基于今日头条三图样式占比很少，如下图所示，网易新闻信息流插入三图样式导致整个信息流杂乱。</p>
<p><img src="@source/design/articles/assets/infomation-flow5.jpg" alt="信息流"></p>
<p>对比下网易新闻和今日头条信息流样式，如下图所示:</p>
<p>纯文，今日头条的标题颜色更深，网易的相对而言淡一些。头条的列表高度比网易的高，这意味着，头条的屏幕展示条数比网易新闻的少，但是整体的空间感和留白呼吸感更舒服。同时今日头条含有发布时间，使得用户观看新闻资讯时，能够感知新闻的实时性。</p>
<p><img src="@source/design/articles/assets/infomation-flow6.jpg" alt="信息流"></p>
<p>左文右图，头条的列表比网易的要高一些，对比来看，头条的标题更加明显，图片含有圆角半径，使得头条整体看上去更舒服。</p>
<p><img src="@source/design/articles/assets/infomation-flow7.jpg" alt="信息流"></p>
<p>大图视频，两者的区别不大，依然是标题文字颜色、封面圆角和发布时间的差异性。</p>
<p><img src="@source/design/articles/assets/infomation-flow8.jpg" alt="信息流"></p>
<h3 id="小结" tabindex="-1"> 小结</h3>
<p>头条流整体的空间感、留白，标题颜色对比做的比较好。</p>
<p>留白相对于网易更多一些，相同的屏幕空间，展示的内容信息会少一点，屏幕展示效率会低一些。但用户在阅读过程中舒适度更强，同样的情况下用户的阅读时长会变长。</p>
<h2 id="信息流分发" tabindex="-1"> 信息流分发</h2>
<p>什么是信息流分发? 通过一定的设计策略，将用户的流量合理的分配到其他各个地方，从而达到产品的设计目标，促进流量利用最大化。提升流量最大限度的转化，获得更大的商业化价值。</p>
<p>今日头条的信息流主要包含 5 个模块: 置顶模块、资讯列表、广告模块、短内容、其他功能模块的卡片入口。如下图所示:</p>
<p><img src="@source/design/articles/assets/infomation-flow9.jpg" alt="信息流"></p>
<p>推荐流顶部的置顶内容，最多置顶两条，这里是因为相关政策原因。</p>
<p>在正常信息流第一条之后，插入广告，为平台做商业化营收。之后就会根据用户的阅读习惯，给用户推荐信息内容，并时不时的插入广告等。</p>
<p>今日头条没有编辑运营，所以几乎所有的新闻都来自于机器算法。少了编辑人员的人工运营，使得今日头条有巨量的内容按照不同用户的阅读习惯推荐用户不同的内容。</p>
<h2 id="搜索栏" tabindex="-1"> 搜索栏</h2>
<p>在新闻信息流产品里，搜索栏所承接的使用场景主要有两个。一个是提供搜索新闻功能，通过关键词对当前或过去的新闻进行搜索。</p>
<p>另一个是在搜索模块提供热搜新闻，提供用户阅读。</p>
<p>那么如何提升搜索栏的点击次数。今日头条将热搜新闻以提示语的形式展示在搜索栏滚动，吸引用户。同时为了更大限度的展示新闻条数，采用一排两个的设计，保证最大程度的提升点击率。</p>
<p><img src="@source/design/articles/assets/infomation-flow10.jpg" alt="信息流"></p>
<p>用户点击搜索框之后，搜索框里面内置第一条热搜关键词。用户可通过键盘上的搜索，进行搜索。也可以点击搜索栏下方的两个热搜新闻进行搜索查看。</p>
<h2 id="短视频" tabindex="-1"> 短视频</h2>
<p>视频标题内置于播放器中，这样的好处可以减少卡片高度，让视频曝光量提升，缺点是用户如果想看视频标题介绍时，则需要点击下播放器，标题才能再次出现。</p>
<p><img src="@source/design/articles/assets/infomation-flow11.jpg" alt="信息流"></p>
<p>标题置于播放器里面，头条可以展示 2.5 条，而好看视频将标题置于外面只能展示 2 条，如下图所示:</p>
<p><img src="@source/design/articles/assets/infomation-flow12.jpg" alt="信息流"></p>
<p>对于广告业务来说，收入的一个重要指标则是广告曝光量，为了提升广告的收入，则必须降低视频高度，使得广告曝光效率得到提升，以此提升收入，所以头条将标题放置于播放器里面符合商业目标，但是不符合用户目标。</p>
<h2 id="小视频" tabindex="-1"> 小视频</h2>
<p>小视频的布局设计大致有两种，一种是抖音式布局，采用头像和操作项位于右侧。这样的好处是，视频的互动量很明显的展示出来，可引导用户互动。但对视频的内容有一定遮挡影响。</p>
<p>另一种是好看视频式布局，将头像昵称、操作项放在底部，弱化视频的互动数据。让用户专注于视频内容。</p>
<p><img src="@source/design/articles/assets/infomation-flow13.jpg" alt="信息流"></p>
<p>今日头条的小视频采用和抖音一样的布局。头像和操作项放于右侧。但是为了引导用户评论，在界面底部加入了输入框，引导用户评论，为了让用户更加方便的看评论。上滑手势变成了调起起评论。</p>
<p><img src="@source/design/articles/assets/infomation-flow14.jpg" alt="信息流"></p>
<h2 id="短内容流" tabindex="-1"> 短内容流</h2>
<p>推荐流里面的短内容(微头条)，点击进入短内容 feed 流。而非短内容详情页。用户如果想看详情，那么需要用户再次点击。</p>
<p><img src="@source/design/articles/assets/infomation-flow15.jpg" alt="信息流"></p>
<p>这种设计明显体验不好，估计产品为其他短内容导流。这样的交互设计，可以使得整体的短内容流的曝光量提升好几倍。</p>
<p>这种做法牺牲了体验，用户如果需要看详情，则需要连续点击两次。这是为了业务指标作出牺牲的设计。</p>
]]></content>
    <category term="设计" scheme=""/>
    <published>2020-09-26T00:00:00.000Z</published>
  </entry>
</feed>